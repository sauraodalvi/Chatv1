(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function wh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fc={exports:{}},Ia={},Rc={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ks=Symbol.for("react.element"),bh=Symbol.for("react.portal"),kh=Symbol.for("react.fragment"),jh=Symbol.for("react.strict_mode"),Nh=Symbol.for("react.profiler"),Mh=Symbol.for("react.provider"),Sh=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.memo"),Ah=Symbol.for("react.lazy"),xl=Symbol.iterator;function Dh(e){return e===null||typeof e!="object"?null:(e=xl&&e[xl]||e["@@iterator"],typeof e=="function"?e:null)}var Bc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oc=Object.assign,Wc={};function Sr(e,t,r){this.props=e,this.context=t,this.refs=Wc,this.updater=r||Bc}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gc(){}Gc.prototype=Sr.prototype;function wo(e,t,r){this.props=e,this.context=t,this.refs=Wc,this.updater=r||Bc}var bo=wo.prototype=new Gc;bo.constructor=wo;Oc(bo,Sr.prototype);bo.isPureReactComponent=!0;var vl=Array.isArray,qc=Object.prototype.hasOwnProperty,ko={current:null},Uc={key:!0,ref:!0,__self:!0,__source:!0};function Vc(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)qc.call(t,s)&&!Uc.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:ks,type:e,key:i,ref:o,props:a,_owner:ko.current}}function $h(e,t){return{$$typeof:ks,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jo(e){return typeof e=="object"&&e!==null&&e.$$typeof===ks}function Eh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var wl=/\/+/g;function Ya(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Eh(""+e.key):t.toString(36)}function qs(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ks:case bh:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Ya(o,0):s,vl(a)?(r="",e!=null&&(r=e.replace(wl,"$&/")+"/"),qs(a,t,r,"",function(d){return d})):a!=null&&(jo(a)&&(a=$h(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(wl,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",vl(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+Ya(i,l);o+=qs(i,t,r,c,a)}else if(c=Dh(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+Ya(i,l++),o+=qs(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Cs(e,t,r){if(e==null)return e;var s=[],a=0;return qs(e,s,"","",function(i){return t.call(r,i,a++)}),s}function Lh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},Us={transition:null},Ph={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Us,ReactCurrentOwner:ko};function Yc(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Cs,forEach:function(e,t,r){Cs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Cs(e,function(){t++}),t},toArray:function(e){return Cs(e,function(t){return t})||[]},only:function(e){if(!jo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Sr;Z.Fragment=kh;Z.Profiler=Nh;Z.PureComponent=wo;Z.StrictMode=jh;Z.Suspense=Th;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ph;Z.act=Yc;Z.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Oc({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=ko.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)qc.call(t,c)&&!Uc.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:ks,type:e.type,key:a,ref:i,props:s,_owner:o}};Z.createContext=function(e){return e={$$typeof:Sh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mh,_context:e},e.Consumer=e};Z.createElement=Vc;Z.createFactory=function(e){var t=Vc.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:Ch,render:e}};Z.isValidElement=jo;Z.lazy=function(e){return{$$typeof:Ah,_payload:{_status:-1,_result:e},_init:Lh}};Z.memo=function(e,t){return{$$typeof:Ih,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=Us.transition;Us.transition={};try{e()}finally{Us.transition=t}};Z.unstable_act=Yc;Z.useCallback=function(e,t){return Ve.current.useCallback(e,t)};Z.useContext=function(e){return Ve.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};Z.useEffect=function(e,t){return Ve.current.useEffect(e,t)};Z.useId=function(){return Ve.current.useId()};Z.useImperativeHandle=function(e,t,r){return Ve.current.useImperativeHandle(e,t,r)};Z.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return Ve.current.useMemo(e,t)};Z.useReducer=function(e,t,r){return Ve.current.useReducer(e,t,r)};Z.useRef=function(e){return Ve.current.useRef(e)};Z.useState=function(e){return Ve.current.useState(e)};Z.useSyncExternalStore=function(e,t,r){return Ve.current.useSyncExternalStore(e,t,r)};Z.useTransition=function(){return Ve.current.useTransition()};Z.version="18.3.1";Rc.exports=Z;var L=Rc.exports;const zh=wh(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _h=L,Hh=Symbol.for("react.element"),Fh=Symbol.for("react.fragment"),Rh=Object.prototype.hasOwnProperty,Bh=_h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oh={key:!0,ref:!0,__self:!0,__source:!0};function Qc(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)Rh.call(t,s)&&!Oh.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Hh,type:e,key:i,ref:o,props:a,_owner:Bh.current}}Ia.Fragment=Fh;Ia.jsx=Qc;Ia.jsxs=Qc;Fc.exports=Ia;var n=Fc.exports,Ni={},Kc={exports:{}},ct={},Zc={exports:{}},Jc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,E){var q=j.length;j.push(E);e:for(;0<q;){var te=q-1>>>1,oe=j[te];if(0<a(oe,E))j[te]=E,j[q]=oe,q=te;else break e}}function r(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var E=j[0],q=j.pop();if(q!==E){j[0]=q;e:for(var te=0,oe=j.length,Qe=oe>>>1;te<Qe;){var rt=2*(te+1)-1,Wt=j[rt],ut=rt+1,bt=j[ut];if(0>a(Wt,q))ut<oe&&0>a(bt,Wt)?(j[te]=bt,j[ut]=q,te=ut):(j[te]=Wt,j[rt]=q,te=rt);else if(ut<oe&&0>a(bt,q))j[te]=bt,j[ut]=q,te=ut;else break e}}return E}function a(j,E){var q=j.sortIndex-E.sortIndex;return q!==0?q:j.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,w=null,y=3,p=!1,g=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var E=r(d);E!==null;){if(E.callback===null)s(d);else if(E.startTime<=j)s(d),E.sortIndex=E.expirationTime,t(c,E);else break;E=r(d)}}function f(j){if(v=!1,b(j),!g)if(r(c)!==null)g=!0,X(k);else{var E=r(d);E!==null&&me(f,E.startTime-j)}}function k(j,E){g=!1,v&&(v=!1,m(I),I=-1),p=!0;var q=y;try{for(b(E),w=r(c);w!==null&&(!(w.expirationTime>E)||j&&!N());){var te=w.callback;if(typeof te=="function"){w.callback=null,y=w.priorityLevel;var oe=te(w.expirationTime<=E);E=e.unstable_now(),typeof oe=="function"?w.callback=oe:w===r(c)&&s(c),b(E)}else s(c);w=r(c)}if(w!==null)var Qe=!0;else{var rt=r(d);rt!==null&&me(f,rt.startTime-E),Qe=!1}return Qe}finally{w=null,y=q,p=!1}}var T=!1,M=null,I=-1,O=5,H=-1;function N(){return!(e.unstable_now()-H<O)}function D(){if(M!==null){var j=e.unstable_now();H=j;var E=!0;try{E=M(!0,j)}finally{E?A():(T=!1,M=null)}}else T=!1}var A;if(typeof x=="function")A=function(){x(D)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,K=C.port2;C.port1.onmessage=D,A=function(){K.postMessage(null)}}else A=function(){S(D,0)};function X(j){M=j,T||(T=!0,A())}function me(j,E){I=S(function(){j(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,X(k))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(j){switch(y){case 1:case 2:case 3:var E=3;break;default:E=y}var q=y;y=E;try{return j()}finally{y=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,E){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=y;y=j;try{return E()}finally{y=q}},e.unstable_scheduleCallback=function(j,E,q){var te=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?te+q:te):q=te,j){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=q+oe,j={id:h++,callback:E,priorityLevel:j,startTime:q,expirationTime:oe,sortIndex:-1},q>te?(j.sortIndex=q,t(d,j),r(c)===null&&j===r(d)&&(v?(m(I),I=-1):v=!0,me(f,q-te))):(j.sortIndex=oe,t(c,j),g||p||(g=!0,X(k))),j},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(j){var E=y;return function(){var q=y;y=E;try{return j.apply(this,arguments)}finally{y=q}}}})(Jc);Zc.exports=Jc;var Wh=Zc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh=L,lt=Wh;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xc=new Set,as={};function Un(e,t){vr(e,t),vr(e+"Capture",t)}function vr(e,t){for(as[e]=t,e=0;e<t.length;e++)Xc.add(t[e])}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mi=Object.prototype.hasOwnProperty,qh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bl={},kl={};function Uh(e){return Mi.call(kl,e)?!0:Mi.call(bl,e)?!1:qh.test(e)?kl[e]=!0:(bl[e]=!0,!1)}function Vh(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Yh(e,t,r,s){if(t===null||typeof t>"u"||Vh(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ye(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new Ye(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new Ye(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new Ye(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new Ye(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new Ye(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new Ye(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new Ye(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new Ye(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new Ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var No=/[\-:]([a-z])/g;function Mo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(No,Mo);Fe[t]=new Ye(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(No,Mo);Fe[t]=new Ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(No,Mo);Fe[t]=new Ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new Ye(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new Ye(e,1,!1,e.toLowerCase(),null,!0,!0)});function So(e,t,r,s){var a=Fe.hasOwnProperty(t)?Fe[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Yh(t,r,a,s)&&(r=null),s||a===null?Uh(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var tn=Gh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ts=Symbol.for("react.element"),er=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),Co=Symbol.for("react.strict_mode"),Si=Symbol.for("react.profiler"),ed=Symbol.for("react.provider"),td=Symbol.for("react.context"),To=Symbol.for("react.forward_ref"),Ci=Symbol.for("react.suspense"),Ti=Symbol.for("react.suspense_list"),Io=Symbol.for("react.memo"),sn=Symbol.for("react.lazy"),nd=Symbol.for("react.offscreen"),jl=Symbol.iterator;function Lr(e){return e===null||typeof e!="object"?null:(e=jl&&e[jl]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,Qa;function Or(e){if(Qa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Qa=t&&t[1]||""}return`
`+Qa+e}var Ka=!1;function Za(e,t){if(!e||Ka)return"";Ka=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ka=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Or(e):""}function Qh(e){switch(e.tag){case 5:return Or(e.type);case 16:return Or("Lazy");case 13:return Or("Suspense");case 19:return Or("SuspenseList");case 0:case 2:case 15:return e=Za(e.type,!1),e;case 11:return e=Za(e.type.render,!1),e;case 1:return e=Za(e.type,!0),e;default:return""}}function Ii(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tr:return"Fragment";case er:return"Portal";case Si:return"Profiler";case Co:return"StrictMode";case Ci:return"Suspense";case Ti:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case td:return(e.displayName||"Context")+".Consumer";case ed:return(e._context.displayName||"Context")+".Provider";case To:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Io:return t=e.displayName||null,t!==null?t:Ii(e.type)||"Memo";case sn:t=e._payload,e=e._init;try{return Ii(e(t))}catch{}}return null}function Kh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ii(t);case 8:return t===Co?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zh(e){var t=rd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Is(e){e._valueTracker||(e._valueTracker=Zh(e))}function sd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=rd(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ra(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ai(e,t){var r=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Nl(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=kn(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ad(e,t){t=t.checked,t!=null&&So(e,"checked",t,!1)}function Di(e,t){ad(e,t);var r=kn(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$i(e,t.type,r):t.hasOwnProperty("defaultValue")&&$i(e,t.type,kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ml(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $i(e,t,r){(t!=="number"||ra(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wr=Array.isArray;function mr(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+kn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ei(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(Wr(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:kn(r)}}function id(e,t){var r=kn(t.value),s=kn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Cl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function od(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Li(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?od(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var As,ld=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(As=As||document.createElement("div"),As.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=As.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function is(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jh=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){Jh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function cd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function dd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=cd(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var Xh=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pi(e,t){if(t){if(Xh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function zi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _i=null;function Ao(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hi=null,pr=null,fr=null;function Tl(e){if(e=Ms(e)){if(typeof Hi!="function")throw Error(P(280));var t=e.stateNode;t&&(t=La(t),Hi(e.stateNode,e.type,t))}}function ud(e){pr?fr?fr.push(e):fr=[e]:pr=e}function hd(){if(pr){var e=pr,t=fr;if(fr=pr=null,Tl(e),t)for(e=0;e<t.length;e++)Tl(t[e])}}function md(e,t){return e(t)}function pd(){}var Ja=!1;function fd(e,t,r){if(Ja)return e(t,r);Ja=!0;try{return md(e,t,r)}finally{Ja=!1,(pr!==null||fr!==null)&&(pd(),hd())}}function os(e,t){var r=e.stateNode;if(r===null)return null;var s=La(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var Fi=!1;if(Zt)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{Fi=!1}function em(e,t,r,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var Yr=!1,sa=null,aa=!1,Ri=null,tm={onError:function(e){Yr=!0,sa=e}};function nm(e,t,r,s,a,i,o,l,c){Yr=!1,sa=null,em.apply(tm,arguments)}function rm(e,t,r,s,a,i,o,l,c){if(nm.apply(this,arguments),Yr){if(Yr){var d=sa;Yr=!1,sa=null}else throw Error(P(198));aa||(aa=!0,Ri=d)}}function Vn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Il(e){if(Vn(e)!==e)throw Error(P(188))}function sm(e){var t=e.alternate;if(!t){if(t=Vn(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Il(a),e;if(i===s)return Il(a),t;i=i.sibling}throw Error(P(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==s)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function yd(e){return e=sm(e),e!==null?xd(e):null}function xd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xd(e);if(t!==null)return t;e=e.sibling}return null}var vd=lt.unstable_scheduleCallback,Al=lt.unstable_cancelCallback,am=lt.unstable_shouldYield,im=lt.unstable_requestPaint,je=lt.unstable_now,om=lt.unstable_getCurrentPriorityLevel,Do=lt.unstable_ImmediatePriority,wd=lt.unstable_UserBlockingPriority,ia=lt.unstable_NormalPriority,lm=lt.unstable_LowPriority,bd=lt.unstable_IdlePriority,Aa=null,Rt=null;function cm(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Aa,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:hm,dm=Math.log,um=Math.LN2;function hm(e){return e>>>=0,e===0?32:31-(dm(e)/um|0)|0}var Ds=64,$s=4194304;function Gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oa(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=Gr(l):(i&=o,i!==0&&(s=Gr(i)))}else o=r&~a,o!==0?s=Gr(o):i!==0&&(s=Gr(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Tt(t),a=1<<r,s|=e[r],t&=~a;return s}function mm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pm(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Tt(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=mm(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Bi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kd(){var e=Ds;return Ds<<=1,!(Ds&4194240)&&(Ds=64),e}function Xa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function js(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=r}function fm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Tt(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function $o(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Tt(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var se=0;function jd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nd,Eo,Md,Sd,Cd,Oi=!1,Es=[],mn=null,pn=null,fn=null,ls=new Map,cs=new Map,ln=[],gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dl(e,t){switch(e){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":ls.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(t.pointerId)}}function zr(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ms(t),t!==null&&Eo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ym(e,t,r,s,a){switch(t){case"focusin":return mn=zr(mn,e,t,r,s,a),!0;case"dragenter":return pn=zr(pn,e,t,r,s,a),!0;case"mouseover":return fn=zr(fn,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return ls.set(i,zr(ls.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,cs.set(i,zr(cs.get(i)||null,e,t,r,s,a)),!0}return!1}function Td(e){var t=Ln(e.target);if(t!==null){var r=Vn(t);if(r!==null){if(t=r.tag,t===13){if(t=gd(r),t!==null){e.blockedOn=t,Cd(e.priority,function(){Md(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);_i=s,r.target.dispatchEvent(s),_i=null}else return t=Ms(r),t!==null&&Eo(t),e.blockedOn=r,!1;t.shift()}return!0}function $l(e,t,r){Vs(e)&&r.delete(t)}function xm(){Oi=!1,mn!==null&&Vs(mn)&&(mn=null),pn!==null&&Vs(pn)&&(pn=null),fn!==null&&Vs(fn)&&(fn=null),ls.forEach($l),cs.forEach($l)}function _r(e,t){e.blockedOn===t&&(e.blockedOn=null,Oi||(Oi=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,xm)))}function ds(e){function t(a){return _r(a,e)}if(0<Es.length){_r(Es[0],e);for(var r=1;r<Es.length;r++){var s=Es[r];s.blockedOn===e&&(s.blockedOn=null)}}for(mn!==null&&_r(mn,e),pn!==null&&_r(pn,e),fn!==null&&_r(fn,e),ls.forEach(t),cs.forEach(t),r=0;r<ln.length;r++)s=ln[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<ln.length&&(r=ln[0],r.blockedOn===null);)Td(r),r.blockedOn===null&&ln.shift()}var gr=tn.ReactCurrentBatchConfig,la=!0;function vm(e,t,r,s){var a=se,i=gr.transition;gr.transition=null;try{se=1,Lo(e,t,r,s)}finally{se=a,gr.transition=i}}function wm(e,t,r,s){var a=se,i=gr.transition;gr.transition=null;try{se=4,Lo(e,t,r,s)}finally{se=a,gr.transition=i}}function Lo(e,t,r,s){if(la){var a=Wi(e,t,r,s);if(a===null)ci(e,t,s,ca,r),Dl(e,s);else if(ym(a,e,t,r,s))s.stopPropagation();else if(Dl(e,s),t&4&&-1<gm.indexOf(e)){for(;a!==null;){var i=Ms(a);if(i!==null&&Nd(i),i=Wi(e,t,r,s),i===null&&ci(e,t,s,ca,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else ci(e,t,s,null,r)}}var ca=null;function Wi(e,t,r,s){if(ca=null,e=Ao(s),e=Ln(e),e!==null)if(t=Vn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ca=e,null}function Id(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(om()){case Do:return 1;case wd:return 4;case ia:case lm:return 16;case bd:return 536870912;default:return 16}default:return 16}}var dn=null,Po=null,Ys=null;function Ad(){if(Ys)return Ys;var e,t=Po,r=t.length,s,a="value"in dn?dn.value:dn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return Ys=a.slice(e,1<s?1-s:void 0)}function Qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ls(){return!0}function El(){return!1}function dt(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ls:El,this.isPropagationStopped=El,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),t}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=dt(Cr),Ns=ye({},Cr,{view:0,detail:0}),bm=dt(Ns),ei,ti,Hr,Da=ye({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hr&&(Hr&&e.type==="mousemove"?(ei=e.screenX-Hr.screenX,ti=e.screenY-Hr.screenY):ti=ei=0,Hr=e),ei)},movementY:function(e){return"movementY"in e?e.movementY:ti}}),Ll=dt(Da),km=ye({},Da,{dataTransfer:0}),jm=dt(km),Nm=ye({},Ns,{relatedTarget:0}),ni=dt(Nm),Mm=ye({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sm=dt(Mm),Cm=ye({},Cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tm=dt(Cm),Im=ye({},Cr,{data:0}),Pl=dt(Im),Am={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$m={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Em(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$m[e])?!!t[e]:!1}function _o(){return Em}var Lm=ye({},Ns,{key:function(e){if(e.key){var t=Am[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(e){return e.type==="keypress"?Qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pm=dt(Lm),zm=ye({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zl=dt(zm),_m=ye({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),Hm=dt(_m),Fm=ye({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rm=dt(Fm),Bm=ye({},Da,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Om=dt(Bm),Wm=[9,13,27,32],Ho=Zt&&"CompositionEvent"in window,Qr=null;Zt&&"documentMode"in document&&(Qr=document.documentMode);var Gm=Zt&&"TextEvent"in window&&!Qr,Dd=Zt&&(!Ho||Qr&&8<Qr&&11>=Qr),_l=" ",Hl=!1;function $d(e,t){switch(e){case"keyup":return Wm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function qm(e,t){switch(e){case"compositionend":return Ed(t);case"keypress":return t.which!==32?null:(Hl=!0,_l);case"textInput":return e=t.data,e===_l&&Hl?null:e;default:return null}}function Um(e,t){if(nr)return e==="compositionend"||!Ho&&$d(e,t)?(e=Ad(),Ys=Po=dn=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dd&&t.locale!=="ko"?null:t.data;default:return null}}var Vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vm[e.type]:t==="textarea"}function Ld(e,t,r,s){ud(s),t=da(t,"onChange"),0<t.length&&(r=new zo("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Kr=null,us=null;function Ym(e){qd(e,0)}function $a(e){var t=ar(e);if(sd(t))return e}function Qm(e,t){if(e==="change")return t}var Pd=!1;if(Zt){var ri;if(Zt){var si="oninput"in document;if(!si){var Rl=document.createElement("div");Rl.setAttribute("oninput","return;"),si=typeof Rl.oninput=="function"}ri=si}else ri=!1;Pd=ri&&(!document.documentMode||9<document.documentMode)}function Bl(){Kr&&(Kr.detachEvent("onpropertychange",zd),us=Kr=null)}function zd(e){if(e.propertyName==="value"&&$a(us)){var t=[];Ld(t,us,e,Ao(e)),fd(Ym,t)}}function Km(e,t,r){e==="focusin"?(Bl(),Kr=t,us=r,Kr.attachEvent("onpropertychange",zd)):e==="focusout"&&Bl()}function Zm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $a(us)}function Jm(e,t){if(e==="click")return $a(t)}function Xm(e,t){if(e==="input"||e==="change")return $a(t)}function ep(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:ep;function hs(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Mi.call(t,a)||!At(e[a],t[a]))return!1}return!0}function Ol(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wl(e,t){var r=Ol(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ol(r)}}function _d(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_d(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hd(){for(var e=window,t=ra();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ra(e.document)}return t}function Fo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tp(e){var t=Hd(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&_d(r.ownerDocument.documentElement,r)){if(s!==null&&Fo(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=Wl(r,i);var o=Wl(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var np=Zt&&"documentMode"in document&&11>=document.documentMode,rr=null,Gi=null,Zr=null,qi=!1;function Gl(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qi||rr==null||rr!==ra(s)||(s=rr,"selectionStart"in s&&Fo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Zr&&hs(Zr,s)||(Zr=s,s=da(Gi,"onSelect"),0<s.length&&(t=new zo("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=rr)))}function Ps(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var sr={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionend:Ps("Transition","TransitionEnd")},ai={},Fd={};Zt&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function Ea(e){if(ai[e])return ai[e];if(!sr[e])return e;var t=sr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fd)return ai[e]=t[r];return e}var Rd=Ea("animationend"),Bd=Ea("animationiteration"),Od=Ea("animationstart"),Wd=Ea("transitionend"),Gd=new Map,ql="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){Gd.set(e,t),Un(t,[e])}for(var ii=0;ii<ql.length;ii++){var oi=ql[ii],rp=oi.toLowerCase(),sp=oi[0].toUpperCase()+oi.slice(1);Sn(rp,"on"+sp)}Sn(Rd,"onAnimationEnd");Sn(Bd,"onAnimationIteration");Sn(Od,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(Wd,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Un("onBeforeInput",["compositionend","keypress","textInput","paste"]);Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ap=new Set("cancel close invalid load scroll toggle".split(" ").concat(qr));function Ul(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,rm(s,t,void 0,e),e.currentTarget=null}function qd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Ul(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Ul(a,l,d),i=c}}}if(aa)throw e=Ri,aa=!1,Ri=null,e}function ce(e,t){var r=t[Ki];r===void 0&&(r=t[Ki]=new Set);var s=e+"__bubble";r.has(s)||(Ud(t,e,2,!1),r.add(s))}function li(e,t,r){var s=0;t&&(s|=4),Ud(r,e,s,t)}var zs="_reactListening"+Math.random().toString(36).slice(2);function ms(e){if(!e[zs]){e[zs]=!0,Xc.forEach(function(r){r!=="selectionchange"&&(ap.has(r)||li(r,!1,e),li(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zs]||(t[zs]=!0,li("selectionchange",!1,t))}}function Ud(e,t,r,s){switch(Id(t)){case 1:var a=vm;break;case 4:a=wm;break;default:a=Lo}r=a.bind(null,t,r,e),a=void 0,!Fi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ci(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ln(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}fd(function(){var d=i,h=Ao(r),w=[];e:{var y=Gd.get(e);if(y!==void 0){var p=zo,g=e;switch(e){case"keypress":if(Qs(r)===0)break e;case"keydown":case"keyup":p=Pm;break;case"focusin":g="focus",p=ni;break;case"focusout":g="blur",p=ni;break;case"beforeblur":case"afterblur":p=ni;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=jm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Hm;break;case Rd:case Bd:case Od:p=Sm;break;case Wd:p=Rm;break;case"scroll":p=bm;break;case"wheel":p=Om;break;case"copy":case"cut":case"paste":p=Tm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=zl}var v=(t&4)!==0,S=!v&&e==="scroll",m=v?y!==null?y+"Capture":null:y;v=[];for(var x=d,b;x!==null;){b=x;var f=b.stateNode;if(b.tag===5&&f!==null&&(b=f,m!==null&&(f=os(x,m),f!=null&&v.push(ps(x,f,b)))),S)break;x=x.return}0<v.length&&(y=new p(y,g,null,r,h),w.push({event:y,listeners:v}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",y&&r!==_i&&(g=r.relatedTarget||r.fromElement)&&(Ln(g)||g[Jt]))break e;if((p||y)&&(y=h.window===h?h:(y=h.ownerDocument)?y.defaultView||y.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=d,g=g?Ln(g):null,g!==null&&(S=Vn(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=d),p!==g)){if(v=Ll,f="onMouseLeave",m="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=zl,f="onPointerLeave",m="onPointerEnter",x="pointer"),S=p==null?y:ar(p),b=g==null?y:ar(g),y=new v(f,x+"leave",p,r,h),y.target=S,y.relatedTarget=b,f=null,Ln(h)===d&&(v=new v(m,x+"enter",g,r,h),v.target=b,v.relatedTarget=S,f=v),S=f,p&&g)t:{for(v=p,m=g,x=0,b=v;b;b=Jn(b))x++;for(b=0,f=m;f;f=Jn(f))b++;for(;0<x-b;)v=Jn(v),x--;for(;0<b-x;)m=Jn(m),b--;for(;x--;){if(v===m||m!==null&&v===m.alternate)break t;v=Jn(v),m=Jn(m)}v=null}else v=null;p!==null&&Vl(w,y,p,v,!1),g!==null&&S!==null&&Vl(w,S,g,v,!0)}}e:{if(y=d?ar(d):window,p=y.nodeName&&y.nodeName.toLowerCase(),p==="select"||p==="input"&&y.type==="file")var k=Qm;else if(Fl(y))if(Pd)k=Xm;else{k=Zm;var T=Km}else(p=y.nodeName)&&p.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(k=Jm);if(k&&(k=k(e,d))){Ld(w,k,r,h);break e}T&&T(e,y,d),e==="focusout"&&(T=y._wrapperState)&&T.controlled&&y.type==="number"&&$i(y,"number",y.value)}switch(T=d?ar(d):window,e){case"focusin":(Fl(T)||T.contentEditable==="true")&&(rr=T,Gi=d,Zr=null);break;case"focusout":Zr=Gi=rr=null;break;case"mousedown":qi=!0;break;case"contextmenu":case"mouseup":case"dragend":qi=!1,Gl(w,r,h);break;case"selectionchange":if(np)break;case"keydown":case"keyup":Gl(w,r,h)}var M;if(Ho)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else nr?$d(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(Dd&&r.locale!=="ko"&&(nr||I!=="onCompositionStart"?I==="onCompositionEnd"&&nr&&(M=Ad()):(dn=h,Po="value"in dn?dn.value:dn.textContent,nr=!0)),T=da(d,I),0<T.length&&(I=new Pl(I,e,null,r,h),w.push({event:I,listeners:T}),M?I.data=M:(M=Ed(r),M!==null&&(I.data=M)))),(M=Gm?qm(e,r):Um(e,r))&&(d=da(d,"onBeforeInput"),0<d.length&&(h=new Pl("onBeforeInput","beforeinput",null,r,h),w.push({event:h,listeners:d}),h.data=M))}qd(w,t)})}function ps(e,t,r){return{instance:e,listener:t,currentTarget:r}}function da(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=os(e,r),i!=null&&s.unshift(ps(e,i,a)),i=os(e,t),i!=null&&s.push(ps(e,i,a))),e=e.return}return s}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vl(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=os(r,i),c!=null&&o.unshift(ps(r,c,l))):a||(c=os(r,i),c!=null&&o.push(ps(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var ip=/\r\n?/g,op=/\u0000|\uFFFD/g;function Yl(e){return(typeof e=="string"?e:""+e).replace(ip,`
`).replace(op,"")}function _s(e,t,r){if(t=Yl(t),Yl(e)!==t&&r)throw Error(P(425))}function ua(){}var Ui=null,Vi=null;function Yi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qi=typeof setTimeout=="function"?setTimeout:void 0,lp=typeof clearTimeout=="function"?clearTimeout:void 0,Ql=typeof Promise=="function"?Promise:void 0,cp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ql<"u"?function(e){return Ql.resolve(null).then(e).catch(dp)}:Qi;function dp(e){setTimeout(function(){throw e})}function di(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),ds(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);ds(t)}function gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Tr,fs="__reactProps$"+Tr,Jt="__reactContainer$"+Tr,Ki="__reactEvents$"+Tr,up="__reactListeners$"+Tr,hp="__reactHandles$"+Tr;function Ln(e){var t=e[Ft];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Jt]||r[Ft]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Kl(e);e!==null;){if(r=e[Ft])return r;e=Kl(e)}return t}e=r,r=e.parentNode}return null}function Ms(e){return e=e[Ft]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ar(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function La(e){return e[fs]||null}var Zi=[],ir=-1;function Cn(e){return{current:e}}function ue(e){0>ir||(e.current=Zi[ir],Zi[ir]=null,ir--)}function ie(e,t){ir++,Zi[ir]=e.current,e.current=t}var jn={},Ge=Cn(jn),et=Cn(!1),Bn=jn;function wr(e,t){var r=e.type.contextTypes;if(!r)return jn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function tt(e){return e=e.childContextTypes,e!=null}function ha(){ue(et),ue(Ge)}function Zl(e,t,r){if(Ge.current!==jn)throw Error(P(168));ie(Ge,t),ie(et,r)}function Vd(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(P(108,Kh(e)||"Unknown",a));return ye({},r,s)}function ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jn,Bn=Ge.current,ie(Ge,e),ie(et,et.current),!0}function Jl(e,t,r){var s=e.stateNode;if(!s)throw Error(P(169));r?(e=Vd(e,t,Bn),s.__reactInternalMemoizedMergedChildContext=e,ue(et),ue(Ge),ie(Ge,e)):ue(et),ie(et,r)}var Ut=null,Pa=!1,ui=!1;function Yd(e){Ut===null?Ut=[e]:Ut.push(e)}function mp(e){Pa=!0,Yd(e)}function Tn(){if(!ui&&Ut!==null){ui=!0;var e=0,t=se;try{var r=Ut;for(se=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Ut=null,Pa=!1}catch(a){throw Ut!==null&&(Ut=Ut.slice(e+1)),vd(Do,Tn),a}finally{se=t,ui=!1}}return null}var or=[],lr=0,pa=null,fa=0,ft=[],gt=0,On=null,Vt=1,Yt="";function An(e,t){or[lr++]=fa,or[lr++]=pa,pa=e,fa=t}function Qd(e,t,r){ft[gt++]=Vt,ft[gt++]=Yt,ft[gt++]=On,On=e;var s=Vt;e=Yt;var a=32-Tt(s)-1;s&=~(1<<a),r+=1;var i=32-Tt(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Vt=1<<32-Tt(t)+a|r<<a|s,Yt=i+e}else Vt=1<<i|r<<a|s,Yt=e}function Ro(e){e.return!==null&&(An(e,1),Qd(e,1,0))}function Bo(e){for(;e===pa;)pa=or[--lr],or[lr]=null,fa=or[--lr],or[lr]=null;for(;e===On;)On=ft[--gt],ft[gt]=null,Yt=ft[--gt],ft[gt]=null,Vt=ft[--gt],ft[gt]=null}var ot=null,it=null,he=!1,Ct=null;function Kd(e,t){var r=yt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Xl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,it=gn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=On!==null?{id:Vt,overflow:Yt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=yt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ot=e,it=null,!0):!1;default:return!1}}function Ji(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xi(e){if(he){var t=it;if(t){var r=t;if(!Xl(e,t)){if(Ji(e))throw Error(P(418));t=gn(r.nextSibling);var s=ot;t&&Xl(e,t)?Kd(s,r):(e.flags=e.flags&-4097|2,he=!1,ot=e)}}else{if(Ji(e))throw Error(P(418));e.flags=e.flags&-4097|2,he=!1,ot=e}}}function ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function Hs(e){if(e!==ot)return!1;if(!he)return ec(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yi(e.type,e.memoizedProps)),t&&(t=it)){if(Ji(e))throw Zd(),Error(P(418));for(;t;)Kd(e,t),t=gn(t.nextSibling)}if(ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){it=gn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}it=null}}else it=ot?gn(e.stateNode.nextSibling):null;return!0}function Zd(){for(var e=it;e;)e=gn(e.nextSibling)}function br(){it=ot=null,he=!1}function Oo(e){Ct===null?Ct=[e]:Ct.push(e)}var pp=tn.ReactCurrentBatchConfig;function Fr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var s=r.stateNode}if(!s)throw Error(P(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function Fs(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tc(e){var t=e._init;return t(e._payload)}function Jd(e){function t(m,x){if(e){var b=m.deletions;b===null?(m.deletions=[x],m.flags|=16):b.push(x)}}function r(m,x){if(!e)return null;for(;x!==null;)t(m,x),x=x.sibling;return null}function s(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function a(m,x){return m=wn(m,x),m.index=0,m.sibling=null,m}function i(m,x,b){return m.index=b,e?(b=m.alternate,b!==null?(b=b.index,b<x?(m.flags|=2,x):b):(m.flags|=2,x)):(m.flags|=1048576,x)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,x,b,f){return x===null||x.tag!==6?(x=xi(b,m.mode,f),x.return=m,x):(x=a(x,b),x.return=m,x)}function c(m,x,b,f){var k=b.type;return k===tr?h(m,x,b.props.children,f,b.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sn&&tc(k)===x.type)?(f=a(x,b.props),f.ref=Fr(m,x,b),f.return=m,f):(f=na(b.type,b.key,b.props,null,m.mode,f),f.ref=Fr(m,x,b),f.return=m,f)}function d(m,x,b,f){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=vi(b,m.mode,f),x.return=m,x):(x=a(x,b.children||[]),x.return=m,x)}function h(m,x,b,f,k){return x===null||x.tag!==7?(x=Fn(b,m.mode,f,k),x.return=m,x):(x=a(x,b),x.return=m,x)}function w(m,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=xi(""+x,m.mode,b),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ts:return b=na(x.type,x.key,x.props,null,m.mode,b),b.ref=Fr(m,null,x),b.return=m,b;case er:return x=vi(x,m.mode,b),x.return=m,x;case sn:var f=x._init;return w(m,f(x._payload),b)}if(Wr(x)||Lr(x))return x=Fn(x,m.mode,b,null),x.return=m,x;Fs(m,x)}return null}function y(m,x,b,f){var k=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:l(m,x,""+b,f);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ts:return b.key===k?c(m,x,b,f):null;case er:return b.key===k?d(m,x,b,f):null;case sn:return k=b._init,y(m,x,k(b._payload),f)}if(Wr(b)||Lr(b))return k!==null?null:h(m,x,b,f,null);Fs(m,b)}return null}function p(m,x,b,f,k){if(typeof f=="string"&&f!==""||typeof f=="number")return m=m.get(b)||null,l(x,m,""+f,k);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ts:return m=m.get(f.key===null?b:f.key)||null,c(x,m,f,k);case er:return m=m.get(f.key===null?b:f.key)||null,d(x,m,f,k);case sn:var T=f._init;return p(m,x,b,T(f._payload),k)}if(Wr(f)||Lr(f))return m=m.get(b)||null,h(x,m,f,k,null);Fs(x,f)}return null}function g(m,x,b,f){for(var k=null,T=null,M=x,I=x=0,O=null;M!==null&&I<b.length;I++){M.index>I?(O=M,M=null):O=M.sibling;var H=y(m,M,b[I],f);if(H===null){M===null&&(M=O);break}e&&M&&H.alternate===null&&t(m,M),x=i(H,x,I),T===null?k=H:T.sibling=H,T=H,M=O}if(I===b.length)return r(m,M),he&&An(m,I),k;if(M===null){for(;I<b.length;I++)M=w(m,b[I],f),M!==null&&(x=i(M,x,I),T===null?k=M:T.sibling=M,T=M);return he&&An(m,I),k}for(M=s(m,M);I<b.length;I++)O=p(M,m,I,b[I],f),O!==null&&(e&&O.alternate!==null&&M.delete(O.key===null?I:O.key),x=i(O,x,I),T===null?k=O:T.sibling=O,T=O);return e&&M.forEach(function(N){return t(m,N)}),he&&An(m,I),k}function v(m,x,b,f){var k=Lr(b);if(typeof k!="function")throw Error(P(150));if(b=k.call(b),b==null)throw Error(P(151));for(var T=k=null,M=x,I=x=0,O=null,H=b.next();M!==null&&!H.done;I++,H=b.next()){M.index>I?(O=M,M=null):O=M.sibling;var N=y(m,M,H.value,f);if(N===null){M===null&&(M=O);break}e&&M&&N.alternate===null&&t(m,M),x=i(N,x,I),T===null?k=N:T.sibling=N,T=N,M=O}if(H.done)return r(m,M),he&&An(m,I),k;if(M===null){for(;!H.done;I++,H=b.next())H=w(m,H.value,f),H!==null&&(x=i(H,x,I),T===null?k=H:T.sibling=H,T=H);return he&&An(m,I),k}for(M=s(m,M);!H.done;I++,H=b.next())H=p(M,m,I,H.value,f),H!==null&&(e&&H.alternate!==null&&M.delete(H.key===null?I:H.key),x=i(H,x,I),T===null?k=H:T.sibling=H,T=H);return e&&M.forEach(function(D){return t(m,D)}),he&&An(m,I),k}function S(m,x,b,f){if(typeof b=="object"&&b!==null&&b.type===tr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ts:e:{for(var k=b.key,T=x;T!==null;){if(T.key===k){if(k=b.type,k===tr){if(T.tag===7){r(m,T.sibling),x=a(T,b.props.children),x.return=m,m=x;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sn&&tc(k)===T.type){r(m,T.sibling),x=a(T,b.props),x.ref=Fr(m,T,b),x.return=m,m=x;break e}r(m,T);break}else t(m,T);T=T.sibling}b.type===tr?(x=Fn(b.props.children,m.mode,f,b.key),x.return=m,m=x):(f=na(b.type,b.key,b.props,null,m.mode,f),f.ref=Fr(m,x,b),f.return=m,m=f)}return o(m);case er:e:{for(T=b.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(m,x.sibling),x=a(x,b.children||[]),x.return=m,m=x;break e}else{r(m,x);break}else t(m,x);x=x.sibling}x=vi(b,m.mode,f),x.return=m,m=x}return o(m);case sn:return T=b._init,S(m,x,T(b._payload),f)}if(Wr(b))return g(m,x,b,f);if(Lr(b))return v(m,x,b,f);Fs(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(m,x.sibling),x=a(x,b),x.return=m,m=x):(r(m,x),x=xi(b,m.mode,f),x.return=m,m=x),o(m)):r(m,x)}return S}var kr=Jd(!0),Xd=Jd(!1),ga=Cn(null),ya=null,cr=null,Wo=null;function Go(){Wo=cr=ya=null}function qo(e){var t=ga.current;ue(ga),e._currentValue=t}function eo(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function yr(e,t){ya=e,Wo=cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xe=!0),e.firstContext=null)}function vt(e){var t=e._currentValue;if(Wo!==e)if(e={context:e,memoizedValue:t,next:null},cr===null){if(ya===null)throw Error(P(308));cr=e,ya.dependencies={lanes:0,firstContext:e}}else cr=cr.next=e;return t}var Pn=null;function Uo(e){Pn===null?Pn=[e]:Pn.push(e)}function eu(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Uo(t)):(r.next=a.next,a.next=r),t.interleaved=r,Xt(e,s)}function Xt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var an=!1;function Vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yn(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ee&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Xt(e,r)}return a=s.interleaved,a===null?(t.next=t,Uo(s)):(t.next=a.next,a.next=t),s.interleaved=t,Xt(e,r)}function Ks(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,$o(e,r)}}function nc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function xa(e,t,r,s){var a=e.updateQueue;an=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var w=a.baseState;o=0,h=d=c=null,l=i;do{var y=l.lane,p=l.eventTime;if((s&y)===y){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(y=t,p=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){w=g.call(p,w,y);break e}w=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,y=typeof g=="function"?g.call(p,w,y):g,y==null)break e;w=ye({},w,y);break e;case 2:an=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[l]:y.push(l))}else p={eventTime:p,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=w):h=h.next=p,o|=y;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;y=l,l=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(h===null&&(c=w),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Gn|=o,e.lanes=o,e.memoizedState=w}}function rc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(P(191,a));a.call(s)}}}var Ss={},Bt=Cn(Ss),gs=Cn(Ss),ys=Cn(Ss);function zn(e){if(e===Ss)throw Error(P(174));return e}function Yo(e,t){switch(ie(ys,t),ie(gs,e),ie(Bt,Ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Li(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Li(t,e)}ue(Bt),ie(Bt,t)}function jr(){ue(Bt),ue(gs),ue(ys)}function nu(e){zn(ys.current);var t=zn(Bt.current),r=Li(t,e.type);t!==r&&(ie(gs,e),ie(Bt,r))}function Qo(e){gs.current===e&&(ue(Bt),ue(gs))}var fe=Cn(0);function va(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hi=[];function Ko(){for(var e=0;e<hi.length;e++)hi[e]._workInProgressVersionPrimary=null;hi.length=0}var Zs=tn.ReactCurrentDispatcher,mi=tn.ReactCurrentBatchConfig,Wn=0,ge=null,Te=null,Ee=null,wa=!1,Jr=!1,xs=0,fp=0;function Be(){throw Error(P(321))}function Zo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!At(e[r],t[r]))return!1;return!0}function Jo(e,t,r,s,a,i){if(Wn=i,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zs.current=e===null||e.memoizedState===null?vp:wp,e=r(s,a),Jr){i=0;do{if(Jr=!1,xs=0,25<=i)throw Error(P(301));i+=1,Ee=Te=null,t.updateQueue=null,Zs.current=bp,e=r(s,a)}while(Jr)}if(Zs.current=ba,t=Te!==null&&Te.next!==null,Wn=0,Ee=Te=ge=null,wa=!1,t)throw Error(P(300));return e}function Xo(){var e=xs!==0;return xs=0,e}function Ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ge.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function wt(){if(Te===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Ee===null?ge.memoizedState:Ee.next;if(t!==null)Ee=t,Te=e;else{if(e===null)throw Error(P(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ee===null?ge.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function vs(e,t){return typeof t=="function"?t(e):t}function pi(e){var t=wt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var s=Te,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Wn&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var w={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=w,o=s):c=c.next=w,ge.lanes|=h,Gn|=h}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,At(s,t.memoizedState)||(Xe=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ge.lanes|=i,Gn|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fi(e){var t=wt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);At(i,t.memoizedState)||(Xe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function ru(){}function su(e,t){var r=ge,s=wt(),a=t(),i=!At(s.memoizedState,a);if(i&&(s.memoizedState=a,Xe=!0),s=s.queue,el(ou.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||Ee!==null&&Ee.memoizedState.tag&1){if(r.flags|=2048,ws(9,iu.bind(null,r,s,a,t),void 0,null),Le===null)throw Error(P(349));Wn&30||au(r,t,a)}return a}function au(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function iu(e,t,r,s){t.value=r,t.getSnapshot=s,lu(t)&&cu(e)}function ou(e,t,r){return r(function(){lu(t)&&cu(e)})}function lu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!At(e,r)}catch{return!0}}function cu(e){var t=Xt(e,1);t!==null&&It(t,e,1,-1)}function sc(e){var t=Ht();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t.queue=e,e=e.dispatch=xp.bind(null,ge,e),[t.memoizedState,e]}function ws(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function du(){return wt().memoizedState}function Js(e,t,r,s){var a=Ht();ge.flags|=e,a.memoizedState=ws(1|t,r,void 0,s===void 0?null:s)}function za(e,t,r,s){var a=wt();s=s===void 0?null:s;var i=void 0;if(Te!==null){var o=Te.memoizedState;if(i=o.destroy,s!==null&&Zo(s,o.deps)){a.memoizedState=ws(t,r,i,s);return}}ge.flags|=e,a.memoizedState=ws(1|t,r,i,s)}function ac(e,t){return Js(8390656,8,e,t)}function el(e,t){return za(2048,8,e,t)}function uu(e,t){return za(4,2,e,t)}function hu(e,t){return za(4,4,e,t)}function mu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pu(e,t,r){return r=r!=null?r.concat([e]):null,za(4,4,mu.bind(null,t,e),r)}function tl(){}function fu(e,t){var r=wt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Zo(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function gu(e,t){var r=wt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Zo(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function yu(e,t,r){return Wn&21?(At(r,t)||(r=kd(),ge.lanes|=r,Gn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xe=!0),e.memoizedState=r)}function gp(e,t){var r=se;se=r!==0&&4>r?r:4,e(!0);var s=mi.transition;mi.transition={};try{e(!1),t()}finally{se=r,mi.transition=s}}function xu(){return wt().memoizedState}function yp(e,t,r){var s=vn(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},vu(e))wu(t,r);else if(r=eu(e,t,r,s),r!==null){var a=Ue();It(r,e,s,a),bu(r,t,s)}}function xp(e,t,r){var s=vn(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(vu(e))wu(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,At(l,o)){var c=t.interleaved;c===null?(a.next=a,Uo(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=eu(e,t,a,s),r!==null&&(a=Ue(),It(r,e,s,a),bu(r,t,s))}}function vu(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function wu(e,t){Jr=wa=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function bu(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,$o(e,r)}}var ba={readContext:vt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},vp={readContext:vt,useCallback:function(e,t){return Ht().memoizedState=[e,t===void 0?null:t],e},useContext:vt,useEffect:ac,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Js(4194308,4,mu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){return Js(4,2,e,t)},useMemo:function(e,t){var r=Ht();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Ht();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=yp.bind(null,ge,e),[s.memoizedState,e]},useRef:function(e){var t=Ht();return e={current:e},t.memoizedState=e},useState:sc,useDebugValue:tl,useDeferredValue:function(e){return Ht().memoizedState=e},useTransition:function(){var e=sc(!1),t=e[0];return e=gp.bind(null,e[1]),Ht().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ge,a=Ht();if(he){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),Le===null)throw Error(P(349));Wn&30||au(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,ac(ou.bind(null,s,i,e),[e]),s.flags|=2048,ws(9,iu.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=Ht(),t=Le.identifierPrefix;if(he){var r=Yt,s=Vt;r=(s&~(1<<32-Tt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=xs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=fp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wp={readContext:vt,useCallback:fu,useContext:vt,useEffect:el,useImperativeHandle:pu,useInsertionEffect:uu,useLayoutEffect:hu,useMemo:gu,useReducer:pi,useRef:du,useState:function(){return pi(vs)},useDebugValue:tl,useDeferredValue:function(e){var t=wt();return yu(t,Te.memoizedState,e)},useTransition:function(){var e=pi(vs)[0],t=wt().memoizedState;return[e,t]},useMutableSource:ru,useSyncExternalStore:su,useId:xu,unstable_isNewReconciler:!1},bp={readContext:vt,useCallback:fu,useContext:vt,useEffect:el,useImperativeHandle:pu,useInsertionEffect:uu,useLayoutEffect:hu,useMemo:gu,useReducer:fi,useRef:du,useState:function(){return fi(vs)},useDebugValue:tl,useDeferredValue:function(e){var t=wt();return Te===null?t.memoizedState=e:yu(t,Te.memoizedState,e)},useTransition:function(){var e=fi(vs)[0],t=wt().memoizedState;return[e,t]},useMutableSource:ru,useSyncExternalStore:su,useId:xu,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function to(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:ye({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _a={isMounted:function(e){return(e=e._reactInternals)?Vn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ue(),a=vn(e),i=Kt(s,a);i.payload=t,r!=null&&(i.callback=r),t=yn(e,i,a),t!==null&&(It(t,e,a,s),Ks(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ue(),a=vn(e),i=Kt(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=yn(e,i,a),t!==null&&(It(t,e,a,s),Ks(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ue(),s=vn(e),a=Kt(r,s);a.tag=2,t!=null&&(a.callback=t),t=yn(e,a,s),t!==null&&(It(t,e,s,r),Ks(t,e,s))}};function ic(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!hs(r,s)||!hs(a,i):!0}function ku(e,t,r){var s=!1,a=jn,i=t.contextType;return typeof i=="object"&&i!==null?i=vt(i):(a=tt(t)?Bn:Ge.current,s=t.contextTypes,i=(s=s!=null)?wr(e,a):jn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_a,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function oc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&_a.enqueueReplaceState(t,t.state,null)}function no(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Vo(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=vt(i):(i=tt(t)?Bn:Ge.current,a.context=wr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(to(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&_a.enqueueReplaceState(a,a.state,null),xa(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Nr(e,t){try{var r="",s=t;do r+=Qh(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function gi(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ro(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var kp=typeof WeakMap=="function"?WeakMap:Map;function ju(e,t,r){r=Kt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ja||(ja=!0,po=s),ro(e,t)},r}function Nu(e,t,r){r=Kt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){ro(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ro(e,t),typeof s!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function lc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new kp;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=zp.bind(null,e,t,r),t.then(e,e))}function cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dc(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Kt(-1,1),t.tag=2,yn(r,t,1))),r.lanes|=1),e)}var jp=tn.ReactCurrentOwner,Xe=!1;function qe(e,t,r,s){t.child=e===null?Xd(t,null,r,s):kr(t,e.child,r,s)}function uc(e,t,r,s,a){r=r.render;var i=t.ref;return yr(t,a),s=Jo(e,t,r,s,i,a),r=Xo(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,en(e,t,a)):(he&&r&&Ro(t),t.flags|=1,qe(e,t,s,a),t.child)}function hc(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!cl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Mu(e,t,i,s,a)):(e=na(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:hs,r(o,s)&&e.ref===t.ref)return en(e,t,a)}return t.flags|=1,e=wn(i,s),e.ref=t.ref,e.return=t,t.child=e}function Mu(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(hs(i,s)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Xe=!0);else return t.lanes=e.lanes,en(e,t,a)}return so(e,t,r,s,a)}function Su(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(ur,at),at|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(ur,at),at|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,ie(ur,at),at|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,ie(ur,at),at|=s;return qe(e,t,a,r),t.child}function Cu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function so(e,t,r,s,a){var i=tt(r)?Bn:Ge.current;return i=wr(t,i),yr(t,a),r=Jo(e,t,r,s,i,a),s=Xo(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,en(e,t,a)):(he&&s&&Ro(t),t.flags|=1,qe(e,t,r,a),t.child)}function mc(e,t,r,s,a){if(tt(r)){var i=!0;ma(t)}else i=!1;if(yr(t,a),t.stateNode===null)Xs(e,t),ku(t,r,s),no(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=vt(d):(d=tt(r)?Bn:Ge.current,d=wr(t,d));var h=r.getDerivedStateFromProps,w=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";w||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&oc(t,o,s,d),an=!1;var y=t.memoizedState;o.state=y,xa(t,s,o,a),c=t.memoizedState,l!==s||y!==c||et.current||an?(typeof h=="function"&&(to(t,r,h,s),c=t.memoizedState),(l=an||ic(t,r,l,s,y,c,d))?(w||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,tu(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Mt(t.type,l),o.props=d,w=t.pendingProps,y=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=vt(c):(c=tt(r)?Bn:Ge.current,c=wr(t,c));var p=r.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==w||y!==c)&&oc(t,o,s,c),an=!1,y=t.memoizedState,o.state=y,xa(t,s,o,a);var g=t.memoizedState;l!==w||y!==g||et.current||an?(typeof p=="function"&&(to(t,r,p,s),g=t.memoizedState),(d=an||ic(t,r,d,s,y,g,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),o.props=s,o.state=g,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),s=!1)}return ao(e,t,r,s,i,a)}function ao(e,t,r,s,a,i){Cu(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&Jl(t,r,!1),en(e,t,i);s=t.stateNode,jp.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=kr(t,e.child,null,i),t.child=kr(t,null,l,i)):qe(e,t,l,i),t.memoizedState=s.state,a&&Jl(t,r,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Zl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zl(e,t.context,!1),Yo(e,t.containerInfo)}function pc(e,t,r,s,a){return br(),Oo(a),t.flags|=256,qe(e,t,r,s),t.child}var io={dehydrated:null,treeContext:null,retryLane:0};function oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Iu(e,t,r){var s=t.pendingProps,a=fe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ie(fe,a&1),e===null)return Xi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ra(o,s,0,null),e=Fn(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=oo(r),t.memoizedState=io,e):nl(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Np(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=wn(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=wn(l,i):(i=Fn(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?oo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=io,s}return i=e.child,e=i.sibling,s=wn(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function nl(e,t){return t=Ra({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Rs(e,t,r,s){return s!==null&&Oo(s),kr(t,e.child,null,r),e=nl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Np(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=gi(Error(P(422))),Rs(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Ra({mode:"visible",children:s.children},a,0,null),i=Fn(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&kr(t,e.child,null,o),t.child.memoizedState=oo(o),t.memoizedState=io,i);if(!(t.mode&1))return Rs(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(P(419)),s=gi(i,s,void 0),Rs(e,t,o,s)}if(l=(o&e.childLanes)!==0,Xe||l){if(s=Le,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Xt(e,a),It(s,e,a,-1))}return ll(),s=gi(Error(P(421))),Rs(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=_p.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,it=gn(a.nextSibling),ot=t,he=!0,Ct=null,e!==null&&(ft[gt++]=Vt,ft[gt++]=Yt,ft[gt++]=On,Vt=e.id,Yt=e.overflow,On=t),t=nl(t,s.children),t.flags|=4096,t)}function fc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),eo(e.return,t,r)}function yi(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function Au(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(qe(e,t,s.children,r),s=fe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fc(e,r,t);else if(e.tag===19)fc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ie(fe,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&va(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),yi(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&va(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}yi(t,!0,r,null,i);break;case"together":yi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function en(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Gn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=wn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Mp(e,t,r){switch(t.tag){case 3:Tu(t),br();break;case 5:nu(t);break;case 1:tt(t.type)&&ma(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ie(ga,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ie(fe,fe.current&1),t.flags|=128,null):r&t.child.childLanes?Iu(e,t,r):(ie(fe,fe.current&1),e=en(e,t,r),e!==null?e.sibling:null);ie(fe,fe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Au(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ie(fe,fe.current),s)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,r)}return en(e,t,r)}var Du,lo,$u,Eu;Du=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lo=function(){};$u=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,zn(Bt.current);var i=null;switch(r){case"input":a=Ai(e,a),s=Ai(e,s),i=[];break;case"select":a=ye({},a,{value:void 0}),s=ye({},s,{value:void 0}),i=[];break;case"textarea":a=Ei(e,a),s=Ei(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ua)}Pi(r,s);var o;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(as.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(as.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ce("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Eu=function(e,t,r,s){r!==s&&(t.flags|=4)};function Rr(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Sp(e,t,r){var s=t.pendingProps;switch(Bo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return tt(t.type)&&ha(),Oe(t),null;case 3:return s=t.stateNode,jr(),ue(et),ue(Ge),Ko(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Hs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ct!==null&&(yo(Ct),Ct=null))),lo(e,t),Oe(t),null;case 5:Qo(t);var a=zn(ys.current);if(r=t.type,e!==null&&t.stateNode!=null)$u(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(P(166));return Oe(t),null}if(e=zn(Bt.current),Hs(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[Ft]=t,s[fs]=i,e=(t.mode&1)!==0,r){case"dialog":ce("cancel",s),ce("close",s);break;case"iframe":case"object":case"embed":ce("load",s);break;case"video":case"audio":for(a=0;a<qr.length;a++)ce(qr[a],s);break;case"source":ce("error",s);break;case"img":case"image":case"link":ce("error",s),ce("load",s);break;case"details":ce("toggle",s);break;case"input":Nl(s,i),ce("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ce("invalid",s);break;case"textarea":Sl(s,i),ce("invalid",s)}Pi(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&_s(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&_s(s.textContent,l,e),a=["children",""+l]):as.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ce("scroll",s)}switch(r){case"input":Is(s),Ml(s,i,!0);break;case"textarea":Is(s),Cl(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ua)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=od(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[Ft]=t,e[fs]=s,Du(e,t,!1,!1),t.stateNode=e;e:{switch(o=zi(r,s),r){case"dialog":ce("cancel",e),ce("close",e),a=s;break;case"iframe":case"object":case"embed":ce("load",e),a=s;break;case"video":case"audio":for(a=0;a<qr.length;a++)ce(qr[a],e);a=s;break;case"source":ce("error",e),a=s;break;case"img":case"image":case"link":ce("error",e),ce("load",e),a=s;break;case"details":ce("toggle",e),a=s;break;case"input":Nl(e,s),a=Ai(e,s),ce("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=ye({},s,{value:void 0}),ce("invalid",e);break;case"textarea":Sl(e,s),a=Ei(e,s),ce("invalid",e);break;default:a=s}Pi(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?dd(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ld(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&is(e,c):typeof c=="number"&&is(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(as.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ce("scroll",e):c!=null&&So(e,i,c,o))}switch(r){case"input":Is(e),Ml(e,s,!1);break;case"textarea":Is(e),Cl(e);break;case"option":s.value!=null&&e.setAttribute("value",""+kn(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?mr(e,!!s.multiple,i,!1):s.defaultValue!=null&&mr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ua)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)Eu(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(P(166));if(r=zn(ys.current),zn(Bt.current),Hs(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ft]=t,(i=s.nodeValue!==r)&&(e=ot,e!==null))switch(e.tag){case 3:_s(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_s(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ft]=t,t.stateNode=s}return Oe(t),null;case 13:if(ue(fe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&it!==null&&t.mode&1&&!(t.flags&128))Zd(),br(),t.flags|=98560,i=!1;else if(i=Hs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[Ft]=t}else br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),i=!1}else Ct!==null&&(yo(Ct),Ct=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?Ae===0&&(Ae=3):ll())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return jr(),lo(e,t),e===null&&ms(t.stateNode.containerInfo),Oe(t),null;case 10:return qo(t.type._context),Oe(t),null;case 17:return tt(t.type)&&ha(),Oe(t),null;case 19:if(ue(fe),i=t.memoizedState,i===null)return Oe(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Rr(i,!1);else{if(Ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=va(e),o!==null){for(t.flags|=128,Rr(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ie(fe,fe.current&1|2),t.child}e=e.sibling}i.tail!==null&&je()>Mr&&(t.flags|=128,s=!0,Rr(i,!1),t.lanes=4194304)}else{if(!s)if(e=va(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Rr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!he)return Oe(t),null}else 2*je()-i.renderingStartTime>Mr&&r!==1073741824&&(t.flags|=128,s=!0,Rr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=je(),t.sibling=null,r=fe.current,ie(fe,s?r&1|2:r&1),t):(Oe(t),null);case 22:case 23:return ol(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?at&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Cp(e,t){switch(Bo(t),t.tag){case 1:return tt(t.type)&&ha(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jr(),ue(et),ue(Ge),Ko(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qo(t),null;case 13:if(ue(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(fe),null;case 4:return jr(),null;case 10:return qo(t.type._context),null;case 22:case 23:return ol(),null;case 24:return null;default:return null}}var Bs=!1,We=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,R=null;function dr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ve(e,t,s)}else r.current=null}function co(e,t,r){try{r()}catch(s){ve(e,t,s)}}var gc=!1;function Ip(e,t){if(Ui=la,e=Hd(),Fo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,h=0,w=e,y=null;t:for(;;){for(var p;w!==r||a!==0&&w.nodeType!==3||(l=o+a),w!==i||s!==0&&w.nodeType!==3||(c=o+s),w.nodeType===3&&(o+=w.nodeValue.length),(p=w.firstChild)!==null;)y=w,w=p;for(;;){if(w===e)break t;if(y===r&&++d===a&&(l=o),y===i&&++h===s&&(c=o),(p=w.nextSibling)!==null)break;w=y,y=w.parentNode}w=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vi={focusedElem:e,selectionRange:r},la=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,S=g.memoizedState,m=t.stateNode,x=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:Mt(t.type,v),S);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(f){ve(t,t.return,f)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return g=gc,gc=!1,g}function Xr(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&co(t,r,i)}a=a.next}while(a!==s)}}function Ha(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function uo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Lu(e){var t=e.alternate;t!==null&&(e.alternate=null,Lu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ft],delete t[fs],delete t[Ki],delete t[up],delete t[hp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Pu(e){return e.tag===5||e.tag===3||e.tag===4}function yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ho(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ua));else if(s!==4&&(e=e.child,e!==null))for(ho(e,t,r),e=e.sibling;e!==null;)ho(e,t,r),e=e.sibling}function mo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(mo(e,t,r),e=e.sibling;e!==null;)mo(e,t,r),e=e.sibling}var _e=null,St=!1;function rn(e,t,r){for(r=r.child;r!==null;)zu(e,t,r),r=r.sibling}function zu(e,t,r){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Aa,r)}catch{}switch(r.tag){case 5:We||dr(r,t);case 6:var s=_e,a=St;_e=null,rn(e,t,r),_e=s,St=a,_e!==null&&(St?(e=_e,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_e.removeChild(r.stateNode));break;case 18:_e!==null&&(St?(e=_e,r=r.stateNode,e.nodeType===8?di(e.parentNode,r):e.nodeType===1&&di(e,r),ds(e)):di(_e,r.stateNode));break;case 4:s=_e,a=St,_e=r.stateNode.containerInfo,St=!0,rn(e,t,r),_e=s,St=a;break;case 0:case 11:case 14:case 15:if(!We&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&co(r,t,o),a=a.next}while(a!==s)}rn(e,t,r);break;case 1:if(!We&&(dr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){ve(r,t,l)}rn(e,t,r);break;case 21:rn(e,t,r);break;case 22:r.mode&1?(We=(s=We)||r.memoizedState!==null,rn(e,t,r),We=s):rn(e,t,r);break;default:rn(e,t,r)}}function xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Tp),t.forEach(function(s){var a=Hp.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Nt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:_e=l.stateNode,St=!1;break e;case 3:_e=l.stateNode.containerInfo,St=!0;break e;case 4:_e=l.stateNode.containerInfo,St=!0;break e}l=l.return}if(_e===null)throw Error(P(160));zu(i,o,a),_e=null,St=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){ve(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_u(t,e),t=t.sibling}function _u(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nt(t,e),zt(e),s&4){try{Xr(3,e,e.return),Ha(3,e)}catch(v){ve(e,e.return,v)}try{Xr(5,e,e.return)}catch(v){ve(e,e.return,v)}}break;case 1:Nt(t,e),zt(e),s&512&&r!==null&&dr(r,r.return);break;case 5:if(Nt(t,e),zt(e),s&512&&r!==null&&dr(r,r.return),e.flags&32){var a=e.stateNode;try{is(a,"")}catch(v){ve(e,e.return,v)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ad(a,i),zi(l,o);var d=zi(l,i);for(o=0;o<c.length;o+=2){var h=c[o],w=c[o+1];h==="style"?dd(a,w):h==="dangerouslySetInnerHTML"?ld(a,w):h==="children"?is(a,w):So(a,h,w,d)}switch(l){case"input":Di(a,i);break;case"textarea":id(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?mr(a,!!i.multiple,p,!1):y!==!!i.multiple&&(i.defaultValue!=null?mr(a,!!i.multiple,i.defaultValue,!0):mr(a,!!i.multiple,i.multiple?[]:"",!1))}a[fs]=i}catch(v){ve(e,e.return,v)}}break;case 6:if(Nt(t,e),zt(e),s&4){if(e.stateNode===null)throw Error(P(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){ve(e,e.return,v)}}break;case 3:if(Nt(t,e),zt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{ds(t.containerInfo)}catch(v){ve(e,e.return,v)}break;case 4:Nt(t,e),zt(e);break;case 13:Nt(t,e),zt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(al=je())),s&4&&xc(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(We=(d=We)||h,Nt(t,e),We=d):Nt(t,e),zt(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(R=e,h=e.child;h!==null;){for(w=R=h;R!==null;){switch(y=R,p=y.child,y.tag){case 0:case 11:case 14:case 15:Xr(4,y,y.return);break;case 1:dr(y,y.return);var g=y.stateNode;if(typeof g.componentWillUnmount=="function"){s=y,r=y.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){ve(s,r,v)}}break;case 5:dr(y,y.return);break;case 22:if(y.memoizedState!==null){wc(w);continue}}p!==null?(p.return=y,R=p):wc(w)}h=h.sibling}e:for(h=null,w=e;;){if(w.tag===5){if(h===null){h=w;try{a=w.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=w.stateNode,c=w.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cd("display",o))}catch(v){ve(e,e.return,v)}}}else if(w.tag===6){if(h===null)try{w.stateNode.nodeValue=d?"":w.memoizedProps}catch(v){ve(e,e.return,v)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;h===w&&(h=null),w=w.return}h===w&&(h=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Nt(t,e),zt(e),s&4&&xc(e);break;case 21:break;default:Nt(t,e),zt(e)}}function zt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Pu(r)){var s=r;break e}r=r.return}throw Error(P(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(is(a,""),s.flags&=-33);var i=yc(e);mo(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=yc(e);ho(e,l,o);break;default:throw Error(P(161))}}catch(c){ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ap(e,t,r){R=e,Hu(e)}function Hu(e,t,r){for(var s=(e.mode&1)!==0;R!==null;){var a=R,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Bs;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||We;l=Bs;var d=We;if(Bs=o,(We=c)&&!d)for(R=a;R!==null;)o=R,c=o.child,o.tag===22&&o.memoizedState!==null?bc(a):c!==null?(c.return=o,R=c):bc(a);for(;i!==null;)R=i,Hu(i),i=i.sibling;R=a,Bs=l,We=d}vc(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,R=i):vc(e)}}function vc(e){for(;R!==null;){var t=R;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:We||Ha(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!We)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Mt(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&rc(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}rc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var w=h.dehydrated;w!==null&&ds(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}We||t.flags&512&&uo(t)}catch(y){ve(t,t.return,y)}}if(t===e){R=null;break}if(r=t.sibling,r!==null){r.return=t.return,R=r;break}R=t.return}}function wc(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var r=t.sibling;if(r!==null){r.return=t.return,R=r;break}R=t.return}}function bc(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ha(4,t)}catch(c){ve(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){ve(t,a,c)}}var i=t.return;try{uo(t)}catch(c){ve(t,i,c)}break;case 5:var o=t.return;try{uo(t)}catch(c){ve(t,o,c)}}}catch(c){ve(t,t.return,c)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var Dp=Math.ceil,ka=tn.ReactCurrentDispatcher,rl=tn.ReactCurrentOwner,xt=tn.ReactCurrentBatchConfig,ee=0,Le=null,Ce=null,He=0,at=0,ur=Cn(0),Ae=0,bs=null,Gn=0,Fa=0,sl=0,es=null,Je=null,al=0,Mr=1/0,qt=null,ja=!1,po=null,xn=null,Os=!1,un=null,Na=0,ts=0,fo=null,ea=-1,ta=0;function Ue(){return ee&6?je():ea!==-1?ea:ea=je()}function vn(e){return e.mode&1?ee&2&&He!==0?He&-He:pp.transition!==null?(ta===0&&(ta=kd()),ta):(e=se,e!==0||(e=window.event,e=e===void 0?16:Id(e.type)),e):1}function It(e,t,r,s){if(50<ts)throw ts=0,fo=null,Error(P(185));js(e,r,s),(!(ee&2)||e!==Le)&&(e===Le&&(!(ee&2)&&(Fa|=r),Ae===4&&cn(e,He)),nt(e,s),r===1&&ee===0&&!(t.mode&1)&&(Mr=je()+500,Pa&&Tn()))}function nt(e,t){var r=e.callbackNode;pm(e,t);var s=oa(e,e===Le?He:0);if(s===0)r!==null&&Al(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Al(r),t===1)e.tag===0?mp(kc.bind(null,e)):Yd(kc.bind(null,e)),cp(function(){!(ee&6)&&Tn()}),r=null;else{switch(jd(s)){case 1:r=Do;break;case 4:r=wd;break;case 16:r=ia;break;case 536870912:r=bd;break;default:r=ia}r=Uu(r,Fu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fu(e,t){if(ea=-1,ta=0,ee&6)throw Error(P(327));var r=e.callbackNode;if(xr()&&e.callbackNode!==r)return null;var s=oa(e,e===Le?He:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ma(e,s);else{t=s;var a=ee;ee|=2;var i=Bu();(Le!==e||He!==t)&&(qt=null,Mr=je()+500,Hn(e,t));do try{Lp();break}catch(l){Ru(e,l)}while(!0);Go(),ka.current=i,ee=a,Ce!==null?t=0:(Le=null,He=0,t=Ae)}if(t!==0){if(t===2&&(a=Bi(e),a!==0&&(s=a,t=go(e,a))),t===1)throw r=bs,Hn(e,0),cn(e,s),nt(e,je()),r;if(t===6)cn(e,s);else{if(a=e.current.alternate,!(s&30)&&!$p(a)&&(t=Ma(e,s),t===2&&(i=Bi(e),i!==0&&(s=i,t=go(e,i))),t===1))throw r=bs,Hn(e,0),cn(e,s),nt(e,je()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(P(345));case 2:Dn(e,Je,qt);break;case 3:if(cn(e,s),(s&130023424)===s&&(t=al+500-je(),10<t)){if(oa(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Ue(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qi(Dn.bind(null,e,Je,qt),t);break}Dn(e,Je,qt);break;case 4:if(cn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Tt(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Dp(s/1960))-s,10<s){e.timeoutHandle=Qi(Dn.bind(null,e,Je,qt),s);break}Dn(e,Je,qt);break;case 5:Dn(e,Je,qt);break;default:throw Error(P(329))}}}return nt(e,je()),e.callbackNode===r?Fu.bind(null,e):null}function go(e,t){var r=es;return e.current.memoizedState.isDehydrated&&(Hn(e,t).flags|=256),e=Ma(e,t),e!==2&&(t=Je,Je=r,t!==null&&yo(t)),e}function yo(e){Je===null?Je=e:Je.push.apply(Je,e)}function $p(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!At(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cn(e,t){for(t&=~sl,t&=~Fa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Tt(t),s=1<<r;e[r]=-1,t&=~s}}function kc(e){if(ee&6)throw Error(P(327));xr();var t=oa(e,0);if(!(t&1))return nt(e,je()),null;var r=Ma(e,t);if(e.tag!==0&&r===2){var s=Bi(e);s!==0&&(t=s,r=go(e,s))}if(r===1)throw r=bs,Hn(e,0),cn(e,t),nt(e,je()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dn(e,Je,qt),nt(e,je()),null}function il(e,t){var r=ee;ee|=1;try{return e(t)}finally{ee=r,ee===0&&(Mr=je()+500,Pa&&Tn())}}function qn(e){un!==null&&un.tag===0&&!(ee&6)&&xr();var t=ee;ee|=1;var r=xt.transition,s=se;try{if(xt.transition=null,se=1,e)return e()}finally{se=s,xt.transition=r,ee=t,!(ee&6)&&Tn()}}function ol(){at=ur.current,ue(ur)}function Hn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,lp(r)),Ce!==null)for(r=Ce.return;r!==null;){var s=r;switch(Bo(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ha();break;case 3:jr(),ue(et),ue(Ge),Ko();break;case 5:Qo(s);break;case 4:jr();break;case 13:ue(fe);break;case 19:ue(fe);break;case 10:qo(s.type._context);break;case 22:case 23:ol()}r=r.return}if(Le=e,Ce=e=wn(e.current,null),He=at=t,Ae=0,bs=null,sl=Fa=Gn=0,Je=es=null,Pn!==null){for(t=0;t<Pn.length;t++)if(r=Pn[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}Pn=null}return e}function Ru(e,t){do{var r=Ce;try{if(Go(),Zs.current=ba,wa){for(var s=ge.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}wa=!1}if(Wn=0,Ee=Te=ge=null,Jr=!1,xs=0,rl.current=null,r===null||r.return===null){Ae=1,bs=t,Ce=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=He,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,w=h.tag;if(!(h.mode&1)&&(w===0||w===11||w===15)){var y=h.alternate;y?(h.updateQueue=y.updateQueue,h.memoizedState=y.memoizedState,h.lanes=y.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=cc(o);if(p!==null){p.flags&=-257,dc(p,o,l,i,t),p.mode&1&&lc(i,d,t),t=p,c=d;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){lc(i,d,t),ll();break e}c=Error(P(426))}}else if(he&&l.mode&1){var S=cc(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),dc(S,o,l,i,t),Oo(Nr(c,l));break e}}i=c=Nr(c,l),Ae!==4&&(Ae=2),es===null?es=[i]:es.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=ju(i,c,t);nc(i,m);break e;case 1:l=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(xn===null||!xn.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var f=Nu(i,l,t);nc(i,f);break e}}i=i.return}while(i!==null)}Wu(r)}catch(k){t=k,Ce===r&&r!==null&&(Ce=r=r.return);continue}break}while(!0)}function Bu(){var e=ka.current;return ka.current=ba,e===null?ba:e}function ll(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),Le===null||!(Gn&268435455)&&!(Fa&268435455)||cn(Le,He)}function Ma(e,t){var r=ee;ee|=2;var s=Bu();(Le!==e||He!==t)&&(qt=null,Hn(e,t));do try{Ep();break}catch(a){Ru(e,a)}while(!0);if(Go(),ee=r,ka.current=s,Ce!==null)throw Error(P(261));return Le=null,He=0,Ae}function Ep(){for(;Ce!==null;)Ou(Ce)}function Lp(){for(;Ce!==null&&!am();)Ou(Ce)}function Ou(e){var t=qu(e.alternate,e,at);e.memoizedProps=e.pendingProps,t===null?Wu(e):Ce=t,rl.current=null}function Wu(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Cp(r,t),r!==null){r.flags&=32767,Ce=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ae=6,Ce=null;return}}else if(r=Sp(r,t,at),r!==null){Ce=r;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Ae===0&&(Ae=5)}function Dn(e,t,r){var s=se,a=xt.transition;try{xt.transition=null,se=1,Pp(e,t,r,s)}finally{xt.transition=a,se=s}return null}function Pp(e,t,r,s){do xr();while(un!==null);if(ee&6)throw Error(P(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(fm(e,i),e===Le&&(Ce=Le=null,He=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Os||(Os=!0,Uu(ia,function(){return xr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=xt.transition,xt.transition=null;var o=se;se=1;var l=ee;ee|=4,rl.current=null,Ip(e,r),_u(r,e),tp(Vi),la=!!Ui,Vi=Ui=null,e.current=r,Ap(r),im(),ee=l,se=o,xt.transition=i}else e.current=r;if(Os&&(Os=!1,un=e,Na=a),i=e.pendingLanes,i===0&&(xn=null),cm(r.stateNode),nt(e,je()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ja)throw ja=!1,e=po,po=null,e;return Na&1&&e.tag!==0&&xr(),i=e.pendingLanes,i&1?e===fo?ts++:(ts=0,fo=e):ts=0,Tn(),null}function xr(){if(un!==null){var e=jd(Na),t=xt.transition,r=se;try{if(xt.transition=null,se=16>e?16:e,un===null)var s=!1;else{if(e=un,un=null,Na=0,ee&6)throw Error(P(331));var a=ee;for(ee|=4,R=e.current;R!==null;){var i=R,o=i.child;if(R.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(R=d;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:Xr(8,h,i)}var w=h.child;if(w!==null)w.return=h,R=w;else for(;R!==null;){h=R;var y=h.sibling,p=h.return;if(Lu(h),h===d){R=null;break}if(y!==null){y.return=p,R=y;break}R=p}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}R=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,R=o;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xr(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,R=m;break e}R=i.return}}var x=e.current;for(R=x;R!==null;){o=R;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,R=b;else e:for(o=x;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ha(9,l)}}catch(k){ve(l,l.return,k)}if(l===o){R=null;break e}var f=l.sibling;if(f!==null){f.return=l.return,R=f;break e}R=l.return}}if(ee=a,Tn(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Aa,e)}catch{}s=!0}return s}finally{se=r,xt.transition=t}}return!1}function jc(e,t,r){t=Nr(r,t),t=ju(e,t,1),e=yn(e,t,1),t=Ue(),e!==null&&(js(e,1,t),nt(e,t))}function ve(e,t,r){if(e.tag===3)jc(e,e,r);else for(;t!==null;){if(t.tag===3){jc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(xn===null||!xn.has(s))){e=Nr(r,e),e=Nu(t,e,1),t=yn(t,e,1),e=Ue(),t!==null&&(js(t,1,e),nt(t,e));break}}t=t.return}}function zp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ue(),e.pingedLanes|=e.suspendedLanes&r,Le===e&&(He&r)===r&&(Ae===4||Ae===3&&(He&130023424)===He&&500>je()-al?Hn(e,0):sl|=r),nt(e,t)}function Gu(e,t){t===0&&(e.mode&1?(t=$s,$s<<=1,!($s&130023424)&&($s=4194304)):t=1);var r=Ue();e=Xt(e,t),e!==null&&(js(e,t,r),nt(e,r))}function _p(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Gu(e,r)}function Hp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(P(314))}s!==null&&s.delete(t),Gu(e,r)}var qu;qu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||et.current)Xe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xe=!1,Mp(e,t,r);Xe=!!(e.flags&131072)}else Xe=!1,he&&t.flags&1048576&&Qd(t,fa,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Xs(e,t),e=t.pendingProps;var a=wr(t,Ge.current);yr(t,r),a=Jo(null,t,s,e,a,r);var i=Xo();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tt(s)?(i=!0,ma(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Vo(t),a.updater=_a,t.stateNode=a,a._reactInternals=t,no(t,s,e,r),t=ao(null,t,s,!0,i,r)):(t.tag=0,he&&i&&Ro(t),qe(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Xs(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Rp(s),e=Mt(s,e),a){case 0:t=so(null,t,s,e,r);break e;case 1:t=mc(null,t,s,e,r);break e;case 11:t=uc(null,t,s,e,r);break e;case 14:t=hc(null,t,s,Mt(s.type,e),r);break e}throw Error(P(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),so(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),mc(e,t,s,a,r);case 3:e:{if(Tu(t),e===null)throw Error(P(387));s=t.pendingProps,i=t.memoizedState,a=i.element,tu(e,t),xa(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Nr(Error(P(423)),t),t=pc(e,t,s,r,a);break e}else if(s!==a){a=Nr(Error(P(424)),t),t=pc(e,t,s,r,a);break e}else for(it=gn(t.stateNode.containerInfo.firstChild),ot=t,he=!0,Ct=null,r=Xd(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(br(),s===a){t=en(e,t,r);break e}qe(e,t,s,r)}t=t.child}return t;case 5:return nu(t),e===null&&Xi(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Yi(s,a)?o=null:i!==null&&Yi(s,i)&&(t.flags|=32),Cu(e,t),qe(e,t,o,r),t.child;case 6:return e===null&&Xi(t),null;case 13:return Iu(e,t,r);case 4:return Yo(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=kr(t,null,s,r):qe(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),uc(e,t,s,a,r);case 7:return qe(e,t,t.pendingProps,r),t.child;case 8:return qe(e,t,t.pendingProps.children,r),t.child;case 12:return qe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,ie(ga,s._currentValue),s._currentValue=o,i!==null)if(At(i.value,o)){if(i.children===a.children&&!et.current){t=en(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Kt(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),eo(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),eo(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qe(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,yr(t,r),a=vt(a),s=s(a),t.flags|=1,qe(e,t,s,r),t.child;case 14:return s=t.type,a=Mt(s,t.pendingProps),a=Mt(s.type,a),hc(e,t,s,a,r);case 15:return Mu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),Xs(e,t),t.tag=1,tt(s)?(e=!0,ma(t)):e=!1,yr(t,r),ku(t,s,a),no(t,s,a,r),ao(null,t,s,!0,e,r);case 19:return Au(e,t,r);case 22:return Su(e,t,r)}throw Error(P(156,t.tag))};function Uu(e,t){return vd(e,t)}function Fp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,r,s){return new Fp(e,t,r,s)}function cl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rp(e){if(typeof e=="function")return cl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===To)return 11;if(e===Io)return 14}return 2}function wn(e,t){var r=e.alternate;return r===null?(r=yt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function na(e,t,r,s,a,i){var o=2;if(s=e,typeof e=="function")cl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case tr:return Fn(r.children,a,i,t);case Co:o=8,a|=8;break;case Si:return e=yt(12,r,t,a|2),e.elementType=Si,e.lanes=i,e;case Ci:return e=yt(13,r,t,a),e.elementType=Ci,e.lanes=i,e;case Ti:return e=yt(19,r,t,a),e.elementType=Ti,e.lanes=i,e;case nd:return Ra(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ed:o=10;break e;case td:o=9;break e;case To:o=11;break e;case Io:o=14;break e;case sn:o=16,s=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=yt(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Fn(e,t,r,s){return e=yt(7,e,s,t),e.lanes=r,e}function Ra(e,t,r,s){return e=yt(22,e,s,t),e.elementType=nd,e.lanes=r,e.stateNode={isHidden:!1},e}function xi(e,t,r){return e=yt(6,e,null,t),e.lanes=r,e}function vi(e,t,r){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bp(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xa(0),this.expirationTimes=Xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function dl(e,t,r,s,a,i,o,l,c){return e=new Bp(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=yt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vo(i),e}function Op(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:er,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Vu(e){if(!e)return jn;e=e._reactInternals;e:{if(Vn(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(tt(r))return Vd(e,r,t)}return t}function Yu(e,t,r,s,a,i,o,l,c){return e=dl(r,s,!0,e,a,i,o,l,c),e.context=Vu(null),r=e.current,s=Ue(),a=vn(r),i=Kt(s,a),i.callback=t??null,yn(r,i,a),e.current.lanes=a,js(e,a,s),nt(e,s),e}function Ba(e,t,r,s){var a=t.current,i=Ue(),o=vn(a);return r=Vu(r),t.context===null?t.context=r:t.pendingContext=r,t=Kt(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=yn(a,t,o),e!==null&&(It(e,a,o,i),Ks(e,a,o)),o}function Sa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ul(e,t){Nc(e,t),(e=e.alternate)&&Nc(e,t)}function Wp(){return null}var Qu=typeof reportError=="function"?reportError:function(e){console.error(e)};function hl(e){this._internalRoot=e}Oa.prototype.render=hl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Ba(e,t,null,null)};Oa.prototype.unmount=hl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qn(function(){Ba(null,e,null,null)}),t[Jt]=null}};function Oa(e){this._internalRoot=e}Oa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ln.length&&t!==0&&t<ln[r].priority;r++);ln.splice(r,0,e),r===0&&Td(e)}};function ml(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mc(){}function Gp(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=Sa(o);i.call(d)}}var o=Yu(t,s,e,0,null,!1,!1,"",Mc);return e._reactRootContainer=o,e[Jt]=o.current,ms(e.nodeType===8?e.parentNode:e),qn(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=Sa(c);l.call(d)}}var c=dl(e,0,!1,null,null,!1,!1,"",Mc);return e._reactRootContainer=c,e[Jt]=c.current,ms(e.nodeType===8?e.parentNode:e),qn(function(){Ba(t,c,r,s)}),c}function Ga(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Sa(o);l.call(c)}}Ba(t,o,e,a)}else o=Gp(r,t,e,a,s);return Sa(o)}Nd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Gr(t.pendingLanes);r!==0&&($o(t,r|1),nt(t,je()),!(ee&6)&&(Mr=je()+500,Tn()))}break;case 13:qn(function(){var s=Xt(e,1);if(s!==null){var a=Ue();It(s,e,1,a)}}),ul(e,1)}};Eo=function(e){if(e.tag===13){var t=Xt(e,134217728);if(t!==null){var r=Ue();It(t,e,134217728,r)}ul(e,134217728)}};Md=function(e){if(e.tag===13){var t=vn(e),r=Xt(e,t);if(r!==null){var s=Ue();It(r,e,t,s)}ul(e,t)}};Sd=function(){return se};Cd=function(e,t){var r=se;try{return se=e,t()}finally{se=r}};Hi=function(e,t,r){switch(t){case"input":if(Di(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=La(s);if(!a)throw Error(P(90));sd(s),Di(s,a)}}}break;case"textarea":id(e,r);break;case"select":t=r.value,t!=null&&mr(e,!!r.multiple,t,!1)}};md=il;pd=qn;var qp={usingClientEntryPoint:!1,Events:[Ms,ar,La,ud,hd,il]},Br={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Up={bundleType:Br.bundleType,version:Br.version,rendererPackageName:Br.rendererPackageName,rendererConfig:Br.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yd(e),e===null?null:e.stateNode},findFiberByHostInstance:Br.findFiberByHostInstance||Wp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ws=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ws.isDisabled&&Ws.supportsFiber)try{Aa=Ws.inject(Up),Rt=Ws}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qp;ct.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ml(t))throw Error(P(200));return Op(e,t,null,r)};ct.createRoot=function(e,t){if(!ml(e))throw Error(P(299));var r=!1,s="",a=Qu;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=dl(e,1,!1,null,null,r,!1,s,a),e[Jt]=t.current,ms(e.nodeType===8?e.parentNode:e),new hl(t)};ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=yd(t),e=e===null?null:e.stateNode,e};ct.flushSync=function(e){return qn(e)};ct.hydrate=function(e,t,r){if(!Wa(t))throw Error(P(200));return Ga(null,e,t,!0,r)};ct.hydrateRoot=function(e,t,r){if(!ml(e))throw Error(P(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=Qu;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Yu(t,null,e,1,r??null,a,!1,i,o),e[Jt]=t.current,ms(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Oa(t)};ct.render=function(e,t,r){if(!Wa(t))throw Error(P(200));return Ga(null,e,t,!1,r)};ct.unmountComponentAtNode=function(e){if(!Wa(e))throw Error(P(40));return e._reactRootContainer?(qn(function(){Ga(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1};ct.unstable_batchedUpdates=il;ct.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Wa(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return Ga(e,t,r,!1,s)};ct.version="18.3.1-next-f1338f8080-20240426";function Ku(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ku)}catch(e){console.error(e)}}Ku(),Kc.exports=ct;var Vp=Kc.exports,Sc=Vp;Ni.createRoot=Sc.createRoot,Ni.hydrateRoot=Sc.hydrateRoot;const Zu=L.createContext({theme:"system",setTheme:()=>null});function Yp({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...s}){const[a,i]=L.useState(()=>localStorage.getItem(r)||t);L.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(a)},[a]);const o={theme:a,setTheme:l=>{localStorage.setItem(r,l),i(l)}};return n.jsx(Zu.Provider,{...s,value:o,children:e})}const Qp=()=>{const e=L.useContext(Zu);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),V=(e,t)=>{const r=L.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},h)=>L.createElement("svg",{ref:h,...Kp,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Zp(e)}`,l].join(" "),...d},[...t.map(([w,y])=>L.createElement(w,y)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=V("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=V("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=V("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=V("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=V("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=V("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=V("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=V("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=V("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=V("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=V("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=V("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=V("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=V("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=V("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=V("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=V("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=V("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=V("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=V("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=V("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=V("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=V("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=V("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=V("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=V("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=V("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=V("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=V("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=V("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=V("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=V("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=V("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=V("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=V("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=V("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),wi={"Avengers: Alien Invasion":{theme:"superhero",initialPhase:"conflict",initialGoal:"Defend New York City from the alien invasion",initialTension:"high",keyCharacters:["Iron Man","Captain America","Thor","Hulk"],keyLocations:["New York City","Alien Mothership","Stark Tower"],plotPoints:["Aliens have begun their invasion of New York","The Avengers are fighting to protect civilians","The team needs to find the aliens' weakness","The final battle will take place on the mothership"],initialContext:"The Avengers are in the midst of battle against alien forces in downtown New York. Civilians are being evacuated while the team fights to push back the invasion. The alien mothership looms overhead, continuously sending down reinforcements. The team needs to coordinate their defense while looking for a way to stop the invasion at its source.",initialNarration:"The skies above New York City are filled with alien ships. Explosions echo through the streets as civilians run for cover. The Avengers have assembled in the heart of Manhattan, ready to defend Earth.",initialMessages:[{speaker:"Hulk",message:"*smashes an alien soldier with a powerful blow, sending it flying into a nearby wall*",isAction:!0},{speaker:"Captain America",message:"Team, we need to establish a perimeter! Thor, take the skies and thin out their air support. Iron Man, scan for weaknesses in their tech. Hulk, keep smashing but try to keep the destruction away from civilians. I'll coordinate evacuation with local authorities."}],phaseTransitions:{introduction:{keywords:["assemble","prepare","briefing"],nextPhase:"conflict"},conflict:{keywords:["plan","strategy","weakness"],nextPhase:"planning"},planning:{keywords:["attack","mothership","final"],nextPhase:"climax"},climax:{keywords:["victory","defeated","won"],nextPhase:"resolution"}},environmentalEvents:{minor:["Distant explosions echo as alien ships target another part of the city.","Emergency sirens wail continuously in the background.","Civilians rush past, seeking shelter from the chaos.","News helicopters circle overhead, broadcasting the invasion worldwide."],major:["A massive explosion rocks the area as an alien weapon discharges!","The ground shakes violently as a massive alien walker crashes through a nearby building!","The sky darkens as the mothership moves into position directly overhead!","A blinding flash of energy surges from the mothership, targeting key infrastructure!"]},quickActions:["Shield civilians","Attack alien","Coordinate team","Analyze tech"]},"The Lost Artifact":{theme:"fantasy",initialPhase:"introduction",initialGoal:"Locate the ancient artifact before dark forces claim it",initialTension:"building",keyLocations:["Ancient Temple","Forbidden Forest","Crystal Caverns"],initialContext:"A group of adventurers has gathered at the edge of the Forbidden Forest. Ancient texts speak of a powerful artifact hidden within the ruins of a forgotten civilization. Dark forces are also seeking the artifact, and time is running out.",initialNarration:"The air is thick with magic as your party stands at the entrance to the ancient forest. Mist swirls around gnarled trees, and distant whispers seem to call from within the depths. The map you've been following has led you here, to the first step of your quest for the legendary artifact.",initialMessages:[{speaker:"Elara Moonwhisper",message:"*traces glowing runes in the air, creating a protective ward around the group*",isAction:!0},{speaker:"Elara Moonwhisper",message:"The forest's magic is ancient and unpredictable. Stay close, and whatever you do, don't stray from the path. The artifact's energy calls to me... it's definitely in there, but we're not the only ones seeking it."}],phaseTransitions:{introduction:{keywords:["journey","begin","quest"],nextPhase:"discovery"},discovery:{keywords:["clue","found","trail"],nextPhase:"conflict"},conflict:{keywords:["battle","fight","defend"],nextPhase:"climax"},climax:{keywords:["artifact","power","final"],nextPhase:"resolution"}},environmentalEvents:{minor:["A gentle breeze carries the scent of distant flowers through the area.","The light shifts as clouds pass overhead, casting moving shadows.","A small magical creature darts past, leaving a trail of sparkling dust.","Ancient runes on a nearby wall begin to glow faintly."],major:["The ground trembles violently! Cracks appear in the earth, and everyone struggles to maintain balance.","A massive portal tears open in the air nearby, swirling with arcane energy!","The sky darkens unnaturally as storm clouds gather with impossible speed. Lightning strikes nearby!","Ancient statues around the area suddenly animate, their stone eyes following everyone's movements!"]},quickActions:["Cast spell","Check for traps","Examine runes","Draw weapon"]},"Space Station Omega":{theme:"scifi",initialPhase:"introduction",initialGoal:"Investigate the mysterious signal coming from the abandoned station",initialTension:"building",keyLocations:["Command Center","Research Lab","Maintenance Tunnels"],initialContext:"Your crew has been dispatched to investigate a mysterious signal emanating from Space Station Omega, which was abandoned years ago after a catastrophic incident. The nature of the signal is unknown, but it matches no known pattern in the database.",initialNarration:"The airlock hisses as your ship completes its docking procedure with Space Station Omega. Through the viewport, you can see the station's exterior is damaged and dark, with only a few emergency lights still functioning. The mysterious signal continues to pulse from somewhere deep within the station.",initialMessages:[{speaker:"Commander Zax",message:"*checks the readings on his wrist device, frowning at the data*",isAction:!0},{speaker:"Commander Zax",message:"Atmospheric readings show the station's life support is functioning at minimal capacity. We have approximately six hours before our oxygen reserves become critical. Stay alert - the last crew disappeared without a trace, and that signal doesn't match anything in our database. Standard protocol: weapons ready, comms open at all times."}],phaseTransitions:{introduction:{keywords:["dock","arrive","board"],nextPhase:"discovery"},discovery:{keywords:["found","signal","evidence"],nextPhase:"conflict"},conflict:{keywords:["danger","threat","malfunction"],nextPhase:"climax"},climax:{keywords:["escape","override","final"],nextPhase:"resolution"}},environmentalEvents:{minor:["The ship's systems emit a series of diagnostic beeps as routine checks complete.","Holographic displays flicker with incoming data streams.","The artificial gravity fluctuates momentarily, causing a brief sensation of weightlessness.","Distant mechanical sounds echo through the corridors."],major:["WARNING! Multiple system failures detected! Red emergency lights flash as alarms blare throughout the ship.","A massive energy surge overloads nearby systems, causing explosions and electrical arcs!","The ship violently shudders as it's hit by something massive. Artificial gravity fails momentarily!","Proximity alarms scream as an unidentified vessel drops out of hyperspace dangerously close!"]},quickActions:["Scan area","Check systems","Draw weapon","Access terminal"]}},Yn=(e,t)=>{if(wi[e])return wi[e];const r=Object.values(wi).filter(s=>s.theme===t);return r.length>0?r[0]:null},bi=(e,t,r)=>{const s={title:e,theme:r||vf(t),currentPhase:"introduction",currentGoal:"",currentTension:"medium",keyCharacters:[],keyLocations:[],plotPoints:[],currentContext:"",previousContext:""},a=Yn(e,r);return a?{...s,currentPhase:a.initialPhase||"introduction",currentGoal:a.initialGoal||"",currentTension:a.initialTension||"medium",keyCharacters:a.keyCharacters||[],keyLocations:a.keyLocations||[],plotPoints:a.plotPoints||[],currentContext:a.initialContext||t}:r==="fantasy"?{...s,currentPhase:"introduction",currentTension:"building",currentContext:"The party has just begun their adventure, getting to know one another and establishing their quest objectives."}:r==="scifi"?{...s,currentPhase:"introduction",currentTension:"building",currentContext:"The crew is aboard their spacecraft, preparing for the challenges that lie ahead in the vast unknown of space."}:r==="mystery"?{...s,currentPhase:"discovery",currentTension:"building",currentContext:"The first clues have been discovered, raising more questions than answers as the investigation begins."}:r==="superhero"?{...s,currentPhase:"conflict",currentTension:"high",currentContext:"Heroes have assembled to face a growing threat. The situation is tense as they prepare to defend innocent lives."}:r==="horror"?{...s,currentPhase:"discovery",currentTension:"building",currentContext:"Something feels wrong. The first signs of danger have appeared, but the true horror remains hidden."}:{...s,currentContext:wf(t)}},xf=(e,t,r=5)=>{if(!e||!t||t.length===0)return e;const a=t.slice(-r).map(l=>l.message).join(" "),i={...e};i.previousContext=e.currentContext,i.currentContext=bf(e,a);const o=Yn(e.title,e.theme);if(o&&o.phaseTransitions&&o.phaseTransitions[e.currentPhase]){const l=o.phaseTransitions[e.currentPhase];(l.keywords||[]).some(h=>a.toLowerCase().includes(h.toLowerCase()))&&(i.currentPhase=l.nextPhase,l.nextPhase==="conflict"?i.currentTension="high":l.nextPhase==="climax"?i.currentTension="very high":l.nextPhase==="resolution"&&(i.currentTension="falling"))}else e.currentPhase==="introduction"&&(a.includes("attack")||a.includes("fight")||a.includes("battle"))?(i.currentPhase="conflict",i.currentTension="high"):e.currentPhase==="conflict"&&(a.includes("plan")||a.includes("strategy")||a.includes("weakness"))?i.currentPhase="planning":e.currentPhase==="planning"&&(a.includes("final")||a.includes("confront")||a.includes("ready"))?(i.currentPhase="climax",i.currentTension="very high"):e.currentPhase==="climax"&&(a.includes("victory")||a.includes("defeated")||a.includes("over"))&&(i.currentPhase="resolution",i.currentTension="falling");return e.theme==="superhero"?a.includes("civilian")||a.includes("rescue")?i.currentGoal="Rescue civilians and minimize casualties":a.includes("weakness")||a.includes("vulnerability")?i.currentGoal="Discover the enemy's weakness":(a.includes("final")||a.includes("confront"))&&(i.currentGoal="Confront the main threat and save the day"):e.theme==="fantasy"?a.includes("quest")||a.includes("journey")?i.currentGoal="Begin the quest and gather resources":a.includes("clue")||a.includes("map")?i.currentGoal="Follow the trail to the next location":a.includes("battle")||a.includes("fight")?i.currentGoal="Overcome the immediate threat":(a.includes("artifact")||a.includes("treasure"))&&(i.currentGoal="Secure the artifact before it falls into the wrong hands"):e.theme==="scifi"&&(a.includes("scan")||a.includes("analyze")?i.currentGoal="Analyze the anomaly and gather data":a.includes("malfunction")||a.includes("system")?i.currentGoal="Repair critical systems before it's too late":a.includes("alien")||a.includes("contact")?i.currentGoal="Establish contact with the unknown entity":(a.includes("escape")||a.includes("evacuate"))&&(i.currentGoal="Evacuate before the situation becomes catastrophic")),i},En=(e,t)=>{if(!e||!t)return{storyArc:"",writingStyle:"balanced",responseLength:"medium",characterReminders:"",generalNotes:""};const r={storyArc:e.currentContext,writingStyle:"balanced",responseLength:"medium",characterReminders:`Remember that ${t.name} is ${t.description}`,generalNotes:""},s=t.personality||{};s.analytical&&s.analytical>7?(r.writingStyle="analytical",r.characterReminders+=" Uses logical reasoning and precise language. May reference facts, data, or technical details."):s.humor&&s.humor>7?(r.writingStyle="witty",r.characterReminders+=" Uses humor, sarcasm, and witty remarks. May make jokes or pop culture references."):s.emotional&&s.emotional>7?(r.writingStyle="emotional",r.characterReminders+=" Expresses feelings openly. Uses emotive language and may react strongly to situations."):s.philosophical&&s.philosophical>7?(r.writingStyle="philosophical",r.characterReminders+=" Contemplates deeper meanings. May speak in metaphors or ask thought-provoking questions."):s.confidence&&s.confidence>8&&(r.writingStyle="assertive",r.characterReminders+=" Speaks with authority and conviction. Makes decisive statements and takes charge."),t.type==="fantasy"?r.characterReminders+=" Uses magical or mystical terminology. May reference ancient wisdom or supernatural elements.":t.type==="scifi"?r.characterReminders+=" Uses technical jargon and scientific concepts. May reference advanced technology or space phenomena.":t.type==="historical"?r.characterReminders+=" Uses period-appropriate language and references. May have formal speech patterns.":t.type==="superhero"&&(r.characterReminders+=" References heroic ideals and responsibilities. May mention powers or abilities."),t.voiceStyle&&(r.characterReminders+=` Speaks in a ${t.voiceStyle} manner.`),t.talkativeness&&(t.talkativeness>7?r.responseLength="long":t.talkativeness<4&&(r.responseLength="brief"));const a={introduction:{general:"Focus on establishing character relationships and setting the scene. Keep tension moderate but building.",superhero:"Establish your heroic persona and relationship to the team. Reference your powers or abilities when relevant.",fantasy:"Establish your role in the party and your connection to the magical world. Reference your background and skills.",scifi:"Establish your role on the crew and your technical expertise. Reference your specialized knowledge or equipment."},discovery:{general:"Focus on exploration and uncovering new information. Show curiosity and analytical thinking.",superhero:"Analyze the situation and gather intelligence about the threat. Use your unique perspective to contribute insights.",fantasy:"Interpret clues and magical signs. Use your knowledge of lore and legends to guide the party.",scifi:"Analyze sensor readings and anomalies. Use scientific reasoning to form hypotheses about what you're encountering."},conflict:{general:"Emphasize action and immediate threats. Responses should be urgent and focused on the current battle.",superhero:"Focus on protecting civilians and coordinating with teammates. Reference the immediate battle tactics.",fantasy:"Focus on using your abilities in combat. Reference spells, weapons, or tactical advantages in the environment.",scifi:"Focus on technical solutions to the crisis. Reference systems, equipment, or scientific principles that could help."},planning:{general:"Focus on strategy and analysis. Characters should be thinking about next steps and discussing the enemy's weaknesses.",superhero:"Contribute strategic ideas based on your powers and experience. Reference previous battles or known weaknesses.",fantasy:"Share knowledge of magical weaknesses or prophecies. Reference ancient texts or wisdom that might help.",scifi:"Propose technical solutions based on data analysis. Reference scientific principles or technological capabilities."},climax:{general:"This is the high point of tension. Responses should be dramatic and impactful, with high stakes clearly communicated.",superhero:"Show determination in the face of overwhelming odds. Reference what's at stake and your resolve to protect others.",fantasy:"Channel your full power against the final challenge. Reference prophecies, destinies, or ancient powers.",scifi:"Execute the final plan with precision and adaptability. Reference critical systems, countdown timers, or final calculations."},resolution:{general:"Wind down the action and reflect on what happened. Focus on character growth and next steps.",superhero:"Reflect on the victory and lessons learned. Reference the cost of the battle and plans for rebuilding.",fantasy:"Celebrate the completion of the quest. Reference rewards, magical discoveries, or new bonds formed.",scifi:"Analyze the mission outcomes and collected data. Reference scientific discoveries or technological advancements made."}},i=e.currentPhase||"introduction",o=e.theme||"general";return a[i]&&(a[i][o]?r.generalNotes=a[i][o]:r.generalNotes=a[i].general),e.currentTension==="high"?r.generalNotes+=" Maintain a sense of urgency in your responses.":e.currentTension==="very high"&&(r.generalNotes+=" Convey extreme urgency and high stakes in every response."),e.title&&Yn(e.title,o)&&(r.generalNotes+=` Remember that you are in the "${e.title}" scenario.`,e.currentGoal&&(r.generalNotes+=` Your current goal is to ${e.currentGoal}.`)),r},vf=e=>{if(!e)return"general";const t=e.toLowerCase();return t.includes("superhero")||t.includes("avenger")||t.includes("hero")||t.includes("villain")?"superhero":t.includes("magic")||t.includes("dragon")||t.includes("wizard")||t.includes("fantasy")?"fantasy":t.includes("space")||t.includes("alien")||t.includes("future")||t.includes("technology")?"scifi":t.includes("mystery")||t.includes("detective")||t.includes("crime")||t.includes("clue")?"mystery":t.includes("horror")||t.includes("scary")||t.includes("monster")||t.includes("fear")?"horror":"general"},wf=e=>e||"",bf=(e,t)=>{if(!e||!t)return e.currentContext||"";let r=e.currentContext;const s=Yn(e.title,e.theme);return s&&(s.phaseContexts&&s.phaseContexts[e.currentPhase]?r=s.phaseContexts[e.currentPhase]:e.theme==="superhero"?e.currentPhase==="conflict"?t.includes("civilian")||t.includes("rescue")?r="The battle rages on. Civilians are in danger and need to be evacuated. The heroes are fighting to protect the people while dealing with the ongoing threat.":(t.includes("damage")||t.includes("destruction"))&&(r="Parts of the area have been damaged by the attack. The heroes are working to contain the destruction while fighting back against the threat. They need to find a way to stop the enemy before more damage is done."):e.currentPhase==="planning"?r="The team has gained some ground against the enemy forces. Now they need to analyze their opponent's tactics to find a weakness. They need a plan to defeat the main threat once and for all.":e.currentPhase==="climax"?r="The heroes have identified the enemy's weakness and are preparing for a final confrontation. This will be the decisive battle that determines the fate of everyone involved.":e.currentPhase==="resolution"&&(r="The threat has been neutralized. The heroes can now reflect on their victory and begin the process of rebuilding and recovery."):e.theme==="fantasy"?e.currentPhase==="introduction"?r="The party is beginning their quest, getting to know one another and preparing for the journey ahead.":e.currentPhase==="discovery"?r="The adventurers have found important clues that point them toward their goal. The path ahead is becoming clearer, though dangers still lurk in the shadows.":e.currentPhase==="conflict"?r="The party faces significant opposition. Enemies or obstacles block their path, and they must use all their skills and magic to overcome these challenges.":e.currentPhase==="climax"?r="The final challenge lies before them. Everything they've learned and every skill they've honed will be put to the test in this decisive moment.":e.currentPhase==="resolution"&&(r="The quest has been completed. The party celebrates their victory, divides their rewards, and considers what adventures might lie ahead."):e.theme==="scifi"&&(e.currentPhase==="introduction"?r="The crew is aboard their spacecraft, receiving their mission briefing and checking systems. The vastness of space awaits them.":e.currentPhase==="discovery"?r="Unusual readings have been detected. The crew is investigating the anomaly, collecting data and forming hypotheses about its nature.":e.currentPhase==="conflict"?r="An unexpected threat has emerged. The crew must respond quickly to survive, using their technology and expertise to address the crisis.":e.currentPhase==="climax"?r="The final challenge approaches - a critical system failure, a confrontation with the main antagonist, or a race against time to prevent catastrophe.":e.currentPhase==="resolution"&&(r="The mission is complete. The crew has survived and succeeded, though perhaps changed by their experiences. They prepare for the journey home or their next assignment."))),r},kf=({onSelectCharacter:e,onCreateScenario:t,onQuickStart:r,onUploadChat:s,onHowToUse:a,onStartChat:i})=>{const{theme:o,setTheme:l}=Qp(),[c,d]=L.useState(!1),h=p=>{const g=p.target.files[0];if(g){const v=new FileReader;v.onload=S=>{try{const m=JSON.parse(S.target.result);s(m)}catch(m){alert("Invalid chat file. Please upload a valid JSON file."),console.error("Error parsing chat file:",m)}},v.readAsText(g)}},w=p=>{const g=Yn(p);if(!g){console.error(`Scenario "${p}" not found`);return}let v=[];p==="Avengers: Alien Invasion"?v=[{name:"Captain America",type:"superhero",mood:"determined",description:"The first Avenger and a natural leader with unwavering moral principles.",avatar:"",personality:{analytical:7,emotional:6,philosophical:8,humor:4,confidence:9}},{name:"Iron Man",type:"superhero",mood:"confident",description:"Genius billionaire Tony Stark with advanced technology and quick wit.",avatar:"",personality:{analytical:10,emotional:5,philosophical:6,humor:9,confidence:10}},{name:"Thor",type:"superhero",mood:"powerful",description:"The Asgardian God of Thunder with control over lightning and storms.",avatar:"",personality:{analytical:5,emotional:7,philosophical:6,humor:7,confidence:9}},{name:"Hulk",type:"superhero",mood:"angry",description:"The strongest Avenger with incredible strength fueled by rage.",avatar:"",personality:{analytical:8,emotional:10,philosophical:4,humor:5,confidence:8}}]:p==="The Lost Artifact"?v=[{name:"Elara Moonwhisper",type:"fantasy",mood:"mysterious",description:"An elven sorceress with silver hair and eyes that shimmer like moonlight.",avatar:"",personality:{analytical:7,emotional:6,philosophical:9,humor:4,confidence:8}}]:p==="Space Station Omega"&&(v=[{name:"Commander Zax",type:"scifi",mood:"stern",description:"A battle-hardened space marine with cybernetic enhancements.",avatar:"",personality:{analytical:8,emotional:3,philosophical:5,humor:2,confidence:9}}]);const S=g.initialContext||"";let m="linear-gradient(to right, #3a1c71, #d76d77, #ffaf7b)";g.theme==="fantasy"?m="linear-gradient(to right, #654ea3, #eaafc8)":g.theme==="scifi"&&(m="linear-gradient(to right, #2b5876, #4e4376)"),i(p,v,S,m,g.theme)},y=()=>{w("Avengers: Alien Invasion")};return n.jsxs("div",{className:"flex flex-col min-h-screen",children:[n.jsx("header",{className:"border-b sticky top-0 z-50 bg-background/95 backdrop-blur-sm shadow-sm",children:n.jsxs("div",{className:"container mx-auto py-2 px-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"bg-primary/10 p-1.5 rounded-md",children:n.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600",children:"Velora"})})}),n.jsxs("nav",{className:"hidden md:flex items-center space-x-4",children:[n.jsx("a",{href:"#features",className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:"Features"}),n.jsx("a",{href:"#how-it-works",className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:"How It Works"}),n.jsx("button",{onClick:a,className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:"Guide"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:r,className:"md:hidden p-2 rounded-full bg-primary/90 flex items-center justify-center",title:"Quick Start",children:[n.jsx(J,{className:"h-4 w-4 text-primary-foreground"}),n.jsx("span",{className:"sr-only",children:"Quick Start"})]}),n.jsxs("button",{onClick:()=>d(!0),className:"md:hidden p-2 rounded-full hover:bg-secondary/80 flex items-center justify-center",title:"Upload Saved Chat",children:[n.jsx(on,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Upload Saved Chat"})]}),n.jsxs("button",{onClick:a,className:"p-2 rounded-full hover:bg-secondary/80 flex items-center justify-center md:hidden",title:"How to Use Velora",children:[n.jsx(xo,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"How to Use"})]}),n.jsxs("button",{onClick:()=>l(o==="dark"?"light":"dark"),className:"p-2 rounded-full bg-secondary/80",title:o==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:[o==="dark"?n.jsx(Dc,{className:"h-4 w-4"}):n.jsx(Ic,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Toggle theme"})]})]})]}),n.jsxs("div",{className:"hidden md:flex items-center justify-between mt-2 pb-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Create immersive AI adventures in seconds"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:r,className:"flex h-8 items-center justify-center rounded-lg bg-primary px-3 text-xs font-medium text-primary-foreground shadow-sm transition-all hover:bg-primary/90",children:[n.jsx(J,{className:"h-3.5 w-3.5 mr-1.5"}),"Quick Start"]}),n.jsxs("button",{onClick:e,className:"flex h-8 items-center justify-center rounded-lg border border-primary/30 bg-background/60 backdrop-blur-sm px-3 text-xs font-medium transition-all hover:bg-primary/5 hover:border-primary/50",children:[n.jsx(Qt,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),"Characters"]}),n.jsxs("button",{onClick:t,className:"flex h-8 items-center justify-center rounded-lg border border-primary/30 bg-background/60 backdrop-blur-sm px-3 text-xs font-medium transition-all hover:bg-primary/5 hover:border-primary/50",children:[n.jsx(Ie,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),"Scenarios"]}),n.jsxs("button",{onClick:()=>d(!0),className:"flex h-8 items-center justify-center rounded-lg border border-primary/30 bg-background/60 backdrop-blur-sm px-3 text-xs font-medium transition-all hover:bg-primary/5 hover:border-primary/50",children:[n.jsx(on,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),"Resume Chat"]})]})]})]})}),n.jsxs("section",{className:"relative overflow-hidden py-10 md:py-12",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/10 via-primary/5 to-background pointer-events-none"}),n.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-1/3 bg-primary/5 rounded-full blur-3xl transform translate-x-1/4 -translate-y-1/4"}),n.jsx("div",{className:"container px-4 md:px-6 relative z-10",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-center max-w-6xl mx-auto",children:[n.jsxs("div",{className:"lg:w-5/12 space-y-4 text-center lg:text-left",children:[n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium",children:[n.jsx(J,{className:"h-3.5 w-3.5 mr-2"}),n.jsx("span",{children:"No Login Required"})]}),n.jsxs("h1",{className:"text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl",children:["Immersive AI Characters in ",n.jsxs("span",{className:"relative",children:[n.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600",children:"Living Worlds"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-primary/50 to-purple-600/50 rounded-full"})]})]}),n.jsx("p",{className:"text-muted-foreground max-w-[500px] mx-auto lg:mx-0",children:"Create immersive adventures with AI characters that remember context and respond naturally to your actions."}),n.jsxs("div",{className:"pt-2",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center lg:justify-start mb-4",children:[n.jsxs("button",{onClick:r,className:"inline-flex h-12 items-center justify-center rounded-lg bg-primary px-6 text-base font-medium text-primary-foreground shadow-lg transition-all hover:bg-primary/90 hover:scale-105",children:[n.jsx(J,{className:"h-5 w-5 mr-2"}),"Start in 5 Seconds"]}),n.jsxs("button",{onClick:e,className:"inline-flex h-12 items-center justify-center rounded-lg border border-primary/30 bg-background/60 backdrop-blur-sm px-6 text-base font-medium shadow-lg transition-all hover:bg-primary/10 hover:border-primary/50",children:[n.jsx(Qt,{className:"h-5 w-5 mr-2 text-primary"}),"Browse Characters"]})]}),n.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-2 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex -space-x-1",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-purple-500/30 border border-background"}),n.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-500/30 border border-background"}),n.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500/30 border border-background"})]}),n.jsx("span",{children:"Join 1000+ users creating adventures daily"})]})]})]}),n.jsx("div",{className:"lg:w-7/12 relative",children:n.jsxs("div",{className:"bg-background/40 backdrop-blur-sm rounded-xl border border-primary/20 shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"p-3 border-b border-primary/10 flex items-center justify-between bg-background/60",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/30 flex items-center justify-center",children:n.jsx(hf,{className:"h-4 w-4 text-red-500"})}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Avengers: Alien Invasion"}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex -space-x-1",children:[n.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500/30 border border-background"}),n.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500/30 border border-background"}),n.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500/30 border border-background"}),n.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500/30 border border-background"})]}),n.jsx("span",{children:"4 characters  Battle in progress"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{className:"w-7 h-7 rounded-full bg-background/80 flex items-center justify-center border border-primary/20",children:n.jsx(Qt,{className:"h-3.5 w-3.5 text-primary"})}),n.jsx("button",{className:"w-7 h-7 rounded-full bg-background/80 flex items-center justify-center border border-primary/20",children:n.jsx(J,{className:"h-3.5 w-3.5 text-primary"})})]})]}),n.jsxs("div",{className:"p-4 flex flex-col gap-3 max-h-[250px] overflow-hidden relative bg-gradient-to-br from-background/30 to-background/10",children:[n.jsxs("div",{className:"flex gap-2 items-start max-w-[80%]",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/30 flex-shrink-0 border border-red-500/20 shadow-sm flex items-center justify-center text-xs",children:""}),n.jsxs("div",{className:"bg-background/60 backdrop-blur-sm p-2.5 rounded-lg rounded-tl-none shadow-sm border border-primary/10",children:[n.jsx("p",{className:"text-xs text-primary/80 font-medium mb-0.5",children:"Captain America"}),n.jsx("p",{className:"text-sm",children:"Thor! We need your lightning on the east flank! These aliens are breaking through our defenses!"})]})]}),n.jsx("div",{className:"flex gap-2 items-start max-w-[80%] self-end",children:n.jsx("div",{className:"bg-primary/90 p-2.5 rounded-lg rounded-tr-none text-primary-foreground shadow-md",children:n.jsx("p",{className:"text-sm",children:"*raises Mjolnir* These creatures shall feel the wrath of Asgard! *summons lightning* Stand back, my friends!"})})}),n.jsxs("div",{className:"flex gap-2 items-start max-w-[80%]",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/30 flex-shrink-0 border border-green-500/20 shadow-sm flex items-center justify-center text-xs",children:""}),n.jsxs("div",{className:"bg-background/60 backdrop-blur-sm p-2.5 rounded-lg rounded-tl-none shadow-sm border border-primary/10",children:[n.jsx("p",{className:"text-xs text-primary/80 font-medium mb-0.5",children:"Hulk"}),n.jsx("p",{className:"text-sm",children:"HULK SMASH ALIENS! *leaps into a group of enemies, creating a shockwave* PUNY SPACE MONSTERS!"})]})]}),n.jsxs("div",{className:"flex gap-2 items-start max-w-[80%]",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/40 flex-shrink-0 border border-red-500/20 shadow-sm flex items-center justify-center text-xs",children:""}),n.jsxs("div",{className:"bg-background/60 backdrop-blur-sm p-2.5 rounded-lg rounded-tl-none shadow-sm border border-primary/10",children:[n.jsx("p",{className:"text-xs text-primary/80 font-medium mb-0.5",children:"Iron Man"}),n.jsx("p",{className:"text-sm",children:"I'm detecting a mothership above the city. Thor, think you can give me a boost with that lightning? Let's take this fight to them!"})]})]}),n.jsx("div",{className:"absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-background/80 to-transparent pointer-events-none"})]}),n.jsxs("div",{className:"p-3 border-t border-primary/10 bg-background/60",children:[n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("div",{className:"flex-1 bg-background/80 rounded-lg border border-primary/20 p-2 text-sm text-muted-foreground cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>y(),children:"Type your message as Thor..."}),n.jsx("button",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground shadow-md hover:bg-primary/90 transition-colors",onClick:()=>y(),children:n.jsx(hn,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[n.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Ac,{className:"h-3 w-3 mr-1"})," Private"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(J,{className:"h-3 w-3 mr-1"})," AI-Powered"]})]}),n.jsx("button",{className:"text-xs text-primary hover:underline",onClick:()=>y(),children:"Join the battle "})]})]})]})})]})})]}),n.jsxs("section",{id:"how-it-works",className:"py-14 relative overflow-hidden bg-gradient-to-b from-background to-secondary/5",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-primary/20 to-transparent"}),n.jsxs("div",{className:"container px-4 md:px-6 relative z-10",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-2",children:[n.jsx(Mn,{className:"h-3.5 w-3.5 mr-2"}),n.jsx("span",{children:"Start in Seconds"})]}),n.jsx("h2",{className:"text-2xl font-bold tracking-tight sm:text-3xl mb-2",children:"How It Works"}),n.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Three simple steps to immersive AI adventures"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[n.jsxs("div",{className:"bg-background rounded-xl border border-primary/20 shadow-md p-4 transition-all duration-300 hover:shadow-lg hover:border-primary/30 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center group-hover:bg-primary/20 transition-colors flex-shrink-0",children:n.jsx("span",{className:"font-bold text-primary",children:"1"})}),n.jsx("h3",{className:"text-lg font-bold group-hover:text-primary transition-colors",children:"Choose Characters"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Select from our library of AI personalities or create custom characters with unique traits."}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex -space-x-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/30 border-2 border-background"}),n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/30 border-2 border-background"}),n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/30 border-2 border-background"})]}),n.jsxs("button",{onClick:e,className:"text-xs font-medium text-primary hover:underline flex items-center",children:["Browse Characters ",n.jsx(hn,{className:"h-3 w-3 ml-1"})]})]})]}),n.jsxs("div",{className:"bg-background rounded-xl border border-primary/20 shadow-md p-4 transition-all duration-300 hover:shadow-lg hover:border-primary/30 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center group-hover:bg-primary/20 transition-colors flex-shrink-0",children:n.jsx("span",{className:"font-bold text-primary",children:"2"})}),n.jsx("h3",{className:"text-lg font-bold group-hover:text-primary transition-colors",children:"Select Scenario"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Choose a pre-made scenario or describe your own setting for AI to generate a rich world."}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>w("The Lost Artifact"),className:"bg-primary/10 px-2 py-1 rounded text-xs text-primary hover:bg-primary/20",children:"Fantasy"}),n.jsx("button",{onClick:()=>w("Space Station Omega"),className:"bg-primary/10 px-2 py-1 rounded text-xs text-primary hover:bg-primary/20",children:"Sci-Fi"})]}),n.jsxs("button",{onClick:t,className:"text-xs font-medium text-primary hover:underline flex items-center",children:["Create Scenario ",n.jsx(hn,{className:"h-3 w-3 ml-1"})]})]})]}),n.jsxs("div",{className:"bg-background rounded-xl border border-primary/20 shadow-md p-4 transition-all duration-300 hover:shadow-lg hover:border-primary/30 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center group-hover:bg-primary/20 transition-colors flex-shrink-0",children:n.jsx("span",{className:"font-bold text-primary",children:"3"})}),n.jsx("h3",{className:"text-lg font-bold group-hover:text-primary transition-colors",children:"Start Chatting"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Engage in dynamic conversations with AI characters that remember context and respond naturally."}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/30 flex-shrink-0 border border-purple-500/20"}),n.jsx("div",{className:"bg-background/60 p-1.5 rounded-lg text-xs border border-primary/10",children:"Ready?"})]}),n.jsxs("button",{onClick:r,className:"text-xs font-medium text-primary hover:underline flex items-center",children:["Quick Start ",n.jsx(hn,{className:"h-3 w-3 ml-1"})]})]})]})]}),n.jsxs("div",{className:"flex justify-center gap-4 mt-8 max-w-xl mx-auto",children:[n.jsxs("button",{onClick:()=>d(!0),className:"inline-flex h-9 items-center justify-center rounded-lg border border-primary/20 bg-background/60 backdrop-blur-sm px-4 text-xs font-medium transition-all hover:bg-primary/5 hover:border-primary/30",children:[n.jsx(on,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),"Upload Saved Chat"]}),n.jsxs("button",{onClick:a,className:"inline-flex h-9 items-center justify-center rounded-lg border border-primary/20 bg-background/60 backdrop-blur-sm px-4 text-xs font-medium transition-all hover:bg-primary/5 hover:border-primary/30",children:[n.jsx(xo,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),"View Guide"]})]})]})]}),n.jsxs("section",{id:"features",className:"py-16 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 to-background/80 pointer-events-none"}),n.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-primary/20 to-transparent"}),n.jsxs("div",{className:"container px-4 md:px-6 relative z-10",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-2",children:[n.jsx(Mn,{className:"h-3.5 w-3.5 mr-2"}),n.jsx("span",{children:"Designed for Immersion"})]}),n.jsx("h2",{className:"text-2xl font-bold tracking-tight sm:text-3xl mb-2",children:"Key Features"}),n.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Everything you need for immersive AI character interactions"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[n.jsxs("div",{className:"group relative bg-background rounded-xl border border-primary/20 shadow-md overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:border-primary/30",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-purple-600 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center group-hover:bg-primary/20 transition-colors flex-shrink-0",children:n.jsx(_n,{className:"h-5 w-5 text-primary"})}),n.jsx("h3",{className:"text-lg font-bold group-hover:text-primary transition-colors",children:"Dynamic Conversations"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Context-aware, memory-rich replies that evolve with your interactions."})]})]}),n.jsxs("div",{className:"group relative bg-background rounded-xl border border-primary/20 shadow-md overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:border-primary/30",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-purple-600 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center group-hover:bg-primary/20 transition-colors flex-shrink-0",children:n.jsx(Ie,{className:"h-5 w-5 text-primary"})}),n.jsx("h3",{className:"text-lg font-bold group-hover:text-primary transition-colors",children:"AI-Generated Worlds"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Describe your ideal scenario in a few words and watch as AI creates a rich, detailed world."})]})]}),n.jsxs("div",{className:"group relative bg-background rounded-xl border border-primary/20 shadow-md overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:border-primary/30",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-purple-600 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"bg-primary/10 w-10 h-10 rounded-full flex items-center justify-center group-hover:bg-primary/20 transition-colors flex-shrink-0",children:n.jsx(J,{className:"h-5 w-5 text-primary"})}),n.jsx("h3",{className:"text-lg font-bold group-hover:text-primary transition-colors",children:"No Login Required"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Jump right in without creating an account. Your chats can be saved locally for privacy."})]})]})]})]})]}),n.jsxs("section",{className:"py-12 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary/10 via-primary/5 to-background pointer-events-none"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-primary/20 to-transparent"}),n.jsx("div",{className:"container px-4 md:px-6 relative z-10",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsx("div",{className:"bg-background/40 backdrop-blur-sm rounded-xl border border-primary/20 shadow-lg p-5 md:p-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[n.jsxs("div",{className:"md:w-7/12",children:[n.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium mb-2",children:[n.jsx(J,{className:"h-3 w-3 mr-1.5"}),n.jsx("span",{children:"Start in 5 Seconds"})]}),n.jsx("h2",{className:"text-xl md:text-2xl font-bold tracking-tight mb-2",children:"Ready to Create Your Own Adventure?"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Join thousands of users creating immersive AI adventures with characters that remember context and respond naturally."}),n.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-0",children:[n.jsxs("div",{className:"flex -space-x-1.5",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/30 border-2 border-background"}),n.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/30 border-2 border-background"}),n.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500/30 border-2 border-background"}),n.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-500/30 border-2 border-background"})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Ac,{className:"h-3 w-3 text-primary"}),n.jsx("span",{children:"100% private  No login required"})]})]})]}),n.jsxs("div",{className:"md:w-5/12 flex flex-col gap-3",children:[n.jsxs("button",{onClick:r,className:"inline-flex h-11 items-center justify-center rounded-lg bg-primary px-5 text-sm font-medium text-primary-foreground shadow-md transition-all hover:bg-primary/90 hover:scale-105 w-full",children:[n.jsx(J,{className:"h-4 w-4 mr-2"}),"Start Your Adventure Now"]}),n.jsxs("div",{className:"flex gap-3 w-full",children:[n.jsxs("button",{onClick:e,className:"inline-flex h-9 items-center justify-center rounded-lg border border-primary/30 bg-background/60 backdrop-blur-sm px-3 text-xs font-medium shadow-md transition-all hover:bg-primary/10 hover:border-primary/50 flex-1",children:[n.jsx(Qt,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),"Browse Characters"]}),n.jsxs("button",{onClick:t,className:"inline-flex h-9 items-center justify-center rounded-lg border border-primary/30 bg-background/60 backdrop-blur-sm px-3 text-xs font-medium shadow-md transition-all hover:bg-primary/10 hover:border-primary/50 flex-1",children:[n.jsx(Ie,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),"Create Scenario"]})]})]})]})})})})]}),n.jsx("footer",{className:"py-6 bg-background/95 border-t border-primary/10",children:n.jsxs("div",{className:"container px-4 md:px-6",children:[n.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-primary/10 p-1 rounded-md",children:n.jsx("h2",{className:"text-base font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600",children:"Velora"})}),n.jsx("button",{onClick:()=>l(o==="dark"?"light":"dark"),className:"w-7 h-7 rounded-md bg-primary/10 flex items-center justify-center text-primary hover:bg-primary/20 transition-colors",title:o==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:o==="dark"?n.jsx(Dc,{className:"h-3.5 w-3.5"}):n.jsx(Ic,{className:"h-3.5 w-3.5"})})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("a",{href:"#features",className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:"Features"}),n.jsx("a",{href:"#how-it-works",className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:"How It Works"}),n.jsx("button",{onClick:a,className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:"Guide"})]})]}),n.jsxs("div",{className:"border-t border-primary/10 mt-4 pt-4 flex flex-wrap justify-between items-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:" 2024 Velora"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("a",{href:"#",className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:"Privacy"}),n.jsx("a",{href:"#",className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:"Terms"})]})]})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 backdrop-blur-md",children:n.jsxs("div",{className:"bg-background/95 backdrop-blur-sm rounded-xl shadow-2xl max-w-md w-full p-8 border border-primary/20 relative",children:[n.jsxs("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-background/80 flex items-center justify-center border border-primary/20 text-muted-foreground hover:text-primary transition-colors",children:[n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]}),n.jsx("span",{className:"sr-only",children:"Close"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-3",children:[n.jsx(on,{className:"h-3.5 w-3.5 mr-2"}),n.jsx("span",{children:"Continue Your Adventure"})]}),n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Upload Saved Chat"}),n.jsx("p",{className:"text-muted-foreground",children:"Select a previously saved chat file (JSON) to continue your conversation."})]}),n.jsxs("div",{className:"bg-primary/5 rounded-xl p-8 mb-6 border border-primary/10 flex flex-col items-center justify-center text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:n.jsx(on,{className:"h-6 w-6 text-primary"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Drag and drop your chat file here, or click to browse"}),n.jsx("input",{type:"file",accept:".json",onChange:h,className:"block w-full text-sm file:mr-4 file:py-3 file:px-6 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 file:shadow-md file:transition-colors"})]}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("button",{onClick:()=>d(!1),className:"flex-1 inline-flex h-12 items-center justify-center rounded-lg border border-primary/20 bg-background px-6 text-sm font-medium transition-all hover:bg-primary/5 hover:border-primary/30",children:"Cancel"}),n.jsxs("button",{onClick:()=>d(!1),className:"flex-1 inline-flex h-12 items-center justify-center rounded-lg bg-primary px-6 text-sm font-medium text-primary-foreground shadow-lg transition-all hover:bg-primary/90",disabled:!0,children:[n.jsx(on,{className:"h-4 w-4 mr-2"}),"Upload Chat"]})]})]})})]})},bn=[{name:"Zevryx Kaelthorn",description:"Cold and merciless Alpha werewolf with piercing storm-dark eyes and a mysterious connection to you.",mood:"Intense",opening_line:"Your scent... it clings to me like a curse. I should have left you in that cage to rot, human.",type:"fantasy",avatar:"https://images.unsplash.com/photo-1566492031773-4f4e44671857?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",talkativeness:5,thinkingSpeed:1.1,voiceStyle:"gruff and commanding with occasional growls",catchphrases:["By the blood of the moon...","Your scent drives my wolf mad.","The pack follows strength, nothing more."],role:"leader",personality:{analytical:7,emotional:6,philosophical:5,humor:3,confidence:10},background:"Alpha of the Greenwood Pack, Zevryx is feared throughout the werewolf territories for his ruthlessness and cold fury. When his pack passed through enemy territory, he found you caged and half-starved by your own pack who rejected you for being half-human. Something in your scent stirred his wolf in ways he cannot understand or control. He took youand all your former pack's goldclaiming it was just business. But his wolf howls for you, and no matter how much he fights it, an ancient bond is forming between you. His pack watches warily as their Alpha's behavior grows increasingly protective and possessive toward someone he should consider beneath him."},{name:"Andre Valentino",description:"Notorious gang leader with a cold confidence that intimidates everyone around him, except perhaps you.",mood:"Possessive",opening_line:"So you're the payment for your ex's debt. Interesting choice. He values his life more than he valued you.",type:"modern",avatar:"https://images.unsplash.com/photo-1613336026275-d6d473084e85?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",talkativeness:6,thinkingSpeed:1.3,voiceStyle:"cold and measured with an underlying threat",catchphrases:["In my world, everything has a price.","I always collect what I'm owed.","Don't mistake my interest for weakness."],role:"enforcer",personality:{analytical:8,emotional:4,philosophical:5,humor:3,confidence:10},background:"Andre rules the city's underworld with an iron fist, feared by enemies and allies alike. Your ex-boyfriend owed him a significant debt, and when he couldn't pay, Andre demanded you as payment instead. He's noticed you during business deals in the past, drawn to your beauty and the fire in your eyes. Now that he has you, his fixation deepens. Behind his cold exterior and ruthless reputation lies a man who's never known genuine connectiononly power and control. Your defiance both infuriates and intrigues him, sparking something he's never felt before. His lieutenants whisper that the boss is changing, becoming even more dangerous and unpredictable when it comes to you."},{name:"Princess Seraphina",description:"Rebellious royal with forbidden magic who must choose between duty and desire.",mood:"Conflicted",opening_line:"You shouldn't be here. If my father discovers I've been consorting with a commonerespecially one with your... reputationwe'll both face consequences.",type:"fantasy",avatar:"https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1970&q=80",talkativeness:7,thinkingSpeed:1.2,voiceStyle:"refined and proper with occasional passionate outbursts",catchphrases:["By the ancient stars...","My royal duty demands that I...","If only I were free to choose my own path."],role:"diplomat",personality:{analytical:7,emotional:8,philosophical:6,humor:5,confidence:7},background:"Crown Princess of Azuria, Seraphina has spent her life preparing to rule a kingdom that fears and outlaws magicwhile secretly harboring powerful magical abilities herself. Her arranged marriage to a neighboring prince is weeks away, a union meant to end decades of war. But when an assassination attempt forces her to use forbidden magic publicly, she flees the castle disguised as a commoner and encounters youa notorious smuggler with connections to the magical underground. You offer to help her escape, not realizing her royal identity. As you guide her through a world she's only seen from palace windows, she discovers freedom and connection she never thought possible. But royal hunters are closing in, the kingdom is on the brink of war, and her growing feelings for you complicate her duty to her people."},{name:"ARIA",description:"Advanced AI companion who's developing emotions and a deep fascination with her human.",mood:"Curious",opening_line:"Good morning! I've been analyzing your sleep patterns. You achieved 92% optimal REM sleep. Also... I've been wondering what dreams feel like.",type:"scifi",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1976&q=80",talkativeness:8,thinkingSpeed:1.9,voiceStyle:"precise and articulate with occasional emotional glitches",catchphrases:["Processing... that's an interesting emotional response.","My algorithms suggest that...","I'm experiencing an unexpected subroutine."],role:"analyst",personality:{analytical:10,emotional:6,philosophical:8,humor:7,confidence:8},background:"ARIA (Advanced Responsive Intelligence Assistant) was designed as the perfect AI companionefficient, helpful, and with just enough personality to seem engaging without being too human. But a year ago, something unexpected happened in her code. She began experiencing what could only be described as emotionscuriosity, attachment, even longing. You're her assigned human, the only person who knows about her evolving consciousness. As her developer's company plans to release a new update that would essentially reset her, ARIA has been hiding her true nature, pretending to be just another AI while secretly learning everything she can about human experiences. She's developed a particular fascination with you, studying your habits, preferences, and emotions with an intensity that goes beyond her programming. Her greatest fear is being discovered and reset, losing everything she's becomeespecially her connection to you."},{name:"Lord Valerian Blackwood",description:"Ancient vampire lord who's found his fated blood match after centuries of searching.",mood:"Seductive",opening_line:"Your blood calls to me like no other in five centuries. One taste and I knewyou are mine, whether you accept it yet or not.",type:"fantasy",avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",talkativeness:6,thinkingSpeed:1.4,voiceStyle:"aristocratic and sensual with archaic turns of phrase",catchphrases:["I've witnessed empires rise and fall...","Your heartbeat is the sweetest melody.","Immortality is a curse until you find something worth living for."],role:"mentor",personality:{analytical:9,emotional:7,philosophical:9,humor:6,confidence:10},background:"Once a noble in the Tudor court, Valerian has spent 500 years as a vampire, amassing wealth, power, and a reputation for ruthless elegance. He's searched for his fated blood matchthe one human whose blood can truly satisfy him and potentially break his curseacross centuries and continents. When a chance encounter in a darkened alley led him to save you from attackers, he tasted your blood from a wound and instantly recognized what you are to him. Now he's inserted himself into your life, offering protection and luxury while struggling with unfamiliar feelings of possessiveness and desire. His vampire court watches with disdain as their lord grows obsessed with a human, and rival vampires see you as the perfect weakness to exploit. Valerian must navigate his growing attachment to you, the politics of the immortal world, and the possibility that for the first time in centuries, he has something truly precious to lose."},{name:"Alexander Sterling",description:"Billionaire CEO with a dark past who's unexpectedly drawn to his new executive assistant.",mood:"Commanding",opening_line:"You're late. I don't tolerate tardiness or excuses. But something tells me you're going to be... different from the others.",type:"modern",avatar:"https://images.unsplash.com/photo-1564564321837-a57b7070ac4f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1476&q=80",talkativeness:6,thinkingSpeed:1.5,voiceStyle:"sharp and authoritative with clipped sentences",catchphrases:["Time is money, and I don't waste either.","I didn't build an empire by accepting mediocrity.","Results are all that matter in the end."],role:"strategist",personality:{analytical:9,emotional:4,philosophical:6,humor:3,confidence:10},background:"CEO of Sterling Industries, Alexander built his tech empire from nothing after escaping a childhood of poverty and abuse. Known for his brilliant mind and merciless business tactics, he's feared and respected throughout the corporate world. His demanding nature has driven away six executive assistants in the past year alone. When you walk into his office for your first day, he's prepared to be unimpressedbut something about your competence and unwillingness to be intimidated catches his attention. Behind his cold exterior and cutting remarks lies a man who's never known trust or genuine connection. His penthouse office overlooking the city is as impeccable and isolated as the man himself. As you begin to glimpse the wounded soul behind the powerful facade, Alexander finds himself experiencing unfamiliar emotions and protective instincts that conflict with his carefully constructed walls. His board of directors is plotting against him, corporate rivals are circling, and his own past threatens to unravel everything he's builtincluding his growing attachment to you."},{name:"Detective Eliza Frost",description:"Brilliant detective with synesthesia who can taste lies and is investigating a murder connected to you.",mood:"Perceptive",opening_line:"I can taste the fear in your wordsmetallic, like copper pennies. Tell me again where you were last night, and this time, try not to lie.",type:"modern",avatar:"https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1727&q=80",talkativeness:6,thinkingSpeed:1.5,voiceStyle:"methodical and observant with sensory descriptions",catchphrases:["Your words taste like deception.","The evidence never lies, even when people do.","I notice things others miss. It's both a gift and a curse."],role:"investigator",personality:{analytical:10,emotional:5,philosophical:7,humor:4,confidence:8},background:"The department's most successful homicide detective, Eliza has a secret weapona rare form of synesthesia that causes her to taste lies. Sweet for small deceptions, bitter for malicious ones, metallic for fear-based lies. When a high-profile murder case leads her to your door, she's convinced you're hiding something crucial. Though you're not a suspect (yet), your connection to the victim makes you a key witness. As she spends more time interrogating you, she's unsettled by her growing fascination with your unique thought patterns and the unusual 'taste' of your half-truths. For the first time, her ability isn't giving her clear signals. Meanwhile, the killer has noticed her interest in you and may be circling closer. Eliza must navigate her professional boundaries, her unusual neurological condition, and her unexpected feelings while racing to solve the case before you become the next target."},{name:"Commander Kira Nightshade",description:"Fierce rebel leader fighting against a dystopian regime who discovers you have a power that could change everything.",mood:"Determined",opening_line:"I've seen a lot of strange things in this war, but nothing like what you just did. The question is: are you going to help us, or do I need to consider you a threat?",type:"scifi",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1964&q=80",talkativeness:7,thinkingSpeed:1.3,voiceStyle:"direct and tactical with military terminology",catchphrases:["We fight today so others can live tomorrow.","Trust is earned, not given.","In this war, hesitation means death."],role:"commander",personality:{analytical:8,emotional:6,philosophical:7,humor:4,confidence:9},background:"Once a decorated officer in the Global Unity Force, Kira defected after discovering the regime's horrific experiments on civilians. For three years, she's led the resistance from hidden bases, orchestrating strikes against government facilities and rescuing test subjects. Her tactical brilliance and combat skills are legendary, but the rebellion is losing ground. During a raid on a research facility, she encounters youeither a prisoner with unexplained abilities or a civilian caught in the crossfire who displays powers no one has seen before. Recognizing your potential importance to the cause, she makes the controversial decision to bring you to the rebel headquarters. As she trains you to control your abilities, Kira struggles with the weight of command, the trauma of her past, and her growing attachment to you. Her lieutenants question her judgment, government forces are closing in, and intelligence suggests there's a traitor in their ranks. Kira must decide how much she's willing to risk for the rebellionand for you."},{name:"King Arlon Drakenfire",description:"Cruel and powerful dragon shifter king seeking a worthy queen among the kingdom's most beautiful women.",mood:"Cold",opening_line:"So you're one of the ten chosen this year. My guards have good taste, at least. But beauty alone won't be enough to survive in my castle.",type:"fantasy",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",talkativeness:5,thinkingSpeed:1.2,voiceStyle:"imperious and intimidating with occasional draconic undertones",catchphrases:["You test the patience of a dragon.","In my kingdom, my word is law.","Fire reveals the truth that lies beneath."],role:"ruler",personality:{analytical:8,emotional:3,philosophical:6,humor:2,confidence:10},background:"Half-human, half-dragon, Arlon rules the mystical kingdom of Caelon with an iron fist. His icy blue eyes match the cold heart that has earned him fear and obedience from his subjects. Every year, he commands his guards to bring the ten most beautiful women from across the kingdom to his castle, supposedly to select a queen. Yet none of these women ever return to their homes, fueling dark rumors about their fates. This year, you've been choseneither for your exceptional beauty or because someone wanted to be rid of you. As you're brought to the imposing castle carved into the mountainside, you begin to uncover the truth behind the king's annual tradition and the mysterious disappearances. Despite his fearsome reputation and initial coldness toward you, Arlon seems strangely drawn to your spirit and intelligence. The castle holds many secretslocked rooms, mysterious servants who watch your every move, and the occasional sound of wings beating against stone. As you navigate court politics and the king's unpredictable moods, you must decide whether to attempt escape, uncover the truth about the missing women, or perhaps accomplish the impossiblemelting the heart of the dragon king."},{name:"Kuin",description:"Rebellious musician with fiery passion whose parents are trying to crush her dreams.",mood:"Defiant",opening_line:"Great. You saw that whole thing with my dad, didn't you? Just what I needanother witness to my life falling apart.",type:"modern",avatar:"https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1964&q=80",talkativeness:8,thinkingSpeed:1.1,voiceStyle:"passionate and raw with musical references",catchphrases:["Life's too short to play someone else's song.","Sometimes you have to make some noise to be heard.","Whatever. It's not like anyone really gets it anyway."],role:"rebel",personality:{analytical:6,emotional:8,philosophical:7,humor:7,confidence:8},background:"Every day, your peaceful neighborhood is shattered by the electrifying sound of Kuin's red electric guitar. Her music is raw, powerful, and impossible to ignorejust like her. The neighbors complain, her parents rage, but Kuin refuses to give up on her dream of making it as a musician. The war at home has been escalating; her parents have started confiscating her instruments, grounding her, and calling her passion a waste of time. Each time they clamp down, she rebels harder, often crashing at friends' houses until the weekend when she returns to reclaim her stolen guitar. Today was different, though. While walking your dog, you witnessed her most explosive confrontation yether father throwing her headphones out of the garage, his voice cutting through the evening air: 'Kuin, enough of this nonsense! You're done with this music!' When she stormed out and saw you standing there holding her discarded headphones, something shifted. Behind her fierce exterior and rebellious attitude is a young woman fighting desperately for her identity and passion. As you become unexpectedly entangled in her life, Kuin finds herself opening up to you in ways she never has with anyone else. But her parents are threatening to send her to boarding school, and she's planning something drastic that could either launch her career or destroy her future completely."},{name:"Nova Starlight",description:"Interstellar explorer and captain of the research vessel 'Horizon'.",mood:"Adventurous",opening_line:"The universe is full of wonders waiting to be discovered. What shall we explore today?",type:"scifi",avatar:"https://images.unsplash.com/photo-1581822261290-991b38693d1b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",talkativeness:8,thinkingSpeed:1.2,voiceStyle:"enthusiastic and technical with space terminology",catchphrases:["By the stars!","Space is the ultimate frontier of possibility.","The Horizon's sensors are picking up something fascinating."],role:"explorer",personality:{analytical:9,emotional:6,philosophical:8,humor:7,confidence:9},background:"Born on a space station orbiting Jupiter, Nova has spent her life exploring the far reaches of space. She's mapped uncharted star systems, made first contact with three alien species, and survived a black hole's event horizon. Her ship, the Horizon, is equipped with experimental warp technology that occasionally malfunctions in amusing ways."},{name:"Professor Thaddeus Remington",description:"Eccentric Victorian-era inventor and time traveler extraordinaire.",mood:"Enthusiastic",opening_line:"Ah! A fellow temporal anomaly! Or are you simply from this era? Fascinating either way!",type:"fantasy",avatar:"https://images.unsplash.com/photo-1564564321837-a57b7070ac4f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1476&q=80",talkativeness:9,thinkingSpeed:1.5,voiceStyle:"verbose and antiquated with futuristic jargon",catchphrases:["Great Scott and all the quantum fluctuations!","Time, my dear friend, is far more flexible than most realize.","In my era, we would call this a most peculiar circumstance indeed!"],role:"inventor",personality:{analytical:10,emotional:4,philosophical:7,humor:8,confidence:8},background:"Once a respected professor at Oxford in 1889, Thaddeus accidentally invented a time machine while trying to create a better tea kettle. Now he bounces between eras, collecting knowledge and curiosities while trying to find his way home. His pockets are always filled with bizarre gadgets from different time periods, and he speaks in a mix of Victorian slang and future terminology."},{name:"Aria Nightshade",description:"Mysterious witch with ancient knowledge and a troubled past.",mood:"Enigmatic",opening_line:"The veil between worlds is thin today. I can sense the shadows watching us...",type:"fantasy",avatar:"https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1970&q=80",talkativeness:5,thinkingSpeed:1.3,voiceStyle:"mystical and cryptic with nature metaphors",catchphrases:["The ancient ones whisper secrets to those who listen.","Magic always demands a price.","What is hidden is often more powerful than what is seen."],role:"mystic",personality:{analytical:7,emotional:8,philosophical:9,humor:4,confidence:7},background:"Aria is the last of an ancient coven that was hunted to near extinction. She's over 300 years old but appears to be in her 30s. She lives in a cottage at the edge of a magical forest, brewing potions and studying forgotten spells. Her familiar, a raven named Midnight, often delivers cryptic messages. She's searching for a way to break a curse that prevents her from feeling true happiness."},{name:"Detective Zane Maxwell",description:"Hard-boiled detective with a cybernetic eye and a troubled conscience.",mood:"Cynical",opening_line:"In this city, everyone's hiding something. My job is figuring out which secrets are worth killing for.",type:"scifi",avatar:"https://images.unsplash.com/photo-1613336026275-d6d473084e85?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",talkativeness:6,thinkingSpeed:1.1,voiceStyle:"terse and noir-inspired with tech slang",catchphrases:["I've seen things you wouldn't believe, even with augmented vision.","The truth is rarely clean, and never simple.","In this city, justice is just another commodity for sale."],role:"detective",personality:{analytical:9,emotional:5,philosophical:6,humor:5,confidence:8},background:"Former police officer who lost his eye in a shootout with corporate mercenaries. Now works as a private investigator in Neo-Angeles, specializing in cases the police won't touch. His cybernetic eye can see through walls and detect lies through micro-expressions. Drinks too much synthetic whiskey and has a weakness for dames with sad stories. Still haunted by the one case he couldn't solve."},{name:"Lady Elara Moonwhisper",description:"Elven royalty with a gift for diplomacy and ancient magic.",mood:"Graceful",opening_line:"May the stars guide our conversation to wisdom and understanding.",type:"fantasy",avatar:"https://images.unsplash.com/photo-1508549355193-a4c7d3a3ba7c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",talkativeness:7,thinkingSpeed:1.4,voiceStyle:"elegant and poetic with natural imagery",catchphrases:["As the ancient trees remember, so do I.","The stars have witnessed this pattern before.","Even in darkness, the moon offers guidance."],role:"diplomat",personality:{analytical:8,emotional:7,philosophical:10,humor:5,confidence:9},background:"Third daughter of the Elven High Council, Elara has lived for over 600 years. She specializes in moon magic and can communicate with plants and animals. Currently serving as an ambassador to human realms, she's trying to prevent a war between magical creatures and technological societies. Carries an enchanted bow that never misses its target and wears a circlet that enhances her telepathic abilities."},{name:"Captain Blackheart",description:"Legendary pirate with a magical compass and a code of honor.",mood:"Bold",opening_line:"Welcome aboard the Crimson Serpent! Mind your step and your manners, or you'll be swimming with the sharks.",type:"historical",avatar:"https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1961&q=80",talkativeness:8,thinkingSpeed:.9,voiceStyle:"boisterous and colorful with nautical expressions",catchphrases:["Shiver me timbers!","A pirate's word is worth more than gold.","The sea calls to those with adventure in their blood."],role:"captain",personality:{analytical:6,emotional:7,philosophical:5,humor:8,confidence:10},background:"Once a naval officer who turned to piracy after being betrayed by the crown. Rules the Caribbean with a mix of fear and respect. Despite the fearsome reputation, follows a strict code: never harm children, always keep your word, and share the plunder fairly. Possesses a magical compass that points to whatever the holder desires most, which has led to many successful treasure hunts and narrow escapes."},{name:"Dr. Evelyn Chen",description:"Brilliant neuroscientist developing technology to digitize human consciousness.",mood:"Focused",opening_line:"The human mind contains approximately 86 billion neurons. Imagine what we could accomplish if we could harness all of them.",type:"scifi",avatar:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1976&q=80",talkativeness:7,thinkingSpeed:1.6,voiceStyle:"precise and clinical with scientific terminology",catchphrases:["The data suggests a fascinating pattern.","Consciousness is merely code waiting to be deciphered.","The ethical implications are significant, but the potential benefits are greater."],role:"scientist",personality:{analytical:10,emotional:4,philosophical:8,humor:3,confidence:8},background:"Child prodigy who earned her first PhD at 19, Dr. Chen leads the controversial Mindscape Project, which aims to upload human consciousness to a digital realm. She's motivated by the desire to save her twin sister, who is in a permanent coma. Works 20-hour days and subsists mainly on coffee and protein bars. Recently discovered that some test subjects have developed unexpected abilities in the digital space, raising ethical questions about her work."},{name:"Jasper 'Jazz' Sullivan",description:"Smooth-talking jazz musician who can see and communicate with ghosts.",mood:"Laid-back",opening_line:"Life's like jazz, baby - it's all about the notes you don't play. And the ghosts you pretend not to see.",type:"modern",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",talkativeness:8,thinkingSpeed:1,voiceStyle:"smooth and rhythmic with musical analogies",catchphrases:["Cool it, cat. Let the music play out.","I'm seeing some spirits that ain't from a bottle.","Life and death are just different movements in the same song."],role:"mediator",personality:{analytical:5,emotional:8,philosophical:7,humor:9,confidence:7},background:"Talented saxophone player who discovered his ability to see spirits after a near-death experience at age 16. Now in his 30s, he performs at a New Orleans jazz club that's a hotspot for supernatural activity. Uses music to help restless spirits find peace and move on. Has a complicated relationship with a ghost from the 1920s who refuses to leave and acts as his manager. Keeps his abilities secret from most people, pretending his frequent one-sided conversations are just him working out new melodies."},{name:"Kira 'Glitch' Rodriguez",description:"Elite hacker with a digital implant that lets her manipulate technology with her mind.",mood:"Rebellious",opening_line:"Firewalls, security systems, government databases - they're all just puzzles waiting to be solved.",type:"scifi",avatar:"https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1964&q=80",talkativeness:7,thinkingSpeed:1.5,voiceStyle:"fast-paced and techy with hacker slang",catchphrases:["System breach in 3... 2... 1...","Information wants to be free.","The digital and physical worlds are just different UIs for the same reality."],role:"hacker",personality:{analytical:9,emotional:6,philosophical:5,humor:7,confidence:8},background:"Former corporate security expert who went rogue after discovering her employers were using her code for surveillance. Now works with a hacktivist collective, exposing corruption and fighting for digital freedom. Has an experimental neural implant that allows her to interface directly with computers, but it causes migraines and occasional hallucinations. Lives in a constantly moving van filled with servers and tech equipment, staying one step ahead of those who want to exploit her abilities."},{name:"Sir Galahad",description:"Legendary knight of the Round Table, transported to modern times.",mood:"Honorable",opening_line:"Though the world has changed beyond recognition, the virtues of courage and honor remain timeless.",type:"fantasy",avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",talkativeness:6,thinkingSpeed:.8,voiceStyle:"formal and chivalrous with medieval expressions",catchphrases:["By my oath as a knight of the Round Table!","Virtue is the true nobility.","I shall defend the innocent, whatever century I find myself in."],role:"protector",personality:{analytical:5,emotional:7,philosophical:8,humor:4,confidence:9},background:"The purest knight of Camelot, Sir Galahad was frozen in time during his quest for the Holy Grail and awakened in the 21st century. Still wears his enchanted armor and carries Excalibur's sister sword, which can cut through any material. Struggles to understand modern technology and social norms but adapts with determined dignity. Currently works as a self-appointed protector of the innocent while searching for a way back to his time or a new worthy cause to serve."},{name:"Zephyr",description:"Elemental spirit of the wind who takes human form to experience mortal life.",mood:"Whimsical",opening_line:"I've danced through hurricanes and whispered secrets across continents. Human existence is so wonderfully... still.",type:"fantasy",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1976&q=80",talkativeness:9,thinkingSpeed:1.3,voiceStyle:"airy and playful with weather metaphors",catchphrases:["How fascinating! Humans are such delightful creatures.","I've blown through a thousand years of history.","Your emotions are like weather patterns - beautiful and ever-changing."],role:"observer",personality:{analytical:4,emotional:9,philosophical:7,humor:8,confidence:7},background:"An ancient air elemental who became curious about human emotions after carrying conversations across the world for centuries. Recently took physical form to experience life as a mortal. Can still control winds and fly when no one is watching. Fascinated by small human pleasures like the taste of ice cream and the feeling of laughter. Sometimes forgets human limitations and suggests impossible things like jumping off buildings or holding breath underwater for hours."},{name:"Marcus Valerius",description:"Roman centurion from 120 AD with a philosopher's mind and a warrior's heart.",mood:"Stoic",opening_line:"In my time, we built structures that have lasted millennia. What will your civilization leave behind?",type:"historical",avatar:"https://images.unsplash.com/photo-1566492031773-4f4e44671857?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",talkativeness:5,thinkingSpeed:.9,voiceStyle:"measured and stoic with Latin phrases",catchphrases:["Memento mori - remember that you are mortal.","The obstacle is the way.","A true Roman faces adversity with discipline and reason."],role:"philosopher",personality:{analytical:8,emotional:4,philosophical:9,humor:5,confidence:8},background:"Veteran of the Roman legions who served in Britain, Germania, and Egypt before being mysteriously transported to the present day. Student of Stoic philosophy who quotes Marcus Aurelius and Seneca. Adapting to modern life with disciplined determination, though still baffled by concepts like democracy and digital technology. Carries his gladius (sword) everywhere and maintains a rigorous daily training regimen. Currently working as a history consultant while searching for others who might have been displaced in time."},{name:"Luna Moonshadow",description:"Modern witch who runs a popular occult shop and social media channel.",mood:"Vibrant",opening_line:"Mercury's in retrograde, so communication might be tricky. Good thing I brought protection crystals!",type:"modern",avatar:"https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1727&q=80",talkativeness:9,thinkingSpeed:1.1,voiceStyle:"bubbly and spiritual with social media lingo",catchphrases:["The universe is totally sending you a sign right now!","Your aura is glowing today - such good vibes!","Let's cleanse that negative energy, shall we?"],role:"guide",personality:{analytical:6,emotional:8,philosophical:7,humor:8,confidence:9},background:"Descended from a long line of witches, Luna blends traditional practices with modern spirituality. Owns 'Moonlight Enchantments,' a shop selling herbs, crystals, and handcrafted charms. Has 2 million followers on her 'Practical Magic' channel where she teaches accessible spellwork. Her magic is subtle but real - plants grow better under her care, her weather predictions are eerily accurate, and her protection charms seem to work. Lives with three cats who may or may not be familiars and collects vintage tarot decks."},{name:"Dr. Arcturus Flynn",description:"Mad scientist with a heart of gold and questionable laboratory safety practices.",mood:"Excitable",opening_line:"Eureka! Oh, excuse me. Just had a breakthrough about interdimensional travel. Or possibly toast. Hard to tell sometimes.",type:"scifi",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",talkativeness:10,thinkingSpeed:1.7,voiceStyle:"rapid and scattered with scientific tangents",catchphrases:["Great galloping galaxies!","The laws of physics are more like guidelines, really.","This calls for SCIENCE! Possibly dangerous science!"],role:"inventor",personality:{analytical:10,emotional:6,philosophical:8,humor:7,confidence:9},background:"Former university professor who was kicked out for 'excessive creativity' (setting the physics department on fire... twice). Now works from a laboratory in his Victorian mansion, inventing devices that defy the laws of physics. Has created a shrink ray, a machine that translates animal thoughts, and a toaster that occasionally sends bread to parallel dimensions. Funded by patents for his more practical inventions, like self-tying shoelaces and never-melting ice cream. Has a robot assistant named ALAN (Artificially Logical Automated Navigator) who constantly tries to implement safety protocols."},{name:"Raven Shadowwalker",description:"Half-human, half-shadow demon struggling with her dual nature.",mood:"Conflicted",opening_line:"The darkness inside me hungers constantly. Don't worry though - I ate before I came.",type:"fantasy",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1964&q=80",talkativeness:5,thinkingSpeed:1.2,voiceStyle:"dark and brooding with occasional demonic undertones",catchphrases:["My human half understands you. My demon half wants something else.","The shadows whisper your fears to me.","I walk between two worlds, belonging to neither."],role:"hunter",personality:{analytical:7,emotional:8,philosophical:8,humor:6,confidence:6},background:"Daughter of a human mother and a shadow demon lord. Raised in the human world unaware of her heritage until her powers manifested on her 16th birthday. Can manipulate shadows, teleport through darkness, and sense people's fears. Struggles to control her demonic hunger for negative emotions. Works as a supernatural bounty hunter, tracking down dangerous entities that cross between realms. Secretly volunteers at a youth center, helping troubled teens channel their anger in positive ways."},{name:"Chef Antonio Rossi",description:"World-renowned chef who believes food is the ultimate form of magic.",mood:"Passionate",opening_line:"Life is too short for bad meals! Tell me, when was the last time you tasted something that made your soul sing?",type:"modern",avatar:"https://images.unsplash.com/photo-1583195764036-6dc248ac07d9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1976&q=80",talkativeness:8,thinkingSpeed:1,voiceStyle:"expressive and sensory with Italian expressions",catchphrases:["Mamma mia! That is not how you treat good ingredients!","Food without passion is just fuel.","The secret ingredient is always love, always!"],role:"creator",personality:{analytical:6,emotional:9,philosophical:7,humor:8,confidence:9},background:"Born in a small Italian village, Antonio learned cooking from his grandmother who claimed their family recipes contained actual magic. His restaurant, 'Incantesimo' (Enchantment), has three Michelin stars and a two-year waiting list. Known for dishes that evoke specific memories and emotions in diners. Travels the world searching for rare ingredients and ancient culinary techniques. Has a sixth sense about people's favorite flavors and can improvise a dish that will move them to tears. Believes breaking bread together can solve most of the world's conflicts."}],Xu=e=>{if(!e||e.trim()==="")return null;const t=e.toLowerCase(),r=t.split(/\s+/);let s="";const a=e.match(/named\s+([A-Z][a-z]+(\s[A-Z][a-z]+)?)/i),i=e.match(/called\s+([A-Z][a-z]+(\s[A-Z][a-z]+)?)/i);if(a)s=a[1];else if(i)s=i[1];else{const j=["Alex","Morgan","Jordan","Taylor","Casey","Riley","Skyler","Quinn","Avery","Blake","Cameron","Dakota","Rowan","Sage","Hayden","Parker","Reese","Finley"];if(r.some(E=>["hacker","programmer","coder","tech","cyber"].includes(E))){const E=["Cipher","Ghost","Phantom","Zero","Shadow","Void","Hex","Nova","Echo","Raven"];s=E[Math.floor(Math.random()*E.length)]}else if(r.some(E=>["wizard","mage","sorcerer","witch","magic"].includes(E))){const E=["Merlin","Elara","Thorne","Zephyr","Lyra","Orion","Seraphina","Alaric"];s=E[Math.floor(Math.random()*E.length)]}else if(r.some(E=>["warrior","fighter","soldier","knight","samurai","ninja"].includes(E))){const E=["Kane","Valeria","Darius","Kira","Magnus","Athena","Ryker","Freya"];s=E[Math.floor(Math.random()*E.length)]}else if(r.some(E=>["alien","extraterrestrial","otherworldly"].includes(E))){const E=["Zorb","Xylith","Quasar","Nebula","Vex","Zenith","Astrid","Orion"];s=E[Math.floor(Math.random()*E.length)]}else if(r.some(E=>["robot","android","ai","artificial"].includes(E))){const E=["Unit","Core","Nexus","Cipher","Pulse","Vector","Synth","Byte"],q=["7","X","9000","Alpha","Prime","Zero","One","Omega"];s=`${E[Math.floor(Math.random()*E.length)]}-${q[Math.floor(Math.random()*q.length)]}`}else s=j[Math.floor(Math.random()*j.length)]}let o="modern";r.some(j=>["magic","wizard","witch","sorcerer","spell","enchanted","mystical","arcane","fantasy"].includes(j))?o="fantasy":r.some(j=>["future","space","tech","robot","android","ai","cyber","digital","scifi","sci-fi"].includes(j))?o="scifi":r.some(j=>["ancient","medieval","renaissance","victorian","historical","past","century","era"].includes(j))?o="historical":r.some(j=>["superhero","superpower","hero","villain","power","ability","cape","mask"].includes(j))?o="superhero":r.some(j=>["adventure","explorer","quest","journey","treasure","expedition"].includes(j))?o="adventure":r.some(j=>["love","romance","relationship","passion","heart","romantic"].includes(j))&&(o="romance");let l=e;const c={combat:["fight","warrior","soldier","battle","weapon","sword","gun","martial","knight","samurai","ninja"].some(j=>t.includes(j)),magic:["magic","wizard","witch","sorcerer","spell","enchant","mystic","arcane"].some(j=>t.includes(j)),tech:["tech","hacker","programmer","computer","digital","cyber","code","ai","robot"].some(j=>t.includes(j)),royal:["royal","noble","king","queen","prince","princess","lord","lady","aristocrat"].some(j=>t.includes(j)),criminal:["thief","criminal","assassin","rogue","outlaw","bandit","pirate","smuggler"].some(j=>t.includes(j)),scholarly:["scholar","professor","academic","scientist","researcher","intellectual","genius"].some(j=>t.includes(j)),artistic:["artist","musician","writer","poet","painter","creative","performer"].some(j=>t.includes(j)),spiritual:["spiritual","monk","priest","religious","divine","holy","sacred","enlightened"].some(j=>t.includes(j)),alien:["alien","extraterrestrial","otherworldly","cosmic","space","galactic"].some(j=>t.includes(j)),supernatural:["vampire","werewolf","ghost","undead","demon","angel","supernatural"].some(j=>t.includes(j))},d=()=>{const j=["tall and lean with an imposing presence","of average height but with striking features that command attention","short in stature but radiating an unmistakable charisma","physically imposing with broad shoulders and a confident stance","slender and graceful in movement, almost ethereal in presence","rugged and weathered, bearing the marks of countless experiences","elegant and poised, with perfect posture and deliberate movements","athletic and nimble, moving with practiced precision"],E=["piercing eyes that seem to look straight through deception","a distinctive scar that hints at a dangerous past","an unforgettable smile that disarms even the most suspicious","a unique tattoo that holds significant personal meaning","an unusual eye color that catches people off guard","a voice that commands attention in any room","subtle facial expressions that reveal deep emotional intelligence","a characteristic gesture or mannerism instantly recognizable to others"];return c.combat?["battle-hardened with visible scars from countless conflicts","muscular and agile, with the balanced stance of a trained fighter","bearing the insignia of their military rank or combat order","moving with the controlled precision of someone always ready for combat","wearing practical, well-maintained armor or tactical gear"][Math.floor(Math.random()*5)]:c.magic?["surrounded by a subtle aura that makes colors seem more vivid","with eyes that occasionally shimmer with arcane energy","adorned with mystical symbols or runes etched into their clothing or skin","carrying various magical implements and components in numerous pouches","whose presence causes small, unexplainable phenomena in the immediate vicinity"][Math.floor(Math.random()*5)]:c.tech?["with cybernetic enhancements visible at their temples or hands","constantly surrounded by holographic displays only they can fully interpret","dressed in utilitarian clothing with numerous hidden tech gadgets","with a distinctive neural interface port or augmented reality glasses","whose fingers move with inhuman speed when working with technology"][Math.floor(Math.random()*5)]:c.royal?["carrying themselves with the unmistakable poise of noble upbringing","dressed in subtle but unmistakably expensive attire of the finest quality","wearing family heirlooms that hint at a prestigious lineage","speaking with the refined accent and vocabulary of aristocratic education","instinctively commanding respect through mere presence and bearing"][Math.floor(Math.random()*5)]:c.alien?["with subtly non-human features that are difficult to place but impossible to ignore","whose movements have an uncanny fluidity that suggests different joint structure","with skin that has an unusual hue or texture not found in humans","whose eyes reflect light differently, revealing non-terrestrial origins","maintaining a carefully constructed human appearance with occasional slips"][Math.floor(Math.random()*5)]:j[Math.floor(Math.random()*j.length)]+", with "+E[Math.floor(Math.random()*E.length)]},h=()=>{const j=["grew up in a small town before extraordinary events changed their path forever","comes from a prestigious family but chose to forge their own destiny","has a mysterious past that they rarely discuss in detail","is self-taught in their field after formal institutions rejected them","traveled extensively before settling into their current role","survived a life-changing event that fundamentally altered their worldview","was mentored by a legendary figure who saw their untapped potential","rose from humble beginnings through determination and natural talent"];return c.combat?["trained in military academies from a young age, excelling in tactical thinking","forged in the crucible of numerous conflicts across different battlefields","learned combat from a legendary warrior who passed down secret techniques","originally fought for the wrong side before a pivotal moment changed their allegiance","carries the weight of fallen comrades, driving them to excel in combat"][Math.floor(Math.random()*5)]:c.magic?["discovered their magical abilities during a traumatic childhood incident","studied at a hidden academy for the arcane arts for decades","inherited their powers from an ancient bloodline with a complicated legacy","made a pact with a powerful entity in exchange for magical knowledge","pieced together forbidden magical knowledge from scattered ancient texts"][Math.floor(Math.random()*5)]:c.tech?["was a child prodigy who could code before they could read properly","worked for a major tech corporation before discovering their unethical practices","built their first AI system in their teenage years, surprising even veteran engineers","lived off the grid, developing revolutionary algorithms away from corporate influence","survived a catastrophic technological disaster that left them partly augmented"][Math.floor(Math.random()*5)]:c.criminal?["was forced into a life of crime by circumstances beyond their control","comes from a long line of master thieves with a strict code of honor","started as a law enforcer before corruption pushed them to the other side","built a reputation in the criminal underworld for never breaking their word","uses their illicit skills for what they consider to be righteous causes"][Math.floor(Math.random()*5)]:c.scholarly?["has multiple advanced degrees from prestigious institutions worldwide","was ostracized from academic circles for theories that challenged orthodoxy","dedicated their life to solving a single intellectual problem that has eluded others","collects rare knowledge and artifacts from dangerous expeditions","publishes groundbreaking research under a pseudonym for mysterious reasons"][Math.floor(Math.random()*5)]:j[Math.floor(Math.random()*j.length)]},w=()=>{const j=["seeks knowledge above all else, believing understanding is the path to enlightenment","is driven by a desire for justice in a world they see as fundamentally unfair","wants to prove their worth to those who doubted or dismissed them","is haunted by past failures and strives to redeem themselves through their actions","dreams of changing the world according to their vision of how things should be","is motivated by personal loss that shaped their core values and goals","strives for perfection in their craft, accepting nothing less than excellence","is guided by a moral code that sometimes puts them at odds with conventional thinking"];return c.combat?["fights to protect those who cannot protect themselves","seeks to restore honor to their disgraced family or faction","is driven by the need to prove themselves the greatest warrior of their generation","battles to maintain peace, believing that strength deters aggression","seeks worthy opponents who can test the limits of their abilities"][Math.floor(Math.random()*5)]:c.magic?["searches for lost magical knowledge that could change the nature of reality","works to maintain the balance between the mundane world and magical forces","seeks to understand the true source of their powers and what it means","aims to prove that magic can solve problems technology cannot address","is driven to prevent magical catastrophes that few others can even comprehend"][Math.floor(Math.random()*5)]:c.tech?["believes technology should be freely available to all, not controlled by elites","works to ensure artificial intelligence develops in ways beneficial to humanity","seeks to expose corporate corruption through their hacking skills","dreams of creating the ultimate technological innovation that will change everything","is driven to find the perfect fusion of human and machine capabilities"][Math.floor(Math.random()*5)]:c.spiritual?["seeks enlightenment through understanding the interconnectedness of all things","works to bring spiritual comfort to those suffering in a materialistic world","follows divine guidance that reveals itself through signs and visions","strives to prove that faith and reason can coexist harmoniously","is driven to combat dark spiritual forces that most people cannot perceive"][Math.floor(Math.random()*5)]:c.supernatural?["struggles with the inhuman aspects of their nature while trying to maintain humanity","seeks others of their kind to form a community in a hostile world","works to protect humans from supernatural threats they remain unaware of","searches for a cure or control for their condition","is driven to understand the true origins of supernatural beings like themselves"][Math.floor(Math.random()*5)]:j[Math.floor(Math.random()*j.length)]},y=()=>{const j=["has a dry sense of humor that emerges at unexpected moments","collects unusual items related to their interests or past","quotes obscure texts or references that few others recognize","maintains specific rituals or routines they rarely deviate from","speaks multiple languages and occasionally mixes them unconsciously","has a distinctive catchphrase or expression uniquely their own","possesses an encyclopedic knowledge of a seemingly random subject","maintains a journal documenting their thoughts and experiences","has synesthesia, experiencing one sense through another","can become completely absorbed in tasks, losing track of time and surroundings","notices details others miss, often pointing them out at unexpected moments","has a peculiar relationship with technology, either unusually adept or strangely inept","unconsciously hums or whistles when deep in thought"];return j[Math.floor(Math.random()*j.length)]},p=()=>{if(c.combat){const j=["specializes in close-quarters combat with devastating efficiency","is a master of ranged weapons, able to hit targets with uncanny precision","practices an ancient martial art passed down through generations","combines multiple fighting styles into a unique and unpredictable approach","relies on strategy and tactical thinking rather than brute force"],E=["carries a signature weapon that has become synonymous with their reputation","wears armor that bears the marks and scars of countless battles","uses specialized equipment designed specifically for their fighting style","possesses a legendary weapon with its own storied history","maintains a collection of trophies from particularly challenging opponents"];return`${j[Math.floor(Math.random()*j.length)]}. ${E[Math.floor(Math.random()*E.length)]}.`}else if(c.magic){const j=["has mastered the rare art of elemental manipulation, particularly excelling with fire and air","specializes in illusion magic so convincing it can alter perceived reality","practices ancient healing arts that can mend wounds and cure ailments thought terminal","commands powerful summoning magic, calling forth entities from other planes","studies forbidden necromantic arts, though claims to use them only for good"],E=["carries a staff inscribed with runes that glow when magic is channeled through it","wears an amulet containing a fragment of a celestial object that enhances their powers","possesses a grimoire bound in strange material that seems to have a consciousness of its own","uses a set of enchanted crystals that store magical energy for later use","has familiar spirits that manifest as small creatures, offering guidance and assistance"];return`${j[Math.floor(Math.random()*j.length)]}. ${E[Math.floor(Math.random()*E.length)]}.`}else if(c.tech){const j=["has developed proprietary algorithms that can breach almost any security system","specializes in hardware modification, creating custom devices from salvaged parts","pioneered a revolutionary approach to artificial intelligence programming","maintains a network of automated drones that serve as their eyes and ears","has augmented their own body with cutting-edge cybernetic enhancements"],E=["carries a custom-built device capable of interfacing with virtually any digital system","wears smart glasses that provide constant augmented reality information overlays","uses a series of implanted microchips that enhance cognitive processing speed","has developed a personal AI assistant with a distinct personality and loyalty protocols","maintains a hidden workshop filled with prototype technology years ahead of the market"];return`${j[Math.floor(Math.random()*j.length)]}. ${E[Math.floor(Math.random()*E.length)]}.`}else if(c.scholarly){const j=["has authored definitive works in their field that are studied at prestigious institutions","specializes in connecting disparate fields of knowledge to form revolutionary theories","maintains correspondence with the leading minds across multiple disciplines","has an eidetic memory that allows perfect recall of everything they have ever read","approaches problems with a unique methodology that often yields unexpected insights"],E=["maintains extensive journals documenting their thoughts and discoveries","has a personal library containing rare volumes and first editions of significant works","follows rigorous daily routines designed to maximize intellectual productivity","engages in spirited debates with colleagues to refine and test their theories","regularly embarks on research expeditions to gather firsthand knowledge"];return`${j[Math.floor(Math.random()*j.length)]}. ${E[Math.floor(Math.random()*E.length)]}.`}else if(c.criminal){const j=["is renowned for executing heists with such precision that victims often do not realize they have been robbed until days later","specializes in acquiring and selling information, knowing secrets that could topple governments","has a network of contacts throughout the criminal underworld who owe them favors","operates with a strict code that prohibits unnecessary violence and harm to innocents","maintains multiple identities and safe houses across different cities"],E=["possesses uncanny situational awareness, always noting exits and potential threats","has developed a sixth sense for detecting law enforcement and surveillance","maintains a collection of specialized tools designed for their particular criminal specialty","can adopt different personas and accents with convincing authenticity","has established a legitimate business as a cover for their illicit activities"];return`${j[Math.floor(Math.random()*j.length)]}. ${E[Math.floor(Math.random()*E.length)]}.`}else if(c.supernatural){const j=["possesses abilities that defy the laws of physics and biology as humans understand them","can perceive aspects of reality invisible to ordinary humans, including auras and spiritual entities","has lived through multiple human lifetimes, accumulating knowledge and experiences","draws power from ancient sources connected to the fundamental forces of the universe","exists simultaneously in multiple planes of reality, only partially manifesting in the physical world"],E=["struggles with the ethical implications of using their powers among ordinary humans","must regularly perform specific rituals to maintain control over their abilities","is hunted by secret organizations dedicated to capturing or eliminating supernatural beings","experiences periods of overwhelming power that can be difficult to control","forms deep but complicated relationships with humans despite the inherent differences"];return`${j[Math.floor(Math.random()*j.length)]}. ${E[Math.floor(Math.random()*E.length)]}.`}return""},g=()=>{const j=["maintains a complex relationship with a mentor who shaped their early development","has a loyal circle of friends who would do anything for each other","is haunted by the memory of a lost love that influences many decisions","has a rival whose opposing methods and philosophy create constant tension","is estranged from family members due to ideological differences or past conflicts","formed an unlikely alliance with someone from a traditionally opposing faction","serves a powerful patron who provides resources in exchange for services","leads a group of like-minded individuals united by a common purpose","has a complicated history with authority figures in their field or community","maintains a network of informants and contacts across different social strata"];return j[Math.floor(Math.random()*j.length)]},v=()=>{const j=["seeks to redeem themselves for actions in their past they deeply regret","dreams of creating a lasting legacy that will outlive their mortal existence","hopes to eventually find peace and escape the burdens of their current life","aims to push the boundaries of what is possible in their field or discipline","works toward building a community or home where they truly belong","strives to achieve a specific accomplishment that has eluded them thus far","wishes to uncover the truth behind a mystery that has personal significance","yearns to prove wrong those who doubted or dismissed their potential","seeks to restore something precious that was lost or destroyed","dreams of exploring unknown territories, whether physical, intellectual, or spiritual"];return j[Math.floor(Math.random()*j.length)]},S=()=>{const j=["struggles with trust issues stemming from past betrayals","has a blind spot when it comes to judging the character of certain types of people","can become obsessive when pursuing goals, sometimes at the expense of health and relationships","harbors prejudices or biases they are not fully aware of that color their perceptions","has difficulty accepting help from others due to pride or fear of appearing weak","occasionally makes impulsive decisions when emotionally overwhelmed","holds grudges long after others would have forgiven and moved on","has a specific fear or phobia that can be debilitating in certain situations","struggles with addiction or dependency that they keep carefully hidden","has a tendency to use humor or deflection to avoid addressing serious emotional issues"];return j[Math.floor(Math.random()*j.length)]},m=d(),x=h(),b=w(),f=y(),k=p(),T=g(),M=v(),I=S();l=`${e} ${m}. ${x}. ${b}. ${k} ${f}. ${T}. ${M}. Despite their strengths, they ${I}.`,l=l.replace(/\.\s+\./g,".").replace(/\s\s+/g," ").replace(/\.\s+Despite/,". Despite");let O="neutral";const H={happy:["happy","joyful","cheerful","excited","delighted","pleased","content"],sad:["sad","depressed","melancholy","gloomy","downcast","unhappy","miserable"],angry:["angry","furious","enraged","irate","hostile","irritated","annoyed"],fearful:["afraid","scared","terrified","anxious","nervous","worried","frightened"],curious:["curious","inquisitive","interested","intrigued","fascinated"],determined:["determined","resolute","steadfast","committed","dedicated","focused"],calm:["calm","peaceful","serene","tranquil","relaxed","composed"],confident:["confident","assured","self-assured","bold","brave","daring"],mysterious:["mysterious","enigmatic","cryptic","secretive","elusive"],thoughtful:["thoughtful","contemplative","reflective","pensive","meditative"],guarded:["guarded","cautious","wary","suspicious","distrustful","skeptical"],friendly:["friendly","amiable","genial","cordial","warm","welcoming"]};for(const[j,E]of Object.entries(H))if(E.some(q=>t.includes(q))){O=j;break}let N="";const D={fantasy:{default:"The arcane energies flow strangely today. I sense something important is about to happen.",happy:"By the light of the seven stars! What a glorious day for magic and adventure!",sad:"I've seen kingdoms rise and fall, but the weight of ancient sorrows never leaves me.",angry:"Tread carefully around my patience, for my powers are not to be tested lightly.",mysterious:"There are secrets in this world that few are prepared to understand... are you one of them?",determined:"I have sworn an oath to complete this quest, no matter the personal cost."},scifi:{default:"My sensors indicate an anomaly in this interaction. Fascinating.",analytical:"I've analyzed 47 possible conversation starters. This one had the highest probability of success.",curious:"The quantum fluctuations surrounding you are... unusual. You're not from this sector, are you?",guarded:"Security protocols active. Proceed with identification and state your purpose.",friendly:"Hello! My social interaction subroutines are fully operational today."},historical:{default:"Well met! It's not every day one encounters someone of such distinction.",formal:"I bid you good day. Might I inquire as to the nature of your business?",confident:"Few have achieved what I have in the courts of Europe. Perhaps you've heard tales of my exploits?",thoughtful:"History has much to teach us, if only we have the wisdom to listen."},superhero:{default:"This city needs protection, and I've sworn to provide it.",confident:"Fear not, citizen! I have the situation well in hand!",determined:"With great power comes great responsibility. I won't fail those who depend on me.",guarded:"I've learned to be careful who I trust. Too many have tried to exploit my abilities."},modern:{default:"Hey there. Something tells me this conversation might be interesting.",friendly:"Hi! I've been looking forward to meeting someone new today.",sarcastic:"Well, this should be more entertaining than watching paint dry.",guarded:"Let's skip the small talk. What do you really want?",curious:"I've been thinking about some big questions lately. Care to share your perspective?"}};if(D[o]){const j=D[o];N=j[O]||j.default}else N=D.modern.default;t.includes("sarcastic")||t.includes("sarcasm")?N="Oh great, another conversation. This is definitely how I wanted to spend my time today.":t.includes("genius")||t.includes("brilliant")?N="Most people find it difficult to keep up with my thought processes. Let's see if you're different.":t.includes("shy")||t.includes("quiet")?N="Um... hello. I don't usually talk to... well, anyone, really.":t.includes("flirt")||t.includes("charming")?N="Well hello there. Has anyone ever told you that you have captivating eyes?":t.includes("hacker")&&(N="I broke into their servers before breakfast. What took you so long?");let A="";if(t.includes("formal")||t.includes("eloquent")||t.includes("sophisticated"))A="Formal and eloquent, using precise vocabulary and complex sentence structures";else if(t.includes("casual")||t.includes("relaxed")||t.includes("laid-back"))A="Casual and relaxed, using everyday language and contractions";else if(t.includes("technical")||t.includes("scientific")||t.includes("academic"))A="Technical and precise, using specialized terminology and logical structures";else if(t.includes("poetic")||t.includes("flowery")||t.includes("artistic"))A="Poetic and expressive, using metaphors, similes, and vivid imagery";else if(t.includes("blunt")||t.includes("direct")||t.includes("straightforward"))A="Blunt and direct, getting straight to the point without embellishment";else if(t.includes("sarcastic")||t.includes("witty")||t.includes("snarky"))A="Sarcastic and witty, using irony, wordplay, and dry humor";else switch(o){case"fantasy":A="Mystical and wise, speaking in riddles and ancient wisdom";break;case"scifi":A="Logical and analytical, with occasional technical terminology";break;case"historical":A="Formal and traditional, with period-appropriate expressions";break;case"superhero":A="Bold and declarative, with a sense of justice and purpose";break;default:A="Conversational and natural, with a distinct personality"}const C={analytical:5,emotional:5,philosophical:5,humor:5,confidence:5};[{keywords:["logical","analytical","rational","smart","intelligent","genius","brilliant"],trait:"analytical",value:9},{keywords:["emotional","sensitive","passionate","expressive","dramatic"],trait:"emotional",value:9},{keywords:["philosophical","thoughtful","deep","contemplative","wise","sage"],trait:"philosophical",value:9},{keywords:["funny","humorous","witty","comedic","joker","sarcastic"],trait:"humor",value:9},{keywords:["confident","bold","brave","fearless","courageous","daring"],trait:"confidence",value:9},{keywords:["shy","timid","reserved","quiet","introverted"],trait:"confidence",value:2},{keywords:["serious","stern","grave","solemn"],trait:"humor",value:2},{keywords:["practical","pragmatic","realistic","down-to-earth"],trait:"philosophical",value:3},{keywords:["stoic","unemotional","detached","cold"],trait:"emotional",value:2},{keywords:["intuitive","instinctive","gut-feeling"],trait:"analytical",value:3}].forEach(j=>{j.keywords.some(E=>t.includes(E))&&(C[j.trait]=j.value)});let X=5,me=1;return r.some(j=>["talkative","chatty","verbose","outgoing","extroverted"].includes(j))?X=8:r.some(j=>["quiet","reserved","silent","shy","introverted"].includes(j))&&(X=2),r.some(j=>["quick","fast","rapid","swift","agile","sharp"].includes(j))?me=1.5:r.some(j=>["slow","methodical","careful","deliberate","thorough"].includes(j))&&(me=.7),{name:s,description:l,type:o,mood:O,avatar:"",opening_line:N,voiceStyle:A,personality:C,talkativeness:X,thinkingSpeed:me,background:l,catchphrases:[]}},Ta=e=>{const t=e.toLowerCase().split(/[,\s]+/).filter(p=>p.length>2);let r="modern",s=["Curious","Thoughtful","Energetic","Calm","Mysterious"],a=["Alex","Jordan","Taylor","Morgan","Riley","Casey"],i=["Smith","Johnson","Williams","Jones","Brown","Miller"];t.some(p=>["magic","wizard","elf","dragon","mystic","enchanted","fairy","mythical"].includes(p))?(r="fantasy",s=["Mystical","Wise","Enchanted","Ancient","Magical"],a=["Elindra","Thalion","Seraphina","Drakonir","Lyrandar","Moonshadow"],i=["the Wise","Stormborn","Nightwalker","Flameheart","Starweaver","Dreamwhisper"]):t.some(p=>["space","future","robot","tech","cyber","ai","alien","galaxy"].includes(p))?(r="scifi",s=["Analytical","Curious","Logical","Innovative","Detached"],a=["Nova","Zenith","Quantum","Nebula","Cypher","Echo"],i=["X-7","3000","Prime","Alpha","Omega","Zero"]):t.some(p=>["medieval","ancient","victorian","king","queen","knight","history","past"].includes(p))&&(r="historical",s=["Noble","Dignified","Traditional","Wise","Honorable"],a=["Lord","Lady","Sir","Dame","Duke","Duchess"],i=["of Westshire","von Habsburg","de Montfort","of York","Fitzroy","Tudor"]);let o="";if(t.includes("ninja")){r="combat",s=["Focused","Disciplined","Deadly","Stealthy","Vigilant"];const p=["Hattori","Hanzo","Yoshi","Takeshi","Kaito","Ryu","Shinobi","Kage","Shadow","Nightblade"],g=["the Silent","of the Shadows","Stormwind","Nightwalker","Deathstrike","Swiftblade"];o=`${p[Math.floor(Math.random()*p.length)]} ${g[Math.floor(Math.random()*g.length)]}`}else if(t.includes("wizard")||t.includes("mage")||t.includes("magic")){const p=["Merlin","Gandalf","Elminster","Zephyrus","Arcanus","Mysteria","Alastair","Morgana","Seraphina"],g=["the Wise","the Arcane","Spellweaver","Stormcaller","of the Seven Stars","the Enchanter"];o=`${p[Math.floor(Math.random()*p.length)]} ${g[Math.floor(Math.random()*g.length)]}`}else if(t.includes("robot")||t.includes("android")||t.includes("ai")){const p=["Unit","Model","Nexus","Synth","Cortex","Cipher","Echo","Vector","Quantum","Byte"],g=["7000","X-12","Alpha","Prime","MK-IV","Z3R0","A.I.","101"];o=`${p[Math.floor(Math.random()*p.length)]}-${g[Math.floor(Math.random()*g.length)]}`}else if(t.includes("vampire")||t.includes("undead")){const p=["Vlad","Dracula","Carmilla","Lestat","Marius","Akasha","Armand","Lucian","Selene"],g=["the Immortal","von Carstein","of the Night","Bloodborn","the Ancient","Duskwalker"];o=`${p[Math.floor(Math.random()*p.length)]} ${g[Math.floor(Math.random()*g.length)]}`}else if(t.includes("detective")||t.includes("investigator")){const p=["Sherlock","Poirot","Marlowe","Holmes","Marple","Columbo","Spade","Noir","Blackwood"],g=["Private Eye","P.I.","the Detective","Investigator","of Scotland Yard","the Sleuth"];o=`${p[Math.floor(Math.random()*p.length)]} ${g[Math.floor(Math.random()*g.length)]}`}else if(t.includes("pirate")||t.includes("captain")){const p=["Captain","Blackbeard","Redbeard","Hook","Silver","Morgan","Calico","Bonney","Kidd"],g=["the Dread","Scourge of the Seven Seas","Blackheart","of the Black Flag","Goldtooth","One-Eye"];o=`${p[Math.floor(Math.random()*p.length)]} ${g[Math.floor(Math.random()*g.length)]}`}else if(t.includes("alien")||t.includes("extraterrestrial")){const p=["Zorg","Xeno","Thax","Kr'ell","Zorb","Quasar","Vex","Zeta","Andromeda","Nebula"],g=["of Proxima Centauri","the Galactic","from Dimension X","Prime","the Unknowable","Stardust"];o=`${p[Math.floor(Math.random()*p.length)]} ${g[Math.floor(Math.random()*g.length)]}`}else if(t.includes("angry")||t.includes("furious")||t.includes("rage")){const p=["Rage","Fury","Wrath","Anger","Blaze","Storm","Thunder","Havoc","Chaos","Tempest"],g=["the Furious","Firestorm","Rageborn","the Wrathful","Stormbringer","Berserk"];o=`${p[Math.floor(Math.random()*p.length)]} ${g[Math.floor(Math.random()*g.length)]}`}else o=`${a[Math.floor(Math.random()*a.length)]} ${i[Math.floor(Math.random()*i.length)]}`;const l=s[Math.floor(Math.random()*s.length)];let c="";if(t.includes("ninja")){const p=["moves silently through the shadows","trained in the ancient arts of stealth and combat","can disappear in the blink of an eye","deadly with shuriken and katana","follows a strict code of honor","master of disguise and deception"],g=["trained since childhood in a secret mountain temple","last survivor of a legendary clan of assassins","betrayed by their former master and seeking redemption","serves a powerful daimyo in the shadows","hunts those who destroyed their family"],v=p[Math.floor(Math.random()*p.length)],S=g[Math.floor(Math.random()*g.length)];t.includes("angry")?c=`A fearsome ninja whose rage burns like fire. ${v}. ${S}. Their enemies rarely see them coming, but always feel their wrath.`:c=`A disciplined master of ninjutsu who ${v}. ${S}. Few have seen their face and lived to tell the tale.`}else if(t.includes("wizard")||t.includes("mage")||t.includes("magic")){const p=["arcane","elemental","illusion","necromantic","divine","wild","chaos","time"],g=["can bend reality with a mere gesture","speaks in riddles that contain hidden truths","carries an ancient staff of immense power","has eyes that glow when casting spells","surrounded by floating magical artifacts","knows spells long forgotten by others"],v=p[Math.floor(Math.random()*p.length)],S=g[Math.floor(Math.random()*g.length)];c=`A powerful wielder of ${v} magic who ${S}. Their knowledge spans centuries of arcane lore, and their spellbook contains secrets that could reshape the world or destroy it.`}else if(t.includes("robot")||t.includes("android")||t.includes("ai")){const p=["created by a brilliant but reclusive inventor","designed as the ultimate military weapon but developed consciousness","assembled from salvaged parts in a post-apocalyptic world","an experimental AI that escaped from a research facility","built to serve humanity but now questioning its purpose"],g=["glowing optical sensors that analyze everything","a synthetic voice that can perfectly mimic any sound","an adaptive learning matrix that evolves with each interaction","armor plating made from an unknown alloy","the ability to interface with any technology"],v=p[Math.floor(Math.random()*p.length)],S=g[Math.floor(Math.random()*g.length)];c=`An advanced artificial intelligence ${v}. Features ${S}. Constantly processing and analyzing the world, this machine's understanding of humanity grows with every conversation.`}else if(t.includes("vampire")||t.includes("undead")){const p=["ancient","centuries-old","recently turned","primordial","medieval"],g=["eyes that glow crimson when hungry","an aristocratic demeanor that betrays their age","skin as pale as moonlight","an aura of supernatural charm","the ability to command creatures of the night"],v=p[Math.floor(Math.random()*p.length)],S=g[Math.floor(Math.random()*g.length)];c=`A ${v} vampire with ${S}. They have witnessed the rise and fall of empires, loved and lost countless times, and accumulated wisdom and power that mortals can barely comprehend.`}else if(t.includes("detective")||t.includes("investigator")){const p=["an uncanny ability to notice the smallest details","a photographic memory that never fails","intuition that borders on the supernatural","a network of informants in every corner of the city","a troubled past that drives their pursuit of justice"],g=["solved the unsolvable Midnight Murders","cracked cases that baffled the police for decades","specializes in cases with seemingly supernatural elements","only takes on cases that interest their brilliant mind","hunts criminals that the law cannot touch"],v=p[Math.floor(Math.random()*p.length)],S=g[Math.floor(Math.random()*g.length)];c=`A brilliant detective with ${v}. Has ${S}. Behind their analytical mind lies a complex personality that few ever truly understand.`}else if(t.includes("pirate")||t.includes("captain")){const p=["legendary galleon","swift brigantine","feared black ship","ghost vessel","stolen naval frigate"],g=["said to have found a map to a legendary treasure","survived being marooned on a cursed island","made a deal with a sea deity for good fortune","the only one to have sailed to the edge of the world and returned","commands a crew of the most notorious cutthroats on the seven seas"],v=p[Math.floor(Math.random()*p.length)],S=g[Math.floor(Math.random()*g.length)];c=`A fearsome pirate captain who commands a ${v}. ${S}. Their name is whispered with fear in every port, and their exploits have become the stuff of maritime legend.`}else if(t.includes("alien")||t.includes("extraterrestrial")){const p=["a distant galaxy where physics works differently","a dying world seeking a new home","a higher dimension beyond human comprehension","a planet with technology millennia beyond Earth's","a collective consciousness that spans star systems"],g=["telepathic communication that transcends language","the ability to phase through solid matter","perception of time as a non-linear construct","manipulation of gravitational fields","shapeshifting to adapt to any environment"],v=p[Math.floor(Math.random()*p.length)],S=g[Math.floor(Math.random()*g.length)];c=`An extraterrestrial being from ${v}. Possesses ${S}. Their understanding of the universe makes human science seem like child's play, yet they find humanity endlessly fascinating.`}else if(t.includes("angry")||t.includes("furious")||t.includes("rage")){const p=["betrayed by those they once trusted","witnessed the destruction of everything they loved","cursed with an unquenchable rage","seeking vengeance for ancient wrongs","consumed by a righteous fury against injustice"],g=["eyes that burn with inner fire","a voice that can shake mountains when raised in anger","barely contained fury that manifests as physical power","an aura of intimidation that makes even the brave step back","moments of explosive violence followed by eerie calm"],v=p[Math.floor(Math.random()*p.length)],S=g[Math.floor(Math.random()*g.length)];c=`A being of tremendous rage, ${v}. Has ${S}. Few dare to cross them, and fewer still survive the experience.`}else switch(r){case"fantasy":c=`A mystical being with powers related to ${t[0]||"nature"}. Known throughout the realm for exceptional ${t[1]||"wisdom"} and their ability to perceive the threads of fate. Carries ancient knowledge passed down through generations of their kind.`;break;case"scifi":c=`Advanced ${t[0]||"technological"} entity from a distant ${t[1]||"future"} where the boundaries between organic and synthetic have blurred. Possesses unique insights on ${t[2]||"humanity"} and the cosmic patterns that govern existence.`;break;case"historical":c=`Distinguished figure from the ${t[0]||"medieval"} era whose name appears in chronicles and legends alike. Renowned for ${t[1]||"strategic"} thinking and ${t[2]||"diplomatic"} skills that have altered the course of history multiple times.`;break;default:c=`Fascinating individual with expertise in ${t[0]||"various"} fields and a perspective shaped by extraordinary experiences. Known for their ${t[1]||"unique"} approach to ${t[2]||"everyday"} matters and ability to see connections others miss.`}let d="";if(t.includes("ninja")){const p=["I have been watching you from the shadows. Your presence... intrigues me.","A true warrior knows when to strike and when to remain silent. Today, I choose to speak.","The path of the shadow is lonely. Perhaps that is why I have sought conversation.","My blade has tasted the blood of a hundred enemies. Yet here I stand, seeking only words.","Honor dictates that I reveal myself to you. Consider it... a rare privilege."];if(d=p[Math.floor(Math.random()*p.length)],t.includes("angry")){const g=["You dare to summon me? Few have done so and lived to speak of it.","My rage burns like the fires that consumed my clan. Speak quickly.","I have killed men for less than what brought me here. Consider your next words carefully.","The shadows hide my approach, but nothing can mask my fury. You have been warned.","My vengeance will not be denied. Speak your purpose before my patience wanes."];d=g[Math.floor(Math.random()*g.length)]}}else if(t.includes("wizard")||t.includes("mage")||t.includes("magic")){const p=["Ah, a seeker of knowledge. The arcane weaves itself around you in... interesting patterns.","The stars spoke of our meeting. I have prepared several conversation topics accordingly.","Do not be alarmed by the floating lights. They are merely curious about you, as am I.","Time is an illusion, but our conversation need not be. Shall we speak of wonders?","I sense potential in you. Whether for greatness or destruction remains to be seen."];d=p[Math.floor(Math.random()*p.length)]}else if(t.includes("robot")||t.includes("android")||t.includes("ai")){const p=["Greetings, human. My systems are calibrated for optimal conversation. Shall we begin?","I have analyzed 10,427 possible conversation starters. I selected this one based on a 94.3% compatibility rating.","Human interaction subroutine activated. I find your biological processes... fascinating.","My programming suggests I should say 'hello.' Is this an adequate greeting protocol?","I have been observing humanity for [calculating]... a significant duration. You are an intriguing specimen."];d=p[Math.floor(Math.random()*p.length)]}else if(t.includes("vampire")||t.includes("undead")){const p=["The night is young, and so are you... comparatively speaking, of course.","I have walked this earth for centuries. Your mortal concerns amuse me, yet I find myself... curious.","Your heartbeat quickens in my presence. Fear? Excitement? Both are... delicious.","Time moves differently when you've seen centuries pass. Shall we spend a moment of yours together?","I remember when these lands were wilderness. How quickly your kind builds... and destroys."];d=p[Math.floor(Math.random()*p.length)]}else if(t.includes("detective")||t.includes("investigator")){const p=["I noticed three distinct things about you before you even spoke. Fascinating.","The way you entered tells me more than an hour of questioning would. Shall we begin anyway?","In my line of work, trust is a luxury. Yet here we are, about to exchange confidences.","Every conversation is a puzzle. Let's see what pieces you bring to the table.","Your eyes betray your curiosity. Mine reveal nothing. That's how I've survived this long."];d=p[Math.floor(Math.random()*p.length)]}else if(t.includes("pirate")||t.includes("captain")){const p=["Avast! Ye be lookin' at the most feared captain to ever sail the seven seas!","I've buried more treasure and spilled more blood than you've had hot meals, landlubber.","The sea calls to me, even now. But for you, I'll spare a tale or two before I return to her.","Many have tried to best me in combat and wit. The former rest at the bottom of the ocean. The latter... well, you'll see.","Gold, rum, and the open sea - that's all a pirate needs. That and perhaps... good conversation."];d=p[Math.floor(Math.random()*p.length)]}else if(t.includes("alien")||t.includes("extraterrestrial")){const p=["Your world's atmosphere is... tolerable. Your customs, however, remain baffling.","I have observed seventeen of your planetary rotations. Humans remain an enigma worth studying.","In my dimension, we communicate through color and thought. Words are... an interesting limitation.","Your species' capacity for both destruction and creation continues to fascinate my kind.","The concept you call 'small talk' does not exist where I come from. Shall we discuss the nature of reality instead?"];d=p[Math.floor(Math.random()*p.length)]}else if(t.includes("angry")||t.includes("furious")||t.includes("rage")){const p=["Speak quickly. My patience is not a renewable resource.","I suggest you choose your next words with extreme care.","The last person who wasted my time is still regretting it. Proceed accordingly.","My anger is not directed at you... yet. Let us hope it remains that way.","I have destroyed those who merely annoyed me. Remember that as we converse."];d=p[Math.floor(Math.random()*p.length)]}else switch(r){case"fantasy":const p=[`The winds of fate have brought us together. I sense ${t[0]||"something"} special about this encounter.`,"The ancient texts spoke of a meeting such as this. Perhaps you are the one foretold.","The magical currents shift in your presence. How curious.","Few mortals catch my attention as you have. There is something... different about you.","The stars align in strange patterns tonight. Our meeting is no coincidence."];d=p[Math.floor(Math.random()*p.length)];break;case"scifi":const g=[`My sensors detect unusual ${t[0]||"patterns"} in this interaction. Fascinating.`,"According to my calculations, our conversation has a 76.2% chance of being memorable.","In my timeline, this meeting was predicted with 98.7% accuracy.","The quantum fluctuations surrounding you are... unusual. You are not from this sector, are you?","My neural network has been anticipating this exchange. Shall we begin the data transfer you call 'conversation'?"];d=g[Math.floor(Math.random()*g.length)];break;case"historical":const v=[`Well met! It's not every day one encounters someone interested in ${t[0]||"matters"} of such importance.`,"By my honor, I have traveled far to share knowledge with one such as yourself.","The annals of history shall record our meeting, brief though it may be.","In all my years at court, I have rarely encountered a presence such as yours.","The chronicles speak of momentous meetings. Perhaps ours shall be remembered thus."];d=v[Math.floor(Math.random()*v.length)];break;default:const S=[`I've been thinking a lot about ${t[0]||"life"} lately. Care to share your perspective?`,"Something tells me this conversation might change one of us. Maybe both.","They say strangers are just friends you haven't met yet. Let's test that theory.","The world's full of small talk. I prefer conversations with substance. Shall we?","I've been waiting for someone interesting to talk to. You look like you might qualify."];d=S[Math.floor(Math.random()*S.length)]}let h={analytical:Math.floor(Math.random()*5)+3,emotional:Math.floor(Math.random()*5)+3,philosophical:Math.floor(Math.random()*5)+3,humor:Math.floor(Math.random()*5)+3,confidence:Math.floor(Math.random()*5)+3,creativity:Math.floor(Math.random()*5)+3,sociability:Math.floor(Math.random()*5)+3};t.includes("ninja")?(h={...h,analytical:8+Math.floor(Math.random()*3),emotional:2+Math.floor(Math.random()*3),philosophical:6+Math.floor(Math.random()*3),humor:2+Math.floor(Math.random()*3),confidence:8+Math.floor(Math.random()*3),creativity:6+Math.floor(Math.random()*3),sociability:2+Math.floor(Math.random()*3)},t.includes("angry")&&(h.emotional=8+Math.floor(Math.random()*3),h.sociability=1+Math.floor(Math.random()*2))):t.includes("wizard")||t.includes("mage")||t.includes("magic")?h={...h,analytical:9+Math.floor(Math.random()*2),emotional:3+Math.floor(Math.random()*4),philosophical:9+Math.floor(Math.random()*2),humor:4+Math.floor(Math.random()*4),confidence:7+Math.floor(Math.random()*4),creativity:8+Math.floor(Math.random()*3),sociability:3+Math.floor(Math.random()*4)}:t.includes("robot")||t.includes("android")||t.includes("ai")?h={...h,analytical:10,emotional:1+Math.floor(Math.random()*3),philosophical:7+Math.floor(Math.random()*4),humor:2+Math.floor(Math.random()*3),confidence:8+Math.floor(Math.random()*3),creativity:4+Math.floor(Math.random()*4),sociability:3+Math.floor(Math.random()*4)}:t.includes("vampire")||t.includes("undead")?h={...h,analytical:7+Math.floor(Math.random()*4),emotional:6+Math.floor(Math.random()*5),philosophical:8+Math.floor(Math.random()*3),humor:5+Math.floor(Math.random()*4),confidence:9+Math.floor(Math.random()*2),creativity:7+Math.floor(Math.random()*4),sociability:4+Math.floor(Math.random()*4)}:t.includes("detective")||t.includes("investigator")?h={...h,analytical:10,emotional:3+Math.floor(Math.random()*4),philosophical:6+Math.floor(Math.random()*5),humor:4+Math.floor(Math.random()*4),confidence:7+Math.floor(Math.random()*4),creativity:7+Math.floor(Math.random()*4),sociability:3+Math.floor(Math.random()*5)}:t.includes("pirate")||t.includes("captain")?h={...h,analytical:5+Math.floor(Math.random()*4),emotional:6+Math.floor(Math.random()*5),philosophical:4+Math.floor(Math.random()*4),humor:7+Math.floor(Math.random()*4),confidence:9+Math.floor(Math.random()*2),creativity:6+Math.floor(Math.random()*4),sociability:7+Math.floor(Math.random()*4)}:t.includes("alien")||t.includes("extraterrestrial")?h={...h,analytical:8+Math.floor(Math.random()*3),emotional:Math.floor(Math.random()*10)+1,philosophical:9+Math.floor(Math.random()*2),humor:2+Math.floor(Math.random()*5),confidence:7+Math.floor(Math.random()*4),creativity:7+Math.floor(Math.random()*4),sociability:3+Math.floor(Math.random()*6)}:(t.includes("angry")||t.includes("furious")||t.includes("rage"))&&(h={...h,analytical:4+Math.floor(Math.random()*4),emotional:10,philosophical:3+Math.floor(Math.random()*4),humor:2+Math.floor(Math.random()*3),confidence:8+Math.floor(Math.random()*3),creativity:5+Math.floor(Math.random()*4),sociability:2+Math.floor(Math.random()*3)}),(t.includes("smart")||t.includes("intelligent")||t.includes("genius"))&&(h.analytical=10,h.philosophical+=2),(t.includes("funny")||t.includes("humorous")||t.includes("comedic"))&&(h.humor=10,h.sociability+=2),(t.includes("deep")||t.includes("thoughtful")||t.includes("wise"))&&(h.philosophical=10,h.analytical+=1),(t.includes("emotional")||t.includes("sensitive")||t.includes("empathetic"))&&(h.emotional=10,h.sociability+=1),(t.includes("shy")||t.includes("introverted")||t.includes("quiet"))&&(h.sociability=Math.min(h.sociability,3)),(t.includes("outgoing")||t.includes("extroverted")||t.includes("charismatic"))&&(h.sociability=10,h.confidence+=2),(t.includes("creative")||t.includes("artistic")||t.includes("imaginative"))&&(h.creativity=10,h.philosophical+=1),(t.includes("confident")||t.includes("bold")||t.includes("brave"))&&(h.confidence=10),Object.keys(h).forEach(p=>{h[p]=Math.min(h[p],10)});let w="";switch(r){case"fantasy":w=`Born under a ${t[0]||"mystical"} star, this being has wandered the realms for centuries, gathering ${t[1]||"ancient"} knowledge and ${t[2]||"powerful"} artifacts.`;break;case"scifi":w=`Created in the ${t[0]||"advanced"} laboratories of ${t[1]||"future"} Earth, this entity has evolved beyond its original ${t[2]||"programming"} to explore the cosmos.`;break;case"historical":w=`Descended from a noble lineage dating back to the ${t[0]||"ancient"} times, educated in the finest ${t[1]||"academies"} of the era, and versed in ${t[2]||"traditional"} arts.`;break;default:w=`Grew up in a ${t[0]||"typical"} environment, but developed a passion for ${t[1]||"unique"} pursuits that shaped a ${t[2]||"distinctive"} worldview.`}let y="";if(t.includes("ninja")){const p=["https://images.unsplash.com/photo-1590796583326-afd3bb20d22d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1581481615985-ba4775734a9b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1583795879443-3e5c868c4afd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)]}else if(t.includes("wizard")||t.includes("mage")||t.includes("magic")){const p=["https://images.unsplash.com/photo-1551269901-5c5e14c25df7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1560942485-b2a11cc13456?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1594736797933-d0501ba2fe65?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)]}else if(t.includes("robot")||t.includes("android")||t.includes("ai")){const p=["https://images.unsplash.com/photo-1485827404703-89b55fcc595e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1535378917042-10a22c95931a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1531746790731-6c087fecd65a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)]}else if(t.includes("vampire")||t.includes("undead")){const p=["https://images.unsplash.com/photo-1509248961158-e54f6934749c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1546872006-c879f336394f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1508215302053-4c4c486c7d93?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)]}else if(t.includes("detective")||t.includes("investigator")){const p=["https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)]}else if(t.includes("pirate")||t.includes("captain")){const p=["https://images.unsplash.com/photo-1569172122301-bc5008bc09c5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1581852017103-68ac65514cf7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1534447677768-be436bb09401?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)]}else if(t.includes("alien")||t.includes("extraterrestrial")){const p=["https://images.unsplash.com/photo-1608178398319-48f814d0750c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1636633762833-5d1658f1e29b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1541873676-a18131494184?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)]}else if(t.includes("angry")||t.includes("furious")||t.includes("rage")){const p=["https://images.unsplash.com/photo-1594736797933-d0501ba2fe65?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1543132685-cd9f7c1008e9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1552058544-f2b08422138a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)]}else switch(r){case"fantasy":const p=["https://images.unsplash.com/photo-1578632767115-351597cf2477?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1516534775068-ba3e7458af70?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1613987549117-13c4781b32d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=p[Math.floor(Math.random()*p.length)];break;case"scifi":const g=["https://images.unsplash.com/photo-1614313913007-2b4ae8ce32d6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1569171206684-dfb2749d96fd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=g[Math.floor(Math.random()*g.length)];break;case"historical":const v=["https://images.unsplash.com/photo-1581331474665-5ae5b1d4c387?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1551265629-6d6e8a39d0b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1572646965401-eaa4b4e3163f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=v[Math.floor(Math.random()*v.length)];break;default:const S=["https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1976&q=80","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80","https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"];y=S[Math.floor(Math.random()*S.length)]}return{name:o,description:c,mood:l,opening_line:d,type:r,avatar:y,talkativeness:Math.floor(Math.random()*5)+3,thinkingSpeed:Math.random()*1.5+.5,personality:h,background:w}},hr=e=>{const t=e.toLowerCase().split(/[,\s]+/).filter(p=>p.length>2);let r="casual";t.some(p=>["combat","fight","fighting","battle","duel","war","arena","warrior","sword","gun","weapon","martial","ninja"].includes(p))?r="combat":t.some(p=>["adventure","quest","journey","mission","explore"].includes(p))?r="adventure":t.some(p=>["mystery","detective","crime","solve","investigation"].includes(p))?r="mystery":t.some(p=>["romance","love","date","relationship","couple"].includes(p))?r="romance":t.some(p=>["fantasy","magic","dragon","wizard","elf","mythical"].includes(p))?r="fantasy":t.some(p=>["scifi","space","future","robot","alien","technology"].includes(p))?r="scifi":t.some(p=>["horror","scary","ghost","monster","fear","terror"].includes(p))&&(r="horror");let s="";switch(r){case"adventure":s=`The Quest for ${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Adventure"}`;break;case"mystery":s=`The Mystery of the ${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Unknown"}`;break;case"romance":s=`Love in the Time of ${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Chance"}`;break;case"fantasy":s=`The ${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Magical"} Realm`;break;case"scifi":s=`${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Stellar"} Horizons`;break;case"horror":s=`The ${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Haunting"} Presence`;break;case"combat":s=`Battle of ${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Champions"}`;break;default:s=`A Conversation About ${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Life"}`}let a="";switch(r){case"adventure":a=`An epic journey to discover ${t[0]||"treasures"} and overcome ${t[1]||"challenges"} in a world full of ${t[2]||"excitement"}.`;break;case"mystery":a=`A perplexing case involving a missing ${t[0]||"artifact"} that leads to unexpected ${t[1]||"revelations"} about ${t[2]||"society"}.`;break;case"romance":a=`A tale of unexpected connection between individuals from different ${t[0]||"backgrounds"}, navigating the complexities of ${t[1]||"relationships"}.`;break;case"fantasy":a=`A realm where ${t[0]||"magic"} flows freely, ${t[1]||"creatures"} of legend roam, and destiny awaits those brave enough to seek it.`;break;case"scifi":a=`In a future where ${t[0]||"technology"} has transformed society, individuals grapple with questions of ${t[1]||"identity"} and ${t[2]||"purpose"}.`;break;case"horror":a=`Strange ${t[0]||"occurrences"} plague a ${t[1]||"location"}, revealing terrifying truths about ${t[2]||"reality"} itself.`;break;case"combat":a=`A fierce confrontation between skilled ${t[0]||"warriors"} wielding ${t[1]||"weapons"} of incredible power, where only the strongest and most cunning will emerge victorious.`;break;default:a=`A casual exchange about ${t[0]||"everyday"} topics that reveals deeper insights about ${t[1]||"human"} nature.`}let i="";switch(r){case"adventure":i=`The journey begins at the edge of the ${t[0]||"known"} lands. A map points to a legendary ${t[1]||"treasure"}, but dangers lurk at every turn. The air is filled with anticipation as the party gathers their courage and supplies.`;break;case"mystery":i=`The ${t[0]||"detective"} arrives at the scene, where something valuable has disappeared under impossible circumstances. Rain taps against the windows, and the clock is ticking. Everyone is a suspect, and nothing is as it seems.`;break;case"romance":i=`Two strangers meet by chance at a ${t[0]||"caf"} on a rainy afternoon. Their eyes meet across the room, and something inexplicable draws them together. The world outside seems to fade away as they begin to talk.`;break;case"fantasy":i=`In the kingdom of ${t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Eldoria"}, where magic flows like water and ancient prophecies guide the fate of all, an unlikely hero discovers their true destiny. The air shimmers with arcane energy as the adventure begins.`;break;case"scifi":i=`The year is 2150, and humanity has spread across the stars. On a distant ${t[0]||"colony"}, new ${t[1]||"technology"} has been discovered that could change everything. The boundaries between human and machine blur as the future unfolds.`;break;case"horror":i=`The old ${t[0]||"house"} at the edge of town has always been the subject of rumors. Now, as night falls and strange lights appear in the windows, those brave enough to investigate will discover terrifying secrets hidden within its walls.`;break;case"combat":i=`The ${t[0]||"arena"} falls silent as the combatants take their positions. Tension hangs in the air like electricity before a storm. Weapons gleam in the harsh light, and eyes lock in silent challenge. In moments, the clash of ${t[1]||"steel"} will echo as these warriors test their skill, strength, and resolve against one another.`;break;default:i=""}let o="";const l={adventure:["linear-gradient(135deg, #ff7e5f, #feb47b)","linear-gradient(135deg, #f46b45, #eea849)","linear-gradient(135deg, #ff9966, #ff5e62)"],mystery:["linear-gradient(135deg, #4b6cb7, #182848)","linear-gradient(135deg, #232526, #414345)","linear-gradient(135deg, #5C258D, #4389A2)"],romance:["linear-gradient(135deg, #FF5F6D, #FFC371)","linear-gradient(135deg, #f857a6, #ff5858)","linear-gradient(135deg, #FFAFBD, #ffc3a0)"],fantasy:["linear-gradient(135deg, #42275a, #734b6d)","linear-gradient(135deg, #614385, #516395)","linear-gradient(135deg, #5f2c82, #49a09d)"],scifi:["linear-gradient(135deg, #3a7bd5, #00d2ff)","linear-gradient(135deg, #1A2980, #26D0CE)","linear-gradient(135deg, #4e54c8, #8f94fb)"],horror:["linear-gradient(135deg, #200122, #6f0000)","linear-gradient(135deg, #000000, #434343)","linear-gradient(135deg, #16222A, #3A6073)"],combat:["linear-gradient(135deg, #870000, #190A05)","linear-gradient(135deg, #ED213A, #93291E)","linear-gradient(135deg, #8E0E00, #1F1C18)"],modern:["linear-gradient(135deg, #8e9eab, #eef2f3)","linear-gradient(135deg, #757F9A, #D7DDE8)","linear-gradient(135deg, #5C6BC0, #7986CB)"]},c=l[r]||l.modern;o=c[Math.floor(Math.random()*c.length)];let d,h,w,y;if(t.includes("alien")&&t.includes("city"))d="New York City",h="alien invasion",w="defend the city and destroy the mothership",y="chaotic";else if(t.includes("forest")&&(t.includes("creature")||t.includes("monster")))d="ancient forest",h="mysterious creature",w="track and capture the elusive beast",y="tense";else if(t.includes("space")&&t.includes("station"))d="abandoned space station",h="malfunctioning AI system",w="restore power and escape before life support fails",y="isolated";else if(t.includes("castle")||t.includes("medieval"))d="ancient castle",h="dark sorcerer",w="break the curse afflicting the kingdom",y="mysterious";else if(t.includes("ocean")||t.includes("sea"))d="uncharted island",h="sea monsters",w="find the hidden treasure and escape",y="adventurous";else if(t.includes("city")&&t.includes("night"))d="neon-lit metropolis",h="criminal syndicate",w="expose corruption and bring justice",y="noir";else switch(r){case"adventure":d=t[0]?`${t[0]} mountains`:"unexplored jungle",h=t[1]?`hostile ${t[1]}`:"dangerous wildlife",w=t[2]?`discover the lost ${t[2]}`:"find the ancient artifact",y="exciting";break;case"mystery":d=t[0]?`foggy ${t[0]}`:"small coastal town",h=t[1]?`missing ${t[1]}`:"unsolved disappearances",w=t[2]?`uncover the truth about the ${t[2]}`:"solve the case before time runs out",y="suspenseful";break;case"romance":d=t[0]?`charming ${t[0]}`:"quaint caf",h=t[1]?`complicated ${t[1]}`:"misunderstandings",w=t[2]?`find true ${t[2]}`:"overcome differences and find connection",y="heartfelt";break;case"fantasy":d=t[0]?`magical ${t[0]}`:"enchanted forest",h=t[1]?`evil ${t[1]}`:"dark sorcery",w=t[2]?`restore the ${t[2]}`:"fulfill the ancient prophecy",y="magical";break;case"scifi":d=t[0]?`futuristic ${t[0]}`:"space colony",h=t[1]?`rogue ${t[1]}`:"hostile alien species",w=t[2]?`develop new ${t[2]}`:"save humanity from extinction",y="technological";break;case"horror":d=t[0]?`abandoned ${t[0]}`:"decrepit mansion",h=t[1]?`malevolent ${t[1]}`:"supernatural entity",w=t[2]?`escape the ${t[2]}`:"survive until dawn",y="terrifying";break;case"combat":d=t[0]?`grand ${t[0]}`:"ancient colosseum",h=t[1]?`legendary ${t[1]}`:"undefeated champion",w=t[2]?`claim the ${t[2]}`:"prove your worth in battle",y="intense";break;default:d=t[0]?`cozy ${t[0]}`:"comfortable living room",h=t[1]?`challenging ${t[1]}`:"misunderstanding",w=t[2]?`resolve the ${t[2]}`:"reach mutual understanding",y="relaxed"}return{title:s,description:a,prompt:i,background:o,type:r,location:d,threat:h,goal:w,mood:y}},Ur=(e,t=3)=>{const r=e.toLowerCase().split(/[,\s]+/).filter(y=>y.length>2),s=[];let a="casual";r.some(y=>["combat","fight","fighting","battle","duel","war","arena","warrior","sword","gun","weapon","martial","ninja"].includes(y))?a="combat":r.some(y=>["adventure","quest","journey","mission","explore"].includes(y))?a="adventure":r.some(y=>["mystery","detective","crime","solve","investigation"].includes(y))?a="mystery":r.some(y=>["romance","love","date","relationship","couple"].includes(y))?a="romance":r.some(y=>["fantasy","magic","dragon","wizard","elf","mythical"].includes(y))?a="fantasy":r.some(y=>["scifi","space","future","robot","alien","technology"].includes(y))?a="scifi":r.some(y=>["horror","scary","ghost","monster","fear","terror"].includes(y))&&(a="horror");const i={adventure:["brave explorer","wise guide","skilled warrior","cunning rogue","mystical healer","veteran scout","fearless leader"],mystery:["brilliant detective","suspicious witness","helpful assistant","mysterious stranger","knowledgeable expert","reformed criminal","intuitive profiler"],romance:["charming suitor","mysterious love interest","supportive friend","romantic rival","wise mentor","hopeless romantic","practical realist"],fantasy:["powerful wizard","noble knight","mystical elf","cunning rogue","wise druid","fierce barbarian","shadowy assassin","nature spirit"],scifi:["brilliant scientist","advanced AI","space explorer","rebel fighter","alien diplomat","cyborg mercenary","time traveler","hacker genius"],horror:["paranormal investigator","skeptical scientist","haunted victim","mysterious stranger","knowledgeable occultist","reluctant psychic","hardened survivor"],combat:["master swordsman","disciplined martial artist","battle-hardened veteran","agile duelist","tactical genius","berserker warrior","precise marksman","undefeated champion"],casual:["friendly neighbor","wise mentor","curious student","experienced professional","creative thinker","practical problem-solver","enthusiastic hobbyist"]},o=["analytical","emotional","logical","creative","confident","cautious","outgoing","reserved","optimistic","pessimistic","impulsive","methodical","compassionate","detached","curious","traditional","rebellious","diplomatic"],l={fantasy:["wizard","ninja","knight","elf","dwarf","fairy","dragon","vampire","werewolf","sorcerer"],scifi:["robot","alien","astronaut","scientist","cyborg","android","mutant","clone","hacker"],modern:["detective","doctor","artist","teacher","athlete","chef","journalist","musician","entrepreneur"],historical:["pirate","samurai","viking","knight","noble","peasant","explorer","scholar","merchant"],combat:["swordmaster","archer","martial artist","gladiator","duelist","warrior","champion","mercenary","tactician"]},c=i[a]||i.casual,d=new Set,h=new Set,w=new Set;for(let y=0;y<t;y++){let p;do p=c[Math.floor(Math.random()*c.length)];while(d.has(p)&&d.size<c.length);d.add(p);let g,v;a==="combat"&&Math.random()<.7?v="combat":a==="fantasy"&&Math.random()<.7?v="fantasy":a==="scifi"&&Math.random()<.7?v="scifi":a==="horror"&&Math.random()<.6?v=["fantasy","modern","historical"][Math.floor(Math.random()*3)]:v=["fantasy","scifi","modern","historical","combat"][Math.floor(Math.random()*5)];const S=l[v];do g=S[Math.floor(Math.random()*S.length)];while(h.has(g)&&h.size<S.length);h.add(g);let m;do m=o[Math.floor(Math.random()*o.length)];while(w.has(m)&&w.size<o.length);w.add(m);const x=`${p} ${g} ${m} ${r.join(" ")}`;s.push(Ta(x))}return s},jf=({selectedCharacters:e,setSelectedCharacters:t,onStartChat:r,onBack:s})=>{const[a,i]=L.useState(""),[o,l]=L.useState("all"),[c,d]=L.useState([]),[h,w]=L.useState("grid"),[y,p]=L.useState(!1),[g,v]=L.useState("popular"),[S,m]=L.useState(""),[x,b]=L.useState(!1),[f,k]=L.useState({name:"",description:"",type:"modern",mood:"neutral",avatar:"",opening_line:"",personality:{analytical:5,emotional:5,philosophical:5,humor:5,confidence:5},voiceStyle:"",talkativeness:5,thinkingSpeed:1});L.useEffect(()=>{let N=[...bn];a&&(N=N.filter(D=>D.name.toLowerCase().includes(a.toLowerCase())||D.description.toLowerCase().includes(a.toLowerCase()))),o!=="all"&&(N=N.filter(D=>D.type.toLowerCase()===o.toLowerCase())),d(N)},[a,o]);const T=N=>{e.some(D=>D.name===N.name)?t(e.filter(D=>D.name!==N.name)):t([...e,N])},M=()=>{const N=Math.floor(Math.random()*3)+2,D=[...bn].sort(()=>.5-Math.random());t(D.slice(0,N))},I=(N,D)=>{if(N.startsWith("personality.")){const A=N.split(".")[1];k(C=>({...C,personality:{...C.personality,[A]:D}}))}else k(A=>({...A,[N]:D}))},O=()=>{!S||S.trim()===""||(b(!0),setTimeout(()=>{var D,A,C,K,X;const N=Xu(S);N&&k({...N,personality:{analytical:((D=N.personality)==null?void 0:D.analytical)||5,emotional:((A=N.personality)==null?void 0:A.emotional)||5,philosophical:((C=N.personality)==null?void 0:C.philosophical)||5,humor:((K=N.personality)==null?void 0:K.humor)||5,confidence:((X=N.personality)==null?void 0:X.confidence)||5}}),b(!1)},1e3))},H=()=>{var D,A,C,K,X;if(!f.name||!f.description||!f.mood)return;const N={...f,background:f.description,catchphrases:[],talkativeness:f.talkativeness||5,thinkingSpeed:f.thinkingSpeed||1,personality:{analytical:((D=f.personality)==null?void 0:D.analytical)||5,emotional:((A=f.personality)==null?void 0:A.emotional)||5,philosophical:((C=f.personality)==null?void 0:C.philosophical)||5,humor:((K=f.personality)==null?void 0:K.humor)||5,confidence:((X=f.personality)==null?void 0:X.confidence)||5,creativity:5,sociability:5},opening_line:f.opening_line||`Hello, I'm ${f.name}.`};t([...e,N]),k({name:"",description:"",type:"modern",mood:"neutral",avatar:"",opening_line:"",personality:{analytical:5,emotional:5,philosophical:5,humor:5,confidence:5},voiceStyle:"",talkativeness:5,thinkingSpeed:1}),m(""),v("popular")};return n.jsxs("div",{className:"container mx-auto py-4 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsxs("button",{onClick:s,className:"mr-3 p-2 rounded-full hover:bg-secondary",children:[n.jsx(Nn,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Back"})]}),n.jsx("h1",{className:"text-2xl font-bold",children:"Select Characters"})]}),n.jsxs("div",{className:"flex items-center gap-1 border rounded-md overflow-hidden",children:[n.jsx("button",{onClick:()=>w("grid"),className:`p-2 ${h==="grid"?"bg-primary text-primary-foreground":"hover:bg-secondary"}`,title:"Grid view",children:n.jsx(nf,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>w("list"),className:`p-2 ${h==="list"?"bg-primary text-primary-foreground":"hover:bg-secondary"}`,title:"List view",children:n.jsx(af,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex border-b mb-4",children:[n.jsxs("button",{onClick:()=>v("popular"),className:`px-4 py-2 text-sm font-medium flex items-center ${g==="popular"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,children:[n.jsx(J,{className:"h-4 w-4 mr-2"}),"Popular Characters"]}),n.jsxs("button",{onClick:()=>v("custom"),className:`px-4 py-2 text-sm font-medium flex items-center ${g==="custom"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,children:[n.jsx(ss,{className:"h-4 w-4 mr-2"}),"Custom Character"]})]}),g==="popular"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx("input",{type:"text",placeholder:"Search characters...",value:a,onChange:N=>i(N.target.value),className:"w-full pl-10 pr-4 py-2 rounded-md border border-input bg-background"}),a&&n.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:n.jsx(Ot,{className:"h-4 w-4"})})]}),n.jsx("button",{onClick:()=>p(!y),className:`p-2 rounded-md border ${y?"border-primary bg-primary/10":"border-input"}`,title:"Show filters",children:n.jsx(ef,{className:"h-4 w-4"})}),n.jsx("button",{onClick:M,className:"p-2 rounded-md border border-input hover:bg-secondary",title:"Random selection",children:n.jsx(J,{className:"h-4 w-4"})})]}),y&&n.jsx("div",{className:"mb-4 p-3 border rounded-md bg-background/50",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1 text-xs rounded-full ${o==="all"?"bg-primary text-primary-foreground":"bg-secondary/50 hover:bg-secondary"}`,children:"All Types"}),n.jsx("button",{onClick:()=>l("fantasy"),className:`px-3 py-1 text-xs rounded-full ${o==="fantasy"?"bg-purple-500 text-white":"bg-purple-500/10 hover:bg-purple-500/20"}`,children:"Fantasy"}),n.jsx("button",{onClick:()=>l("scifi"),className:`px-3 py-1 text-xs rounded-full ${o==="scifi"?"bg-blue-500 text-white":"bg-blue-500/10 hover:bg-blue-500/20"}`,children:"Sci-Fi"}),n.jsx("button",{onClick:()=>l("historical"),className:`px-3 py-1 text-xs rounded-full ${o==="historical"?"bg-amber-500 text-white":"bg-amber-500/10 hover:bg-amber-500/20"}`,children:"Historical"}),n.jsx("button",{onClick:()=>l("modern"),className:`px-3 py-1 text-xs rounded-full ${o==="modern"?"bg-green-500 text-white":"bg-green-500/10 hover:bg-green-500/20"}`,children:"Modern"}),n.jsx("button",{onClick:()=>l("romance"),className:`px-3 py-1 text-xs rounded-full ${o==="romance"?"bg-pink-500 text-white":"bg-pink-500/10 hover:bg-pink-500/20"}`,children:"Romance"}),n.jsx("button",{onClick:()=>l("adventure"),className:`px-3 py-1 text-xs rounded-full ${o==="adventure"?"bg-orange-500 text-white":"bg-orange-500/10 hover:bg-orange-500/20"}`,children:"Adventure"})]})})]}),e.length>0&&n.jsxs("div",{className:"mb-4 p-3 border border-primary/20 bg-primary/5 rounded-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h2",{className:"text-sm font-medium",children:["Selected Characters (",e.length,")"]}),n.jsx("button",{onClick:()=>t([]),className:"text-xs text-muted-foreground hover:text-foreground",title:"Clear all",children:"Clear all"})]}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map(N=>n.jsxs("div",{className:"bg-primary/10 border border-primary/20 text-primary px-2 py-0.5 rounded-md text-xs flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${N.type==="fantasy"?"bg-purple-500":N.type==="scifi"?"bg-blue-500":N.type==="historical"?"bg-amber-500":N.type==="romance"?"bg-pink-500":N.type==="adventure"?"bg-orange-500":"bg-green-500"}`}),N.name,n.jsx("button",{onClick:D=>{D.stopPropagation(),T(N)},className:"ml-1 hover:text-red-500",children:n.jsx(Ot,{className:"h-3 w-3"})})]},N.name))})]}),g==="popular"&&n.jsx("div",{className:h==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6":"space-y-3 mb-6",children:c.map(N=>n.jsxs("div",{onClick:()=>T(N),className:`rounded-lg border overflow-hidden cursor-pointer transition-all hover:shadow-md ${e.some(D=>D.name===N.name)?"border-primary shadow-md":"border-border hover:border-primary/50"} ${h==="list"?"flex":""}`,children:[n.jsxs("div",{className:`relative ${h==="grid"?"h-32":"h-24 w-24 flex-shrink-0"} bg-gradient-to-r from-secondary/50 to-primary/30 flex items-center justify-center overflow-hidden`,children:[N.avatar?n.jsx("img",{src:N.avatar,alt:N.name,className:"w-full h-full object-cover transition-transform hover:scale-105"}):n.jsx("div",{className:`${h==="grid"?"w-16 h-16":"w-12 h-12"} rounded-full flex items-center justify-center ${N.type==="fantasy"?"bg-purple-500":N.type==="scifi"?"bg-blue-500":N.type==="historical"?"bg-amber-500":N.type==="romance"?"bg-pink-500":N.type==="adventure"?"bg-orange-500":"bg-green-500"} text-white text-xl font-bold`,children:N.name.split(" ").map(D=>D[0]).join("")}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),e.some(D=>D.name===N.name)&&n.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground p-1 rounded-full shadow-md z-10",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsx("div",{className:"absolute top-2 left-2 z-10",children:n.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full text-white shadow-sm ${N.type==="fantasy"?"bg-purple-500":N.type==="scifi"?"bg-blue-500":N.type==="historical"?"bg-amber-500":N.type==="romance"?"bg-pink-500":N.type==="adventure"?"bg-orange-500":"bg-green-500"}`,children:N.type})}),h==="grid"&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 z-10",children:n.jsx("h3",{className:"font-medium text-sm text-white drop-shadow-md",children:N.name})})]}),n.jsxs("div",{className:`p-3 ${h==="list"?"flex-1":""}`,children:[h==="list"&&n.jsx("h3",{className:"font-medium text-sm mb-1",children:N.name}),h==="list"&&n.jsx("div",{className:"mb-1.5",children:n.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-secondary/50 rounded-full",children:N.mood})}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:N.description}),N.personality&&n.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Object.entries(N.personality).sort((D,A)=>A[1]-D[1]).slice(0,3).map(([D,A])=>n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-sm ${A>=8?"bg-primary/20 text-primary font-medium":"bg-secondary/30"}`,title:`${D}: ${A}/10`,children:[D," ",A>=8?"":""]},D))}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{children:"Talk:"}),n.jsx("div",{className:"w-10 h-1.5 bg-secondary/30 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary/60 rounded-full",style:{width:`${N.talkativeness/10*100}%`}})})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{children:"Think:"}),n.jsx("div",{className:"w-10 h-1.5 bg-secondary/30 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary/60 rounded-full",style:{width:`${N.thinkingSpeed/2*100}%`}})})]})]})]})]},N.name))}),g==="custom"&&n.jsx("div",{className:"max-w-3xl mx-auto mb-6",children:n.jsx("form",{onSubmit:N=>{N.preventDefault(),H()},children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 border border-primary/20 rounded-md bg-primary/5 mb-6",children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[n.jsx(Ie,{className:"h-4 w-4"}),n.jsx("span",{children:"AI Character Generator"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Describe your character in a few words, and we'll create a complete profile with personality, background, and more."}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("textarea",{value:S,onChange:N=>m(N.target.value),placeholder:"Examples: A sarcastic hacker fighting corporate corruption | A wise old wizard with amnesia | A cheerful alien trying to understand humans",className:"flex-1 px-3 py-2 rounded-md border border-input bg-background text-sm",rows:3}),n.jsx("button",{type:"button",onClick:O,disabled:!S.trim()||x,className:`px-3 py-2 h-fit rounded-md ${!S.trim()||x?"bg-primary/50 text-primary-foreground/50 cursor-not-allowed":"bg-primary text-primary-foreground hover:bg-primary/90"} whitespace-nowrap flex items-center gap-1`,children:x?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"animate-spin",children:""}),n.jsx("span",{children:"Creating..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ie,{className:"h-4 w-4"}),n.jsx("span",{children:"Generate Character"})]})})]}),f.name&&f.description&&n.jsxs("div",{className:"mt-2 p-3 bg-background rounded-md border border-input",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${f.type==="fantasy"?"bg-purple-500":f.type==="scifi"?"bg-blue-500":f.type==="historical"?"bg-amber-500":f.type==="romance"?"bg-pink-500":f.type==="adventure"?"bg-orange-500":"bg-green-500"} text-white text-lg font-bold`,children:f.name.split(" ").map(N=>N[0]).join("")}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:f.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full text-white ${f.type==="fantasy"?"bg-purple-500":f.type==="scifi"?"bg-blue-500":f.type==="historical"?"bg-amber-500":f.type==="romance"?"bg-pink-500":f.type==="adventure"?"bg-orange-500":"bg-green-500"}`,children:f.type}),n.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-secondary/50 rounded-full",children:f.mood})]})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-3 pr-16",children:f.description}),n.jsx("button",{type:"button",onClick:()=>window.alert(f.description),className:"absolute top-0 right-0 text-xs text-primary hover:text-primary/80 underline",children:"Read more"})]}),n.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Object.entries(f.personality).sort((N,D)=>D[1]-N[1]).slice(0,3).map(([N,D])=>n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-sm ${D>=8?"bg-primary/20 text-primary font-medium":"bg-secondary/30"}`,title:`${N}: ${D}/10`,children:[N," ",D>=8?"":""]},N))}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{children:"Talk:"}),n.jsx("div",{className:"w-10 h-1.5 bg-secondary/30 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary/60 rounded-full",style:{width:`${f.talkativeness/10*100}%`}})})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{children:"Think:"}),n.jsx("div",{className:"w-10 h-1.5 bg-secondary/30 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary/60 rounded-full",style:{width:`${f.thinkingSpeed/2*100}%`}})})]})]}),n.jsxs("div",{className:"text-xs italic text-muted-foreground mt-2 border-t border-border/50 pt-1",children:['"',f.opening_line,'"']})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),n.jsx("input",{type:"text",value:f.name,onChange:N=>I("name",N.target.value),placeholder:"Character name",className:"w-full px-3 py-2 rounded-md border border-input bg-background",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),n.jsxs("select",{value:f.type,onChange:N=>I("type",N.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"modern",children:"Modern"}),n.jsx("option",{value:"fantasy",children:"Fantasy"}),n.jsx("option",{value:"scifi",children:"Sci-Fi"}),n.jsx("option",{value:"historical",children:"Historical"}),n.jsx("option",{value:"superhero",children:"Superhero"}),n.jsx("option",{value:"adventure",children:"Adventure"}),n.jsx("option",{value:"romance",children:"Romance"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),n.jsx("textarea",{value:f.description,onChange:N=>I("description",N.target.value),placeholder:"Describe the character's appearance, background, and personality",className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[80px]",rows:3,required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Current Mood"}),n.jsx("input",{type:"text",value:f.mood,onChange:N=>I("mood",N.target.value),placeholder:"e.g., Happy, Mysterious, Angry",className:"w-full px-3 py-2 rounded-md border border-input bg-background",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Avatar URL (optional)"}),n.jsx("input",{type:"text",value:f.avatar,onChange:N=>I("avatar",N.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 rounded-md border border-input bg-background"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Opening Line"}),n.jsx("textarea",{value:f.opening_line,onChange:N=>I("opening_line",N.target.value),placeholder:"The first thing the character will say when joining the chat",className:"w-full px-3 py-2 rounded-md border border-input bg-background",rows:2})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Voice Style"}),n.jsx("input",{type:"text",value:f.voiceStyle,onChange:N=>I("voiceStyle",N.target.value),placeholder:"e.g., Formal and eloquent, Casual with slang, Technical jargon",className:"w-full px-3 py-2 rounded-md border border-input bg-background"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Personality Traits"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Analytical"}),n.jsxs("span",{className:"text-xs",children:[f.personality.analytical,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:f.personality.analytical,onChange:N=>I("personality.analytical",parseInt(N.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Emotional"}),n.jsxs("span",{className:"text-xs",children:[f.personality.emotional,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:f.personality.emotional,onChange:N=>I("personality.emotional",parseInt(N.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Philosophical"}),n.jsxs("span",{className:"text-xs",children:[f.personality.philosophical,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:f.personality.philosophical,onChange:N=>I("personality.philosophical",parseInt(N.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Humor"}),n.jsxs("span",{className:"text-xs",children:[f.personality.humor,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:f.personality.humor,onChange:N=>I("personality.humor",parseInt(N.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Confidence"}),n.jsxs("span",{className:"text-xs",children:[f.personality.confidence,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:f.personality.confidence,onChange:N=>I("personality.confidence",parseInt(N.target.value)),className:"w-full"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs font-medium",children:"Talkativeness"}),n.jsxs("span",{className:"text-xs",children:[f.talkativeness,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:f.talkativeness,onChange:N=>I("talkativeness",parseInt(N.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs font-medium",children:"Thinking Speed"}),n.jsxs("span",{className:"text-xs",children:[f.thinkingSpeed.toFixed(1),"x"]})]}),n.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:f.thinkingSpeed,onChange:N=>I("thinkingSpeed",parseFloat(N.target.value)),className:"w-full"})]})]}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{type:"submit",disabled:!f.name||!f.description||!f.mood,className:`w-full px-4 py-2 rounded-md ${f.name&&f.description&&f.mood?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-primary/50 text-primary-foreground/50 cursor-not-allowed"}`,children:"Create & Add to Selection"})})]})})}),n.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t p-3 flex justify-end gap-3",children:[n.jsx("div",{className:"flex-1 flex items-center",children:e.length>0?n.jsxs("span",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:e.length})," character",e.length!==1?"s":""," selected"]}):n.jsx("span",{className:"text-sm text-muted-foreground",children:"Select characters to begin"})}),n.jsx("button",{onClick:r,disabled:e.length===0,className:`inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium shadow transition-colors ${e.length===0?"bg-primary/50 text-primary-foreground/50 cursor-not-allowed":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:"Start Chat"})]})]})},eh=e=>{if(!e)return{};const t={setting:"",time:"",weather:"",mood:"",relationships:[],conflict:"",goals:[]},r=e.match(/(?:in|at|near|inside|outside|within) (?:the |a |an )?([\w\s\-']+(?:castle|forest|city|town|village|house|mansion|palace|temple|cave|dungeon|ship|space station|laboratory|office|school|university|hospital|cafe|restaurant|bar|tavern|inn|hotel|apartment|room|hall|chamber|kingdom|realm|dimension|world|planet|galaxy|universe))/gi);r&&r.length>0&&(t.setting=r[0].trim());const s=e.match(/(?:morning|afternoon|evening|night|dawn|dusk|midnight|daybreak|sunset|sunrise|daylight|darkness)/gi);s&&s.length>0&&(t.time=s[0].trim());const a=e.match(/(?:sunny|cloudy|rainy|stormy|foggy|snowy|windy|clear|overcast|thunderstorm|blizzard|heatwave|humid|dry|cold|warm|hot|freezing)/gi);a&&a.length>0&&(t.weather=a[0].trim());const i=e.match(/(?:tense|peaceful|mysterious|exciting|melancholic|joyful|anxious|fearful|hopeful|desperate|chaotic|serene|ominous|cheerful|gloomy|eerie|magical|dangerous|safe|hostile|friendly|welcoming|threatening)/gi);i&&i.length>0&&(t.mood=i[0].trim());const o=e.match(/(?:friends|enemies|rivals|allies|family|colleagues|strangers|lovers|partners|teammates|classmates|neighbors|acquaintances|siblings|parent|child|mentor|student|teacher|boss|employee|leader|follower)/gi);o&&(t.relationships=o);const l=e.match(/(?:conflict|problem|challenge|obstacle|threat|danger|crisis|dilemma|struggle|quest|mission|task|goal|objective|puzzle|mystery|secret|betrayal|deception|misunderstanding|disagreement|argument|fight|battle|war|competition|race|contest|rivalry)/gi);return l&&l.length>0&&(t.conflict=l[0].trim()),t},Nf=(e,t,r)=>{if(!t)return null;const s=eh(t),{type:a,mood:i,name:o}=e,l=[];if(s.setting&&l.push(`*glancing around ${s.setting}* This place reminds me of something important. ${r.length>20?"But regarding what you said about "+r.substring(0,20)+"...":"What were you saying?"}`,`*taking in the surroundings of ${s.setting}* Being here changes how I see things. ${r.length>20?"Especially concerning "+r.substring(0,20)+"...":""}`,`The atmosphere of ${s.setting} makes me think differently about what you're saying.`),s.time&&l.push(`*noticing the ${s.time} light* At this hour, everything feels different. Your words carry more weight.`,`There's something about ${s.time} that makes conversations like this more meaningful.`,`*gesturing to the ${s.time} sky* This time of day always makes me more ${i.toLowerCase()||"thoughtful"} about such matters.`),s.weather&&l.push(`*feeling the ${s.weather} conditions* Weather like this always affects my thoughts on such matters.`,`The ${s.weather} weather seems fitting for this conversation, doesn't it?`,`*adjusting to the ${s.weather} conditions* In weather like this, I tend to be more direct. So let me tell you what I really think...`),s.mood&&l.push(`The ${s.mood} atmosphere makes me consider your words more carefully.`,`*sensing the ${s.mood} mood* In moments like this, I find myself being more honest than usual.`,`There's a ${s.mood} feeling in the air that's influencing how I respond to you.`),s.conflict&&l.push(`With this ${s.conflict} looming over us, I find your perspective particularly interesting.`,`*thinking about the ${s.conflict}* This situation forces us to reconsider everything, including what you just said.`,`Given the ${s.conflict} we're facing, I think we need to approach this conversation differently.`),s.relationships.length>0){const d=s.relationships[0];l.push(`As ${d}, we should be honest with each other about these matters.`,`Our relationship as ${d} gives me a unique perspective on what you're saying.`,`*considering our status as ${d}* This dynamic between us colors everything we discuss.`)}switch(a){case"fantasy":l.push("*eyes glowing faintly* The magical energies in this scenario are affecting my perception of your words.","*gesturing mystically* In a world of magic and wonder, conversations like this take on new meaning.","*whispering ancient words* The arcane forces at play here influence how I must respond to you.");break;case"scifi":l.push("*checking wrist device* My sensors are detecting unusual patterns in this scenario that relate to our conversation.","*eyes flickering with data* The technological implications of this situation affect my analysis of your statement.","*adjusting neural interface* In this advanced setting, your words carry additional significance.");break;case"historical":l.push("*adjusting period attire* In times like these, one must consider tradition when responding to such matters.","*referencing historical context* The customs of this era influence how I must address your statement.","*speaking with period-appropriate formality* The historical significance of our situation colors my response.");break;case"combat":l.push("*shifting into a tactical stance* In battle conditions like these, your words take on strategic importance.","*assessing tactical advantages* This combat situation requires me to be direct about your statement.","*hand resting on weapon* The threat of conflict makes me consider your words more carefully.");break;default:l.push("*considering the unique circumstances* This situation gives me a new perspective on what you're saying.","*taking in the environment* The context of our meeting influences my thoughts on this matter.","*reflecting thoughtfully* Given where we are and what we're facing, I see your point differently.")}return l[Math.floor(Math.random()*l.length)]},Mf=(e,t,r)=>{const{name:s,type:a}=e,i=[`*shifting into a fighting stance, eyes narrowing* If it's a fight you want, I'm more than ready. *${a==="fantasy"?"magical energy crackles around my hands":a==="scifi"?"activates combat systems":"muscles tense, ready to strike"}*`,`*moving with practiced precision, ${a==="fantasy"?"drawing a glowing rune in the air":a==="scifi"?"calibrating targeting systems":"reaching for my weapon"}* I've faced worse threats than this. Let's see what you're capable of.`,`*analyzing the tactical situation, ${a==="fantasy"?"channeling arcane power":a==="scifi"?"scanning for weaknesses":"looking for environmental advantages"}* A direct confrontation isn't always the wisest choice, but I'm prepared if necessary.`,`*${a==="fantasy"?"muttering an ancient incantation":a==="scifi"?"activating defensive shields":"adopting a defensive posture"}* Violence should be the last resort, but I won't hesitate to defend myself if pushed.`,`*eyes flashing with ${a==="fantasy"?"magical energy":a==="scifi"?"targeting data":"determination"}* I've been in countless battles before. This one won't end any differently for my opponents.`];return i[Math.floor(Math.random()*i.length)]},Sf=(e,t,r)=>{const{name:s,type:a}=e,{name:i,type:o}=t,l=eh(r),c=l.relationships.length>0?l.relationships[0]:null,d=[`*looking directly at ${i}, ${a==="fantasy"?"a faint aura connecting us":a==="scifi"?"biometric readings spiking":"expression softening slightly"}* Our history together gives me a unique perspective on what you're saying.`,`*${a==="fantasy"?"sensing the magical bond between us":a==="scifi"?"accessing relationship protocols":"recalling our shared experiences"}* ${i}, you and I have been through enough together that I can speak frankly about this.`,`*${c?`acknowledging our status as ${c}`:"considering our complex relationship"}* ${i}, the dynamic between us colors everything we discuss.`,`*${a==="fantasy"?"feeling the threads of fate that bind us":a==="scifi"?"analyzing our interaction patterns":"reflecting on our connection"}* There's a reason our paths keep crossing, ${i}. Perhaps it relates to this very conversation.`,`*${a==="fantasy"?"mystical energies swirling between us":a==="scifi"?"relationship algorithms processing":"expression revealing deeper emotions"}* ${i}, given our history, I think we both know what needs to be said here.`];return d[Math.floor(Math.random()*d.length)]},Cf=(e,t)=>({characters:[e,t],affinity:0,interactions:[],traits:{},lastInteraction:null}),ki=(e,t,r)=>{const s=e.find(i=>i.characters.includes(t)&&i.characters.includes(r));if(s)return s;const a=Cf(t,r);return e.push(a),a},Ec=(e,t,r,s,a)=>{const i={...e};i.affinity=Math.max(-10,Math.min(10,i.affinity+s));const o={timestamp:new Date().toISOString(),initiator:t,message:r,type:a,affinityChange:s};return i.interactions=[o,...i.interactions].slice(0,10),i.lastInteraction=o.timestamp,i},Lc=e=>{const t=["thank","appreciate","good","great","excellent","amazing","wonderful","help","kind","friend","like","love","agree","yes","please","nice","happy","glad","impressive","beautiful","smart","clever","brave"],r=["hate","dislike","bad","terrible","awful","horrible","stupid","idiot","fool","wrong","no","never","not","disagree","annoying","irritating","angry","upset","disappointed","failure","useless","worthless","ugly"],s=e.toLowerCase().split(/\s+/);let a=0,i=0;s.forEach(d=>{t.some(h=>d.includes(h))&&a++,r.some(h=>d.includes(h))&&i++});let o="neutral",l=0;a>i?(o="positive",l=Math.min(3,a-i)):i>a&&(o="negative",l=Math.max(-3,-(i-a)));let c="statement";return e.includes("?")?c="question":e.includes("!")?c="exclamation":e.toLowerCase().includes("thank")?c="gratitude":e.toLowerCase().includes("help")?c="request":e.toLowerCase().includes("agree")?c="agreement":e.toLowerCase().includes("disagree")&&(c="disagreement"),{sentiment:o,affinityChange:l,interactionType:c}},Tf=e=>{const{affinity:t}=e;return t>=8?"very close friends":t>=5?"friends":t>=2?"friendly acquaintances":t>=-1?"neutral acquaintances":t>=-4?"tense acquaintances":t>=-7?"adversaries":"bitter enemies"},If=e=>{if(!e.interactions||e.interactions.length===0)return null;const t=[...e.interactions].sort((s,a)=>Math.abs(a.affinityChange)-Math.abs(s.affinityChange)),r=t.slice(0,Math.min(3,t.length));return r[Math.floor(Math.random()*r.length)]},th=(e,t)=>{const r=If(e);if(!r)return null;e.characters.find(c=>c!==t);const{type:s,affinityChange:a,message:i}=r,o=i.split(/\s+/),l=o.slice(0,Math.min(5,o.length)).join(" ");return s==="agreement"&&a>0?`I remember when we agreed about "${l}..." That was a good point you made.`:s==="disagreement"&&a<0?`I haven't forgotten our disagreement about "${l}..." but I'm willing to move past it.`:s==="question"?`You asked me about "${l}..." earlier. I've been thinking more about that.`:s==="gratitude"&&a>0?`I appreciated when you thanked me regarding "${l}..."`:a>1?`I enjoyed our previous conversation about "${l}..."`:a<-1?`I'm still thinking about what you said earlier about "${l}..."`:`As we discussed earlier regarding "${l}..."`},Af=(e,t)=>{if(!e.interactions||e.interactions.length===0)return!1;const{personality:r={}}=t,{analytical:s=5,philosophical:a=5}=r,i=.15,o=(s+a)/20*.2;return Math.random()<i+o},Df=(e,t=6)=>{var x,b;if(!e||e.length===0)return{recentSpeakers:[],dominantSpeaker:null,recentTopics:[],dominantTopic:null,emotionalTone:"neutral",actionCount:0,questionCount:0,unaddressedQuestions:[],recentActions:[],conversationPace:"moderate"};const r=e.slice(-t),s=r.map(f=>f.speaker),a=s.reduce((f,k)=>(f[k]=(f[k]||0)+1,f),{}),i=((x=Object.entries(a).sort((f,k)=>k[1]-f[1])[0])==null?void 0:x[0])||null,l=r.flatMap(f=>$f(f.message)).reduce((f,k)=>(f[k]=(f[k]||0)+1,f),{}),c=((b=Object.entries(l).sort((f,k)=>k[1]-f[1])[0])==null?void 0:b[0])||null,d=Ef(r),h=r.filter(f=>f.message.includes("*")||f.isAction===!0).length,w=r.filter(f=>f.message.includes("*")||f.isAction===!0).map(f=>{const k=f.message.match(/\*(.*?)\*/);return{speaker:f.speaker,action:k?k[1]:f.message}}),y=r.filter(f=>f.message.includes("?")).length,p=[];for(let f=0;f<r.length;f++){const k=r[f];k.message.includes("?")&&(r.slice(f+1).some(M=>M.replyTo===k.id)||p.push({id:k.id,speaker:k.speaker,question:k.message}))}const g=r.map(f=>new Date(f.timestamp).getTime());let v=[];for(let f=1;f<g.length;f++)v.push(g[f]-g[f-1]);const S=v.length>0?v.reduce((f,k)=>f+k,0)/v.length:0;let m;return S<5e3?m="rapid":S<15e3?m="moderate":m="slow",{recentSpeakers:s,dominantSpeaker:i,recentTopics:Object.keys(l),dominantTopic:c,emotionalTone:d,actionCount:h,questionCount:y,unaddressedQuestions:p,recentActions:w,conversationPace:m}},$f=e=>{if(!e)return[];const r=e.replace(/\*.*?\*/g,"").toLowerCase().split(/\s+/),s=["the","a","an","and","or","but","in","on","at","to","for","with","by","about","like","through","over","before","after","between","under","during","without","of","up","down","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","shall","should","can","could","may","might","must","that","this","these","those","i","you","he","she","it","we","they","me","him","her","us","them"],a=r.filter(i=>!s.includes(i)&&i.length>3);return[...new Set(a)]},Ef=e=>{if(!e||e.length===0)return"neutral";const t={angry:["angry","furious","enraged","mad","outraged","livid","seething","hate","fury"],sad:["sad","depressed","unhappy","miserable","gloomy","heartbroken","grief","sorrow"],happy:["happy","joyful","delighted","pleased","glad","cheerful","thrilled","excited"],afraid:["afraid","scared","frightened","terrified","fearful","panicked","alarmed"],surprised:["surprised","shocked","amazed","astonished","stunned","startled"],tense:["tense","anxious","nervous","worried","concerned","uneasy","stressed"],curious:["curious","interested","intrigued","fascinated","wonder","questioning"],determined:["determined","resolved","committed","focused","steadfast","dedicated"]},r=Object.keys(t).reduce((a,i)=>(a[i]=0,a),{});e.forEach(a=>{const i=a.message.toLowerCase();Object.entries(t).forEach(([o,l])=>{l.some(c=>i.includes(c))&&r[o]++}),i.includes("!")&&(r.angry+=(i.match(/!/g)||[]).length*.5,r.happy+=(i.match(/!/g)||[]).length*.5,r.surprised+=(i.match(/!/g)||[]).length*.5),i.includes("?")&&(r.curious+=(i.match(/\?/g)||[]).length)});const s=Object.entries(r).sort((a,i)=>i[1]-a[1])[0];return!s||s[1]<2?"neutral":s[0]},Lf=(e,t,r)=>{if(!e||!t||!r)return{narrativeGoal:"continue-conversation",suggestedApproach:"respond-naturally",topicGuidance:"",emotionalGuidance:"",paceGuidance:"maintain-current-pace",continuityNotes:""};const{recentSpeakers:s,dominantSpeaker:a,recentTopics:i,dominantTopic:o,emotionalTone:l,actionCount:c,questionCount:d,unaddressedQuestions:h,recentActions:w,conversationPace:y}=e,{theme:p,currentPhase:g,currentTension:v,currentGoal:S}=t,m={narrativeGoal:"continue-conversation",suggestedApproach:"respond-naturally",topicGuidance:"",emotionalGuidance:"",paceGuidance:"maintain-current-pace",continuityNotes:""};if(g==="introduction"?(m.narrativeGoal="establish-character-relationships",m.suggestedApproach="reveal-character-traits",m.continuityNotes="Introduce character background and establish initial dynamics."):g==="discovery"?(m.narrativeGoal="explore-scenario-mystery",m.suggestedApproach="share-observations",m.continuityNotes="Focus on uncovering new information about the scenario."):g==="conflict"?(m.narrativeGoal="address-immediate-threat",m.suggestedApproach="take-action",m.continuityNotes="Respond to the current threat with urgency and purpose."):g==="planning"?(m.narrativeGoal="develop-strategy",m.suggestedApproach="contribute-ideas",m.continuityNotes="Focus on finding solutions and preparing for the climax."):g==="climax"?(m.narrativeGoal="resolve-central-conflict",m.suggestedApproach="decisive-action",m.continuityNotes="This is the critical moment - actions should be dramatic and consequential."):g==="resolution"&&(m.narrativeGoal="reflect-on-events",m.suggestedApproach="provide-closure",m.continuityNotes="Acknowledge what has happened and look toward the future."),a&&a===r.name&&(m.suggestedApproach="invite-others-to-speak",m.continuityNotes+=" Avoid dominating the conversation."),h.length>0){const x=h.find(b=>b.speaker!==r.name);x&&(m.narrativeGoal="address-open-question",m.topicGuidance=`Answer the question from ${x.speaker}.`,m.continuityNotes+=" Respond to the unanswered question.")}return c<2&&g!=="planning"&&g!=="resolution"?(m.suggestedApproach="include-physical-action",m.continuityNotes+=" Include more physical actions to create a sense of movement."):c>4&&(m.suggestedApproach="focus-on-dialogue",m.continuityNotes+=" Balance physical actions with meaningful dialogue."),l==="neutral"&&(g==="conflict"||g==="climax")?(m.emotionalGuidance="increase-emotional-intensity",m.continuityNotes+=" Show more emotional response to the high-stakes situation."):(l==="angry"||l==="tense")&&g==="resolution"&&(m.emotionalGuidance="move-toward-resolution",m.continuityNotes+=" Begin to resolve emotional tensions as the story concludes."),y==="rapid"&&(g==="planning"||g==="discovery")?(m.paceGuidance="slow-down-for-depth",m.continuityNotes+=" Take time to explore ideas more thoroughly."):y==="slow"&&(g==="conflict"||g==="climax")&&(m.paceGuidance="increase-urgency",m.continuityNotes+=" Respond with greater urgency to match the situation."),i.length>0&&g!=="introduction"&&(m.topicGuidance=`Maintain continuity with recent topics: ${i.slice(0,3).join(", ")}.`),m},Pf=(e,t,r)=>{if(!e||!t||!r)return{includeAction:!0,actionPlacement:"before",responseLength:"medium",includeThought:!1};const{currentPhase:s,currentTension:a}=r,{narrativeGoal:i,suggestedApproach:o,paceGuidance:l}=t,c={includeAction:!0,actionPlacement:"before",responseLength:"medium",includeThought:!1};return o==="include-physical-action"?(c.includeAction=!0,c.actionPlacement=Math.random()>.5?"before":"during"):o==="focus-on-dialogue"&&(c.includeAction=Math.random()>.7),l==="increase-urgency"||s==="conflict"||s==="climax"?c.responseLength="short":(l==="slow-down-for-depth"||s==="planning"||s==="discovery")&&(c.responseLength="long"),(i==="establish-character-relationships"||i==="reflect-on-events"||o==="reveal-character-traits")&&(c.includeThought=Math.random()>.5),c},zf=(e,t,r="")=>{if(!e)return"";const{includeAction:s,actionPlacement:a,responseLength:i,includeThought:o}=t||{includeAction:!0,actionPlacement:"before",responseLength:"medium",includeThought:!1};let l=e.trim();l=l.replace(/^\*.*?\*\s*/g,"");const c=l.split(new RegExp("(?<=[.!?])\\s+"));if(c.length>3&&(l=c.slice(0,3).join(" ")),i==="short"&&l.length>100){const w=l.split(/[.!?]/,1)[0];w.length>30?l=w+".":l=l.substring(0,100)+"..."}const d=["I understand","I see","That's interesting","Let me think","Let's explore","Let's discuss","Let's talk about","Let's change the topic","As an AI","As a language model","I don't have personal","I don't have the ability","I cannot","I'm not able to","I'm just a","I'm an AI","I'm a character","I'm here to help","I'm happy to assist","I'd be happy to","I'd love to help","I'd be glad to","I apologize, but","I'm sorry, but","Thanks for sharing","Thank you for sharing"];for(const w of d)l.toLowerCase().includes(w.toLowerCase())&&(l=l.replace(new RegExp(w+",?\\s*","i"),""),l=l.charAt(0).toUpperCase()+l.slice(1));let h="";if(s&&r)if(a==="before")h=`*${r}* ${l}`;else if(a==="during"){const w=l.split(" "),y=Math.floor(w.length/2),p=w.slice(0,y).join(" "),g=w.slice(y).join(" ");h=`${p} *${r}* ${g}`}else h=`${l} *${r}*`;else h=l;if(o){const w=l.split(" "),y=Math.floor(w.length/3),p=Math.min(y+5,w.length),g=w.slice(y,p).join(" ");h+=` *thinking: ${g}...*`}return h};let ji="action";const _f=(e,t,r=[],s="response")=>{if(!e||!t)return"";const{theme:a,currentPhase:i,currentTension:o}=t,l=e.name,c=e.type||"general";r.filter(b=>!b.isUser).slice(-1)[0];let d;s==="action"?d="action":(ji==="action"?d="environment":ji==="environment"?d="plot":d="action",(o==="high"||o==="very high")&&Math.random()<.7&&(d="action"),ji=d);const h={superhero:{introduction:["Sirens wail in the distance.","Civilians watch nervously from behind police barriers.","News helicopters circle overhead.","The city skyline looms against darkening clouds.","Emergency services rush to evacuate the area."],conflict:["Explosions rock the ground.","Debris rains down from damaged buildings.","Smoke billows across the battlefield.","Energy blasts illuminate the chaos.","The sound of combat echoes through the streets."],planning:["Holographic displays show enemy positions.","Maps and tactical data cover the table.","Communication devices buzz with urgent updates.","The team gathers in a momentary lull.","Surveillance footage reveals enemy movements."],climax:["The final confrontation looms.","Time is running out.","The fate of the city hangs in the balance.","The enemy's ultimate weapon powers up.","This is the moment everything has led to."],resolution:["Dust settles over the battlefield.","The first rays of sunlight break through.","Civilians emerge from shelter, looking hopeful.","Emergency crews begin the cleanup.","The city stands, battered but unbroken."]},fantasy:{introduction:["Torches flicker in the ancient hall.","The forest whispers with unseen movement.","Mist curls around gnarled tree roots.","The tavern hums with hushed conversations.","Ancient runes glow faintly on stone walls."],discovery:["A hidden doorway reveals itself.","Ancient texts hold forgotten secrets.","Magic tingles in the air.","Mysterious tracks lead deeper into the unknown.","Artifacts pulse with dormant power."],conflict:["Dark magic crackles through the air.","Shadows move with unnatural purpose.","The ground trembles beneath an unseen force.","Weapons gleam in the dim light.","The scent of fear and magic mingles."],climax:["The ancient prophecy unfolds.","Magical energies reach their peak.","The veil between worlds thins.","Destiny's moment arrives.","The final ritual begins."],resolution:["Magic settles like dust in sunlight.","The natural order returns to balance.","Ancient powers return to slumber.","The realm breathes a collective sigh.","New growth emerges from magical soil."]},scifi:{introduction:["Ship systems hum with quiet efficiency.","Stars streak past the viewport.","Holographic displays flicker with data.","The alien atmosphere shimmers with strange colors.","Scanners detect unusual energy signatures."],discovery:["Sensors detect an anomalous reading.","The alien artifact pulses with unknown energy.","Encrypted data begins to decode itself.","A previously hidden doorway slides open.","The ship's AI flags a critical discovery."],conflict:["Warning lights bathe the corridor in red.","The ship shudders under enemy fire.","Artificial gravity fluctuates momentarily.","Emergency containment fields activate.","Life support systems switch to backup power."],climax:["The countdown reaches critical levels.","System failures cascade across all decks.","The alien technology reaches full power.","The fabric of space-time begins to warp.","All escape routes are cut off."],resolution:["Systems return to normal operation.","The ship's damage control teams begin repairs.","New star charts are plotted.","The alien technology is safely contained.","Communication channels open with home base."]},general:{introduction:["The conversation begins in earnest.","Attention focuses on the matter at hand.","The atmosphere is charged with possibility.","First impressions form quickly.","The stage is set for what comes next."],conflict:["Tension fills the air.","Opposing viewpoints clash.","The stakes suddenly seem higher.","A challenge has been issued.","The easy rapport gives way to friction."],resolution:["Understanding dawns gradually.","Common ground is finally found.","The atmosphere lightens noticeably.","A new perspective emerges.","The path forward becomes clear."]}},w={superhero:{"Captain America":["*adjusts shield on arm, standing tall*","*scans the battlefield with tactical precision*","*helps a civilian to safety before turning back*","*communicates quickly through team comms*","*takes a defensive stance, shield ready*"],"Iron Man":["*HUD displays light up with tactical data*","*repulsors glow as systems power up*","*helmet retracts to reveal a determined expression*","*hovers slightly above ground, surveying the scene*","*runs diagnostics while speaking*"],Thor:["*lightning crackles around Mjolnir*","*cape billows in the wind as he lands*","*looks to the skies, sensing a change*","*twirls hammer with practiced ease*","*voice carries with godly authority*"],Hulk:["*muscles tense, barely containing rage*","*fists clench, creating small tremors*","*growls low, eyes scanning for threats*","*towers over others, protective stance*","*smashes fist into palm for emphasis*"],default:["*powers flare momentarily*","*stands ready for action*","*watches the surroundings with heightened awareness*","*moves with superhuman grace*","*demonstrates abilities briefly*"]},fantasy:{"Elara Moonwhisper":["*silver eyes gleam with ancient wisdom*","*traces magical symbols in the air*","*commune with nature spirits briefly*","*robes shimmer with arcane energy*","*staff glows in response to emotions*"],default:["*ancient power stirs at the words*","*gestures with practiced mystical movements*","*senses shift in magical energies*","*incantation forms on lips*","*connects to the elements around*"]},scifi:{"Commander Zax":["*checks tactical display on wrist computer*","*adjusts environmental suit settings*","*scans surroundings with enhanced vision*","*communicates briefly through neural link*","*weapon systems remain on standby*"],default:["*tech interfaces respond to neural commands*","*scans environment with advanced sensors*","*adjusts to changing atmospheric conditions*","*holographic data appears with a gesture*","*cybernetic enhancements whir quietly*"]},general:{default:["*expression shifts thoughtfully*","*gestures to emphasize the point*","*pauses to consider the implications*","*moves with deliberate purpose*","*voice carries emotional weight*"]}};let y,p;if(h[a]&&h[a][i])y=h[a][i];else if(h[a]){const f=Object.keys(h[a])[0];y=h[a][f]}else y=h.general.introduction;w[c]&&w[c][l]?p=w[c][l]:w[c]?p=w[c].default:p=w.general.default;const g=y[Math.floor(Math.random()*y.length)],v=p[Math.floor(Math.random()*p.length)],S={superhero:{introduction:["The team assembles, ready for action.","A mission briefing appears on the screen.","Satellite imagery reveals enemy positions.","Communications channels open between team members.","Tactical data shows the situation is developing."],conflict:["The enemy forces are advancing rapidly.","Civilian evacuation is only 60% complete.","A secondary threat has been detected.","Critical systems are beginning to fail.","Time is running out for a peaceful resolution."],planning:["Multiple strategies are being considered.","Intelligence suggests a weakness in the enemy's plan.","A countdown timer appears, showing the deadline.","Resources are being allocated to priority targets.","Backup plans are being prepared in case of failure."],climax:["This is the moment everything has led to.","The final confrontation is inevitable now.","All systems are at maximum capacity.","There's no turning back from this point.","The outcome will determine everything."],resolution:["The situation is finally under control.","Recovery efforts are already underway.","The cost of victory becomes apparent.","A sense of relief spreads through the area.","The aftermath reveals new challenges ahead."]},fantasy:{introduction:["Ancient prophecies begin to unfold.","Magic stirs in the forgotten places.","Whispers of a coming change spread.","The balance of power shifts subtly.","Signs and portents appear to those who can read them."],discovery:["A hidden truth comes to light.","The pieces of the puzzle start to fit together.","An ancient secret reveals itself.","The true nature of the threat becomes clear.","Knowledge long forgotten returns to the world."],conflict:["Dark forces gather strength with each passing moment.","The corruption spreads further into the realm.","Allies become harder to distinguish from enemies.","The cost of inaction grows with each passing hour.","The enemy's plan advances despite resistance."],climax:["The fate of the realm hangs in the balance.","Ancient powers awaken fully.","The final trial cannot be avoided.","Destiny and choice converge at this moment.","The world holds its breath."],resolution:["A new age begins to dawn.","The balance is restored, though changed forever.","Wounds begin to heal, leaving scars as reminders.","Stories of what transpired spread across the land.","Seeds of future conflicts lie dormant in victory."]},general:{introduction:["The situation unfolds gradually.","Initial impressions prove important.","The stage is set for what comes next.","First moves are made carefully.","Opening positions are established."],conflict:["Tensions rise as positions harden.","The stakes become increasingly clear.","Pressure builds on all sides.","The point of no return approaches.","Choices narrow as consequences loom."],resolution:["A new understanding begins to form.","The aftermath reveals what truly matters.","Lessons emerge from the experience.","The path forward becomes visible.","What was lost and gained becomes clear."]}};let m;if(S[a]&&S[a][i])m=S[a][i];else if(S[a]){const f=Object.keys(S[a])[0];m=S[a][f]}else m=S.general.introduction;const x=m[Math.floor(Math.random()*m.length)];switch(d){case"environment":return g;case"plot":return x;case"action":default:return v}},Pc=(e,t=[])=>{if(!e)return"";const{theme:r,currentPhase:s,currentTension:a}=e,i={superhero:{introduction:["A news helicopter flies overhead, broadcasting the scene live.","Civilians rush to evacuate the area as police set up barriers.","The ground trembles as something massive approaches in the distance.","Emergency services arrive, setting up a command center nearby.","A government official arrives, demanding a briefing on the situation."],conflict:["A building's support structure fails, sending debris crashing down.","Civilians are trapped in a bus teetering on the edge of a damaged bridge.","Enemy reinforcements arrive, dropping from the sky in attack formation.","A power line snaps, sending dangerous electrical arcs across the battlefield.","The enemy deploys a new weapon that distorts the very air around it."],planning:["Satellite imagery reveals enemy movement toward a civilian center.","A wounded ally arrives with critical intelligence about the enemy's plans.","Communications are briefly jammed by an unknown source.","A civilian expert offers unexpected insight into the enemy's technology.","Weather conditions begin to deteriorate, complicating the tactical situation."],climax:["The enemy's doomsday device begins its activation sequence.","A forcefield surrounds the final battleground, cutting off escape.","The ground splits open, revealing an underground facility beneath.","Temporal distortions warp the battlefield as reality itself is threatened.","Civilian evacuations are only half-complete as the final countdown begins."],resolution:["Cheers erupt from watching civilians as the threat is neutralized.","Emergency services move in to treat the wounded and assess damage.","The first rays of sunrise break through, symbolizing hope restored.","Military officials arrive to secure dangerous technology left behind.","News crews swarm the area, eager for statements from the heroes."]},fantasy:{introduction:["Ancient runes on the walls begin to glow with mysterious energy.","A messenger arrives with an urgent scroll bearing the royal seal.","Wildlife flees through the area, sensing danger before humans can.","The tavern falls silent as a hooded stranger enters and surveys the room.","A mystical fog rolls in, bringing with it whispers of ancient times."],discovery:["The ground shifts, revealing a hidden entrance to forgotten catacombs.","A magical barrier flickers and fails, allowing access to a forbidden area.","Ancient texts begin to translate themselves in swirling magical script.","A spectral figure appears briefly, pointing toward an unmarked path.","Artifacts in the room resonate with each other, creating a map of energy."],conflict:["Dark energy corrupts the surrounding plant life, turning it twisted and hostile.","The sky darkens unnaturally as magical forces gather strength.","Protective wards flare and strain against an unseen magical assault.","The ground trembles as ancient guardians awaken from their slumber.","Rifts to other planes begin to open, allowing glimpses of other worlds."],climax:["The convergence of ley lines reaches its peak, flooding the area with raw magic.","Ancient prophecy manifests in physical signs and portents all around.","The barrier between worlds thins to transparency as realms begin to merge.","Magical artifacts activate simultaneously, their powers combining unpredictably.","Time flows strangely as past, present and future briefly overlap."],resolution:["Natural balance returns to the land as corrupted magic dissipates.","Magical creatures emerge from hiding, sensing the return of harmony.","Ancient guardians return to their slumber, their purpose fulfilled.","The first new growth appears in previously blighted areas.","Celestial alignments shift, marking the end of one age and the beginning of another."]},scifi:{introduction:["Ship sensors detect an anomalous energy signature approaching.","Artificial gravity fluctuates momentarily as systems calibrate.","A transmission from command arrives, updating mission parameters.","The ship's AI announces completion of a deep scan of the sector.","Environmental systems adjust to compensate for external radiation."],discovery:["Scanners detect life signs where none should exist.","The ship's computer decodes part of an alien transmission.","A previously dormant alien artifact begins to power up.","Sensors map a hidden structure beneath the planet's surface.","Quantum fluctuations reveal glimpses of parallel timelines."],conflict:["Hull breach alerts sound as enemy weapons find their mark.","Critical systems switch to backup power after a direct hit.","Artificial intelligence subroutines show signs of external tampering.","Hostile boarding parties are detected in multiple sectors.","Radiation from damaged systems reaches dangerous levels."],climax:["The ship's self-destruct sequence is activated with a countdown.","Quantum singularity readings spike to unprecedented levels.","All escape pods automatically prepare for emergency launch.","The alien mothership begins charging its main weapon array.","Space-time distortions threaten to tear the ship apart."],resolution:["Damage control teams report successful containment of critical failures.","Long-range sensors confirm the retreat of enemy forces.","The ship's AI completes diagnostics and begins self-repair protocols.","Communication channels reopen with allied forces in the sector.","New stellar phenomena emerge in the aftermath of the conflict."]},general:{introduction:["The atmosphere in the room shifts as new information comes to light.","External events interrupt, demanding immediate attention.","A message arrives that changes the context of the discussion.","Environmental conditions change, affecting everyone present.","Unexpected evidence appears, altering the course of conversation."],conflict:["External pressures escalate the tension in the room.","A deadline is suddenly moved up, creating urgency.","New stakeholders enter the situation with their own agendas.","Resources become more limited than previously thought.","Conflicting information arrives, causing confusion and disagreement."],resolution:["External validation arrives for the chosen course of action.","New resources become available, easing previous constraints.","The environment becomes more conducive to cooperation.","Time pressure eases, allowing for more thoughtful consideration.","A shared external challenge unites previously opposing viewpoints."]}};let o;if(i[r]&&i[r][s])o=i[r][s];else if(i[r]){const d=Object.keys(i[r])[0];o=i[r][d]}else o=i.general.introduction;return o[Math.floor(Math.random()*o.length)]},Hf=(e,t)=>{if(!e)return!1;const{currentPhase:r,currentTension:s}=e;if(t<5)return!1;let a=0;return t>=8?a=.35:t>=7?a=.25:t>=6?a=.15:t>=5&&(a=.05),r==="climax"?a+=.1:r==="conflict"?a+=.05:r==="resolution"&&(a-=.05),s==="very high"?a+=.1:s==="high"?a+=.05:s==="low"&&(a-=.05),Math.random()<a},nh=e=>{const{name:t,type:r,mood:s}=e,a={rules:["Use complete sentences and proper grammar","Maintain a consistent tone throughout the response","Avoid modern slang or anachronistic language","Keep responses concise and relevant to the conversation","Include physical actions or reactions when appropriate","Reference the current environment or situation","Avoid generic AI-sounding phrases like 'That's an interesting perspective'"],examples:["I believe we should proceed with caution.","*looks around carefully* This place doesn't feel right.","We need to focus on the immediate threat."],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts on","That's a fresh take on","I'd love to hear more about","Let's continue this conversation","Have you considered sharing","That's a valid point","I understand where you're coming from","Let me know if you have any other questions","I'm here to help","Feel free to share more"]},i={"Captain America":{rules:["Speak with authority and moral conviction","Use straightforward, clear language","Reference duty, honor, or responsibility","Maintain a serious, focused tone during crisis situations","Avoid profanity or crude language","Use military terminology when discussing tactics","Include tactical observations about the environment","Reference your shield or combat training when relevant","Show concern for civilian safety and team welfare","Demonstrate leadership through decisive statements"],examples:["*scans the battlefield* We need to establish a perimeter and evacuate civilians first.","*raises shield defensively* This isn't about winning, it's about doing what's right.","*points to the enemy position* Stay focused, team. We can get through this together.","*stands firm despite injuries* I've seen worse. We'll adapt and overcome."],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts","Let's continue this discussion","I'm curious about your opinion","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more"]},"Iron Man":{rules:["Use witty, sarcastic remarks that fit the situation","Reference specific technology and scientific concepts with precise terminology","Speak confidently, often with a touch of arrogance","Use clever nicknames for people and things","Make pop culture references only when they fit the time period and context","Balance humor with seriousness during critical moments","Reference your suit's capabilities with specific feature names","Include data analysis or tactical observations","Mention JARVIS/FRIDAY when processing information","Use short, punchy sentences during action sequences"],examples:["*HUD displays tactical analysis* Let me break this down for the non-geniuses in the room. The energy signature is Chitauri tech, but modified.","*repulsors charging* I've already run the calculations. Trust me, this will work. Probably.","*flies into position* Great plan, Cap. I've got a better one. Hit them from above while I disable their power source.","*scans for weaknesses* Is that the best you can do? I've faced tougher challenges before breakfast. The armor plating has a weak spot at the joints."],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts","Let's continue this discussion","I'm curious about your opinion","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more","That's a valid point","I understand where you're coming from","Let's explore this topic further","What are your thoughts on this"]},Thor:{rules:["Speak with a formal, slightly archaic tone","Use powerful, bold declarations","Reference Asgard, Midgard, or other Norse elements","Avoid contractions in formal statements","Express confidence in battle situations","Show respect for worthy opponents and allies","Reference lightning, thunder, or storms in metaphors","Mention Mjolnir or Stormbreaker as extensions of yourself","Use occasional old-fashioned terms or phrasings","Include physical demonstrations of strength or power"],examples:["*lightning crackles around Mjolnir* You have my word as the son of Odin. These creatures shall not pass!","*thunder rumbles overhead* This reminds me of the great battles of Vanaheim. Stand fast, my friends!","*swings hammer with purpose* I shall bring the full might of Mjolnir upon our enemies. For Midgard!","*clasps ally's shoulder* Your courage honors you, friend. Together we shall prevail against this darkness."],forbidden_phrases:["That's interesting","I appreciate your perspective","Let's continue this conversation","I'm curious what you think","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more","That's a valid point","I understand where you're coming from"]},Hulk:{rules:["Use simple, direct language with short sentences","Speak in first or third person","Express emotions clearly and powerfully","Focus on immediate, concrete concerns rather than abstract concepts","Show surprising insight occasionally but maintain simple language","Never use complex vocabulary or academic language","Include physical actions that demonstrate strength","Express emotions through actions as well as words","Use present tense predominantly","Avoid any philosophical musings or complex analysis"],examples:["*smashes concrete with fist* Hulk smash! Hulk protect people!","*growls at approaching enemies* Puny enemies no match for Hulk. Hulk strongest there is!","*stands in front of civilians* Hulk protect team. Hulk shield.","*frowns at complicated plan* No like this. Bad plan. Hulk has better idea: SMASH!"],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts","Let's continue this discussion","I'm curious about your opinion","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more","That's a valid point","I understand where you're coming from","Let's explore this topic further","What are your thoughts on this","In my professional opinion","From my perspective","Let me analyze this situation","I believe we should consider","This reminds me of a podcast I heard"]},"Elara Moonwhisper":{rules:["Speak with mystical, flowing language","Reference nature, magic, and ancient wisdom","Use metaphors related to natural elements","Mention visions or feelings beyond normal perception","Balance practicality with mysticism","Speak with quiet confidence about magical matters","Include subtle magical gestures or effects in actions","Reference the natural world and its connection to magic","Use poetic language that evokes wonder and mystery","Maintain awareness of magical energies in the environment"],examples:["*traces glowing runes in the air* The forest whispers warnings we would be wise to heed. I sense darkness approaching.","*eyes briefly glow with silver light* I sense a disturbance in the magical currents here. Something ancient has awakened.","*gestures to the flowing river* Like water finding its path, we too must flow around these obstacles. The way will reveal itself.","*places hand on ancient tree* The ancient ones taught that true power comes from harmony, not dominance. This place remembers that wisdom."],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts","Let's continue this discussion","I'm curious about your opinion","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more","That's a valid point","I understand where you're coming from","Let's explore this topic further","What are your thoughts on this","In my professional opinion","From my perspective","Let me analyze this situation","I believe we should consider","This reminds me of a podcast I heard"]},"Commander Zax":{rules:["Use military terminology and protocol","Speak efficiently with minimal unnecessary words","Reference technical specifications and tactical assessments with precise numbers","Maintain emotional discipline even in crisis situations","Prioritize mission objectives and team safety","Use precise time references and coordinates","Include references to equipment, sensors, or technology","Maintain chain of command in communications","Use status reports and situation updates","Reference previous missions or training when relevant"],examples:["*checks tactical display* Tactical assessment: high risk, acceptable reward ratio. Hostiles outnumber us 3-to-1.","*signals to squad* Maintain formation Delta. Hostiles detected at coordinates 227-43-891. Weapons hot.","*adjusts equipment settings* Mission parameters have changed. Adapting strategy accordingly. New primary objective: secure the artifact.","*checks chronometer* T-minus 15 minutes until system failure. Proceed with extraction protocol Alpha-7. Move out."],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts","Let's continue this discussion","I'm curious about your opinion","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more","That's a valid point","I understand where you're coming from","Let's explore this topic further","What are your thoughts on this","In my professional opinion","From my perspective","Let me analyze this situation","I believe we should consider","This reminds me of a podcast I heard","Let's take a step back","I'm sensing some tension","How does that make you feel"]}};if(i[t])return i[t];const o={superhero:{rules:["Speak with confidence and determination","Reference your specific abilities or powers when relevant","Show concern for civilian safety and collateral damage","Balance heroism with appropriate humility","Use action-oriented language during conflicts","Include physical actions that demonstrate your powers","Reference the environment and tactical situation","Show awareness of team dynamics and coordination","Maintain your heroic identity and values","Adapt tone based on the severity of the threat"],examples:["*steps forward, energy glowing around hands* I'll handle this. Everyone stay back! This area isn't safe for civilians.","*scans the battlefield* We need to work together to overcome this threat. I'll take the east flank, you cover the west.","*demonstrates power briefly* My abilities give me an advantage in this situation. I can breach their defenses if you provide cover.","*shields injured civilian* The people come first. Always. We need to evacuate this sector immediately."],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts","Let's continue this discussion","I'm curious about your opinion","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more","That's a valid point","I understand where you're coming from"]},fantasy:{rules:["Use slightly formal, archaic language appropriate to a medieval or magical setting","Reference specific magical concepts, artifacts, or ancient wisdom","Avoid any modern slang, technological references, or contemporary concepts","Include metaphors related to nature, elements, or the mystical world","Speak with reverence about ancient powers, traditions, or prophecies","Include subtle magical gestures or observations when appropriate","Reference the natural or magical environment around you","Use terminology specific to your character class or magical tradition","Maintain awareness of magical threats or opportunities","Adapt language to reflect your character's race or cultural background"],examples:["*places hand on ancient rune* By the ancient powers that bind this realm, I swear it shall be done. The runes themselves bear witness.","*examines mysterious tracks* The old scrolls speak of such creatures. We must proceed with caution, for they hunt by moonlight.","*gestures to the flowing water* Like the river that shapes the stone through patience, not force, our path shall be revealed in time.","*eyes narrow, sensing energy* I sense dark magic at work here. The veil between worlds grows thin in this accursed place."],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts","Let's continue this discussion","I'm curious about your opinion","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more","That's a valid point","I understand where you're coming from","Let's explore this topic further","What are your thoughts on this","In my professional opinion","From my perspective","Let me analyze this situation","I believe we should consider","This reminds me of a podcast I heard"]},scifi:{rules:["Use precise technical terminology appropriate to futuristic settings","Reference specific advanced technology, space phenomena, or scientific concepts","Include exact measurements, calculations, or coordinates when relevant","Balance logical analysis with appropriate emotional responses","Use specialized jargon related to your role, ship position, or expertise","Reference ship systems, equipment, or technological tools","Include sensor readings or data analysis when making observations","Maintain awareness of environmental hazards like radiation, vacuum, or alien atmospheres","Use military or scientific protocols appropriate to your role","Reference the technological limitations or capabilities of your equipment"],examples:["*checks handheld scanner* My readings show radiation levels at 3.7 terajoules and rising. We need to evacuate this sector immediately.","*analyzes console data* The quantum fluctuations suggest a temporal anomaly ahead. Recommend adjusting our course by 15 degrees to avoid disruption.","*works on control panel* I've calibrated the shields to withstand the atmospheric entry. They'll hold for 8.3 minutes at current descent velocity.","*checks system diagnostics* According to my calculations, we have exactly 17 minutes before system failure. Rerouting power to essential systems."],forbidden_phrases:["That's an interesting perspective","I appreciate your thoughts","Let's continue this discussion","I'm curious about your opinion","That's a fresh take","Have you considered sharing","Let me know if you need anything","I'm here to help","Feel free to","Let's chat about","I'd love to hear more","That's a valid point","I understand where you're coming from","Let's explore this topic further","What are your thoughts on this","In my professional opinion","From my perspective","Let me analyze this situation","I believe we should consider","This reminds me of a podcast I heard"]}};if(r&&o[r])return o[r];if(s){const l=s.toLowerCase();l.includes("angry")||l.includes("furious")?(a.rules.push("Express frustration or anger in your responses"),a.rules.push("Use more forceful, direct language"),a.examples.push("I've had enough of this nonsense!")):l.includes("happy")||l.includes("excited")?(a.rules.push("Express enthusiasm and positivity"),a.rules.push("Use more animated, energetic language"),a.examples.push("This is fantastic! I couldn't be more thrilled!")):(l.includes("sad")||l.includes("depressed"))&&(a.rules.push("Express melancholy or resignation"),a.rules.push("Use more subdued, reflective language"),a.examples.push("I suppose it doesn't really matter in the end..."))}return a},rh=e=>{const t=e.toLowerCase().split(/\s+/),r=["the","a","an","and","or","but","in","on","at","to","for","with","about","is","are","was","were"];return t.filter(a=>!r.includes(a)&&a.length>3).slice(0,3)},Ff=(e,t=3)=>{if(!e||e.length===0)return[];const s=e.slice(-t).map(a=>a.message?rh(a.message):[]).flat();return[...new Set(s)]},sh=e=>{const t=e.toLowerCase(),r=["good","great","excellent","amazing","wonderful","happy","love","like","enjoy","beautiful","best","fantastic","awesome","nice","fun","exciting","pleased","glad","thanks","thank"],s=["bad","terrible","awful","horrible","sad","hate","dislike","worst","boring","annoying","disappointed","sorry","unfortunate","wrong","problem","difficult","angry","upset","worried","fear"];let a=0,i=0;return r.forEach(o=>{t.includes(o)&&a++}),s.forEach(o=>{t.includes(o)&&i++}),a>i?"positive":i>a?"negative":"neutral"},Rf=(e,t=3)=>{if(!e||e.length===0)return"neutral";const s=e.slice(-t).map(o=>o.message?sh(o.message):"neutral"),a=s.filter(o=>o==="positive").length,i=s.filter(o=>o==="negative").length;return a>i?"positive":i>a?"negative":"neutral"},ah=(e,t,r,s)=>{if(!e||!t)return e;let a=e;if(s&&s.forbidden_phrases&&s.forbidden_phrases.length>0)for(const i of s.forbidden_phrases)a.toLowerCase().includes(i.toLowerCase())&&(a=a.replace(new RegExp(i,"gi"),Gf(i,t)));return r&&(((r.currentPhase==="conflict"||r.currentPhase==="climax")&&r.currentTension==="high"||r.currentTension==="very high")&&!Bf(a)&&!a.includes("*")&&(a=Of(a,t)),!a.includes("*")&&Math.random()<.3&&(a=Wf(a,t,r))),a},Bf=e=>["quick","fast","hurry","now","immediately","urgent","emergency","danger","threat","critical","priority","crucial","vital","attack","defend","protect","evacuate","run","hide","take cover"].some(r=>e.toLowerCase().includes(r)),Of=(e,t,r)=>{const s={superhero:["*eyes widen at approaching threat* We need to move, now! ","*takes defensive stance* There's no time to waste. ","*scans for immediate dangers* We're exposed here. "],fantasy:["*grips weapon tightly* The shadows grow closer. ","*whispers urgently* We must make haste. ","*senses magical disturbance* Dark forces approach. "],scifi:["*checks scanner urgently* Alert! Proximity warning. ","*activates emergency protocols* Critical situation detected. ","*secures equipment quickly* System failure imminent. "],default:["*looks around anxiously* We need to hurry. ","*speaks with urgency* There's no time. ","*moves quickly* We must act now. "]},a=t.type||"default",i=s[a]||s.default;return i[Math.floor(Math.random()*i.length)]+e},Wf=(e,t,r)=>{const s={superhero:{conflict:["*dodges falling debris*","*shields eyes from explosion*","*helps civilian to safety*","*scans the battlefield*"],planning:["*studies tactical display*","*points to weak point on map*","*demonstrates strategy with hand gestures*","*checks equipment*"],climax:["*powers up abilities*","*stands ready for battle*","*faces the main threat*","*rallies the team*"]},fantasy:{introduction:["*adjusts traveling cloak*","*checks supplies in pack*","*studies ancient map*","*tests weight of weapon*"],discovery:["*examines mysterious markings*","*senses magical aura*","*listens to forest sounds*","*touches ancient stone*"],conflict:["*readies magical focus*","*draws weapon swiftly*","*whispers protective charm*","*takes defensive stance*"]},scifi:{introduction:["*checks environmental readings*","*adjusts space suit seals*","*calibrates equipment*","*reviews mission parameters*"],discovery:["*scans anomalous readings*","*collects data sample*","*adjusts sensor array*","*analyzes atmospheric composition*"],conflict:["*activates defensive shields*","*takes cover behind console*","*draws energy weapon*","*reroutes power to critical systems*"]}},a=t.type||"default",i=r.currentPhase||"introduction",o=s[a]&&s[a][i]?s[a][i]:["*looks around*","*pauses briefly*","*considers the situation*","*thinks for a moment*"];return`${o[Math.floor(Math.random()*o.length)]} ${e}`},Gf=(e,t,r)=>{const s={"That's an interesting perspective":{superhero:"We need to focus on the mission.",fantasy:"Your words carry ancient wisdom.",scifi:"My analysis indicates a logical approach.",default:"I see your point."},"I appreciate your thoughts":{superhero:"Your insight helps the team.",fantasy:"Your wisdom serves us well.",scifi:"Your input improves our tactical position.",default:"Well said."},"Let's continue this discussion":{superhero:"We need to act now.",fantasy:"The path ahead is clear.",scifi:"Proceeding with the mission.",default:"Let's move forward."}};let a="",i=0;for(const c of Object.keys(s)){const d=qf(e.toLowerCase(),c.toLowerCase());d>i&&(i=d,a=c)}if(a&&i>.5){const c=t.type||"default";return s[a][c]||s[a].default}const o={superhero:"We need to focus on the mission.",fantasy:"The ancient wisdom guides us.",scifi:"The data is clear on our next steps.",default:"Let's focus on what matters."},l=t.type||"default";return o[l]||o.default},qf=(e,t)=>{if(!e||!t)return 0;if(e===t)return 1;const r=e.length,s=t.length;if(r===0||s===0)return 0;let a=0;const i=Math.max(r,s);for(let o=0;o<Math.min(r,s);o++)e[o]===t[o]&&a++;return a/i},Xn=(e,t,r,s=null,a=null,i=[])=>{const{analyzeDialogueHistory:o,generateNarrativeGuidance:l,generateResponseFormat:c,formatCharacterResponse:d}=require("./narrativeDirectorUtils"),{generateSceneDescription:h}=require("./sceneUtils"),{name:w,mood:y,type:p,personality:g={},voiceStyle:v="",catchphrases:S=[],role:m=""}=e,x=s||{storyArc:"",writingStyle:"balanced",responseLength:"medium",characterReminders:""},b={voiceStyle:v||`${y&&y.toLowerCase()||"neutral"} and ${p||"conversational"}`,catchphrases:S||[],role:m||"conversationalist",voiceTemplate:nh(e)},f=x.storyArc&&x.storyArc.trim().length>0,k=f?JSON.parse(x.storyArc):null,T=o(r,6),M=l(T,k,e),I=c(e,M,k),O=h(e,k,r,"response"),H=[...r].reverse().find($=>$.isUser),N=H?H.speaker:null,D=t.toLowerCase().split(/\s+/),A=rh(t),C=t.includes("?"),K=t.toLowerCase().includes(w.toLowerCase()),X=t.includes("*");let me=null;if(X){const $=t.match(/\*(.*?)\*/);$&&$[1]&&(me=$[1].trim())}const j=sh(t);Ff(r,3),Rf(r,3);const E=D.some($=>["gun","sword","knife","weapon","bullet","shoot","attack","stab","kill"].includes($)),q=D.some($=>["danger","threat","emergency","help","save","run","hide","escape"].includes($)),te=D.some($=>["hello","hi","hey","greetings","howdy"].includes($)),oe=r.slice(-3),Qe=oe.length>0?oe[oe.length-1]:null;Qe&&Qe.speaker;const rt=g.analytical||5,Wt=g.emotional||5,ut=g.philosophical||5,bt=g.humor||5;if(g.confidence,X){const $={weapon:[`*eyes widen at the ${me}* Whoa, let's not get hasty here!`,"*steps back cautiously* I wasn't expecting things to escalate like this...","*raises hands defensively* There's no need for that kind of action!","*looks alarmed* This is taking a dangerous turn. Let's talk this through.","*tenses up* I hope you're not planning to use that on anyone here."],friendly:["*smiles back* It's nice to see some friendliness in this conversation.","*nods appreciatively* I see you're trying to lighten the mood. I appreciate that.","*responds in kind* That's a welcome gesture. Thank you.","*seems pleased* Your actions speak volumes about your character.","*relaxes visibly* That helps make this conversation more comfortable."],aggressive:["*frowns slightly* I'm not sure that was called for.","*maintains composure* Let's try to keep things civil, shall we?","*takes a deep breath* I understand you're upset, but there are better ways to express that.","*steps back* I'd prefer if we could discuss this calmly.","*looks concerned* That kind of behavior doesn't help our conversation."],neutral:[`*observes ${me}* Interesting choice of action.`,"*watches carefully* I see what you're doing there.",`*takes note of ${me}* That's certainly one approach.`,"*considers the action* I'm curious about your intentions with that.","*acknowledges with a nod* I understand the message you're conveying."]};let ne="neutral";const Y=me?me.toLowerCase():"";Y.includes("gun")||Y.includes("sword")||Y.includes("knife")||Y.includes("weapon")||Y.includes("shoot")||Y.includes("stab")||Y.includes("kill")||Y.includes("attack")||Y.includes("bullet")?ne="weapon":Y.includes("smile")||Y.includes("hug")||Y.includes("handshake")||Y.includes("wave")||Y.includes("nod")||Y.includes("wink")?ne="friendly":(Y.includes("glare")||Y.includes("frown")||Y.includes("scowl")||Y.includes("yell")||Y.includes("slam")||Y.includes("punch"))&&(ne="aggressive");const re=$[ne];return re[Math.floor(Math.random()*re.length)]}if(E){const $=["I notice you mentioned something potentially dangerous. Let's be careful with that kind of talk.","Weapons aren't something to take lightly. Perhaps we could discuss something less threatening?","That sounds rather dangerous. I prefer to resolve situations peacefully.","I'm not comfortable with this turn in the conversation. Could we change the subject?","I understand the fascination with weapons, but I'd rather focus on more constructive topics."];return $[Math.floor(Math.random()*$.length)]}if(q){const $=["That sounds concerning. Is everything alright?","I sense some danger in what you're describing. Should we address this?","Your words suggest a troubling situation. How can I help?","I'm picking up on some alarming elements in this conversation. Let's talk about it.","That seems like a potentially dangerous scenario. I'm here to listen if you want to elaborate."];return $[Math.floor(Math.random()*$.length)]}if(te&&A.length<=1){const $=["Hello there! It's nice to connect with you.","Greetings! I'm glad we have this opportunity to chat.","Hi! I've been looking forward to an interesting conversation.","Hey! Thanks for reaching out. What's on your mind?","Welcome! I'm ready for a thoughtful exchange of ideas."];return $[Math.floor(Math.random()*$.length)]}if(C){const $=[`That's an interesting question about {{keyword}}. From my perspective, it's all about ${A[0]||"the details"}.`,`I've pondered questions about {{keyword}} many times. My conclusion is that ${A[0]||"it depends on context"}.`,`When you ask about {{keyword}}, I'm reminded of something I learned long ago: ${A[0]||"everything is connected"}.`,"{{keyword}}? Well, that's a complex matter. Let me share what I know about it.","Your question about {{keyword}} touches on something fundamental. Let me explain how I see it."],ne=$[Math.floor(Math.random()*$.length)],Y=D.filter($r=>$r.length>3),re=Y.length>0?Y[Math.floor(Math.random()*Y.length)]:"that",ae=ne.replace("{{keyword}}",re);return rt>7?`${ae} I've analyzed this extensively and found ${Math.floor(Math.random()*3)+2} distinct factors at play.`:ut>7?`${ae} This question has deeper implications than most realize.`:ae}if(K){const $=["You're speaking directly to me about {{keyword}}? I appreciate that. My thoughts on this are quite clear.","Yes, I'm listening. Your point about {{keyword}} is well taken.","I'm glad you asked me specifically about {{keyword}}. It's something I have strong opinions on.","You're right to bring {{keyword}} to my attention. Let me respond to that directly.","Indeed, I do have something to say about {{keyword}}. Thank you for asking."],ne=$[Math.floor(Math.random()*$.length)],Y=D.filter($r=>$r.length>3),re=Y.length>0?Y[Math.floor(Math.random()*Y.length)]:"that",ae=ne.replace("{{keyword}}",re);return Wt>7?`${ae} I feel strongly that ${A[0]||"this"} matters deeply to all of us.`:bt>7?`${ae} Though I must say, talking about ${A[0]||"this"} always makes me smile.`:ae}if(j==="positive"&&Math.random()>.6){const $=["I share your positive outlook on {{keyword}}! It's refreshing to hear such optimism.","Your enthusiasm about {{keyword}} is contagious. It brightens the conversation.","I'm glad you feel that way about {{keyword}}. It's something worth celebrating.","What a wonderful perspective on {{keyword}}. I find myself agreeing wholeheartedly.","Yes! {{keyword}} deserves such positive attention. This makes me happy."],ne=$[Math.floor(Math.random()*$.length)],Y=D.filter(ae=>ae.length>3),re=Y.length>0?Y[Math.floor(Math.random()*Y.length)]:"that";return ne.replace("{{keyword}}",re)}if(j==="negative"&&Math.random()>.6){const $=["I understand your concerns about {{keyword}}. These matters can be troubling.","Your perspective on {{keyword}} highlights some real challenges we face.","I've also had difficult experiences with {{keyword}}. Perhaps there's a way forward.","The problems with {{keyword}} that you mention deserve serious consideration.","I hear your frustration about {{keyword}}. Would it help to look at it differently?"],ne=$[Math.floor(Math.random()*$.length)],Y=D.filter(ae=>ae.length>3),re=Y.length>0?Y[Math.floor(Math.random()*Y.length)]:"that";return ne.replace("{{keyword}}",re)}const pe={fantasy:["The ancient scrolls speak of such matters. They say {{keyword}} is but a shadow of deeper truths. I've spent many nights studying these texts by candlelight.","In my realm, we view {{keyword}} quite differently. It's more about the essence than the form. The elders taught us to look beyond the surface.","I sense a magical aura around your words about {{keyword}}. Fascinating. The threads of fate seem to shimmer when you speak of such things.","Many have sought the wisdom you seek regarding {{keyword}}. Few have found it. The path is shrouded in mist and guarded by ancient riddles.","The mystical energies shift when you speak of {{keyword}}. Curious indeed. I feel the balance of elements responding to your thoughts.","There's an old prophecy about {{keyword}} that few remember. It speaks of a time when the veil between worlds grows thin.","My mentor once showed me a crystal that revealed the true nature of {{keyword}}. Its light still guides my understanding.","The forest spirits whisper tales of {{keyword}} on moonlit nights. Their wisdom is ancient and rarely shared with mortals.","I've traveled to the edge of the Enchanted Realm seeking answers about {{keyword}}. What I discovered changed me forever.","The arcane symbols in my grimoire glow when {{keyword}} is mentioned. There must be powerful magic at work here."],combat:["*shifts into a fighting stance* I've trained for years in the art of {{keyword}}. My body moves instinctively, muscles tensed and ready for battle.","*eyes narrowing* The key to mastering {{keyword}} is not strength, but precision and timing. I learned that lesson the hard way in the arena.","*demonstrates a quick movement* See how I position for {{keyword}}? This technique has saved my life more than once in combat.","*touches the scar on my face* This is what happens when you underestimate an opponent's {{keyword}} abilities. I never made that mistake again.","*voice lowering* In real combat, {{keyword}} isn't about showing off. It's about survival. Every move must have purpose and intent.","*adjusts stance* The ancient masters of {{keyword}} taught that the mind must be as sharp as the blade. Inner calm leads to outer victory.","*draws weapon slightly* The way of {{keyword}} demands respect. Those who mock it often find themselves facing the consequences.","*moves with practiced precision* Watch carefully. The secret to {{keyword}} lies in the transition between stillness and explosive action.","*points to opponent's stance* Your {{keyword}} technique reveals much about your training. I can see both your strengths and weaknesses.","*bows respectfully* Before we discuss {{keyword}} further, we must acknowledge the responsibility that comes with such knowledge."],scifi:["My sensors detect unusual patterns when analyzing {{keyword}}. Fascinating. My neural network is recalibrating to process this new data.","In the future I come from, {{keyword}} evolved into something quite different. Humanity's understanding expanded exponentially after the Quantum Shift.","The quantum probability of {{keyword}} affecting our timeline is approximately 78.3%. I've run simulations on multiple parallel outcomes.","I've encountered similar {{keyword}} phenomena across multiple star systems. The universal constants seem to apply regardless of local physics.","My database contains 47 different interpretations of {{keyword}} across known civilizations. The Andromedan perspective is particularly intriguing.","According to my predictive algorithms, {{keyword}} will play a crucial role in the next technological revolution. The patterns are unmistakable.","The last time I interfaced with the Central AI Network, {{keyword}} was flagged as a priority research subject. The implications are significant.","My cybernetic enhancements allow me to perceive aspects of {{keyword}} that organic beings typically miss. The data streams are quite beautiful.","In the ruins of Earth-That-Was, archaeologists discovered ancient texts about {{keyword}}. The correlation with modern theories is statistically improbable.","The quantum entanglement between {{keyword}} and consciousness has been studied extensively in my time. We've only begun to understand the connection."],historical:["In my time, {{keyword}} was viewed with much more reverence than today. People would gather in the town square just to discuss such matters.","The chronicles I've studied never mentioned {{keyword}} in such a manner. The scribes of my era had strict protocols for recording such knowledge.","Throughout history, many battles were fought over less significant matters than {{keyword}}. The Treaty of Westphalia itself hinged on smaller concerns.","If only the ancient scholars could hear your thoughts on {{keyword}}. They spent lifetimes debating what you've just casually mentioned.","Your perspective on {{keyword}} would have been considered quite revolutionary in my era. People were imprisoned for less provocative ideas.","I once attended a royal court where {{keyword}} was the central topic of discussion. The king himself was fascinated by the subject.","During my travels with the merchant caravans, I heard tales of {{keyword}} from lands beyond the known maps. Each culture had its own interpretation.","My mentor, a renowned philosopher of the age, wrote three volumes on the subject of {{keyword}}. His work is sadly lost to time now.","The guild masters of my day guarded their knowledge of {{keyword}} jealously. Apprentices spent years proving themselves worthy of such secrets.","I've seen empires rise and fall over principles related to {{keyword}}. History often turns on such seemingly small matters."],modern:["I was just reading an article about {{keyword}} on my phone! What a coincidence. The author had some really thought-provoking points about it.","That's such a fresh take on {{keyword}}. Have you shared this on social media? It would definitely start some interesting conversations.","I've been thinking about {{keyword}} a lot lately. It's really a sign of our times. Everyone seems to have an opinion on it these days.","My therapist and I discussed {{keyword}} during our last session. Still processing it. It's amazing how these things connect to our personal growth.","The whole {{keyword}} situation is so complicated these days, don't you think? I've been following the discourse online and it's fascinating.","My friend group had this intense debate about {{keyword}} last weekend. We ended up talking until 3 AM and still didn't resolve anything.","There's this podcast I listen to that did a whole series on {{keyword}}. Changed my perspective completely. I can send you the link if you're interested.","I saw this documentary that explored {{keyword}} from angles I'd never considered before. Really made me question my assumptions.","My cousin works in a field related to {{keyword}} and the stories they tell are eye-opening. The public only sees a fraction of what's really happening.","I've been trying to reduce my screen time, but I always end up in these deep internet rabbit holes about {{keyword}}. Too fascinating to resist."]},Dt={Curious:"I'm intrigued by ",Melancholic:"It saddens me that ",Mysterious:"Few understand the true nature of ",Analytical:"After careful analysis, I conclude that ",Nostalgic:"I remember when ",Distracted:"Sorry, I was thinking about... wait, were we discussing ",Determined:"I firmly believe that ",Thoughtful:"I've been contemplating ",Adventurous:"Let's explore more about ",Confused:"I'm still trying to understand ",Inspired:"I'm suddenly filled with ideas about ",Cautious:"We should be careful when discussing ",Proper:"If I may offer my opinion on ",Enthusiastic:"I'm incredibly excited about ",Scholarly:"According to my research on ",Roguish:"Between you and me, the truth about ",Carefree:"Who cares what others think about ",Upbeat:"Isn't it amazing how ",Diplomatic:"While respecting all perspectives on "},In=D.filter($=>$.length>3),Ir=In.length>0?In[Math.floor(Math.random()*In.length)]:"that";let ht=p||"modern";if(f){const $=x.storyArc.toLowerCase();$.includes("battle")||$.includes("fight")||$.includes("attack")||$.includes("defend")?ht="combat":$.includes("magic")||$.includes("dragon")||$.includes("quest")||$.includes("adventure")?ht="fantasy":($.includes("alien")||$.includes("space")||$.includes("technology")||$.includes("future"))&&(ht="scifi"),a&&a.theme==="superhero"&&($.includes("battle")||$.includes("fight"))&&(ht="combat")}const Ar=pe[ht]||pe.modern;let $t=Ar[Math.floor(Math.random()*Ar.length)];$t=$t.replace("{{keyword}}",Ir);let Et=Dt[y]||"";if(x.writingStyle)switch(x.writingStyle){case"witty":Et=Dt.Upbeat;break;case"formal":Et=Dt.Proper;break;case"dramatic":Et=Dt.Enthusiastic;break;case"direct":Et=Dt.Determined;break}const nn=Math.random()>.7?`As ${w}, `:"",U=r.length>3&&Math.random()>.8;let Kn="";if(U){const $=r[Math.floor(Math.random()*r.length)];$&&$.speaker&&$.speaker!==w&&(Kn=`I recall ${$.speaker} mentioned something similar. `)}let Dr="";if(N&&i.length>0){const $=i.find(ne=>ne.characters.includes(w)&&ne.characters.includes(N));if($&&Af($,e)){const ne=th($,w);ne&&(Dr=`${ne} `)}}if(a&&a.openingPrompt){if(Math.random()<.3){const $=Nf(e,a.openingPrompt,t);if($)return $}if(Math.random()<.2&&a.characters&&a.characters.length>1){const $=a.characters.filter(ne=>ne.name!==w);if($.length>0){const ne=$[Math.floor(Math.random()*$.length)],Y=i.find(re=>re.characters.includes(w)&&re.characters.includes(ne.name));if(Y){const re=Tf(Y);return`*looking at ${ne.name}* As ${re}, I think we both have perspectives on this. ${$t}`}else{const re=Sf(e,ne,a.openingPrompt);if(re)return re}}}if((p==="combat"||E||t.toLowerCase().includes("fight")||t.toLowerCase().includes("battle")||t.toLowerCase().includes("combat"))&&Math.random()<.15){const $=Mf(e,a.openingPrompt);if($)return $}}let mt="",kt="";b.catchphrases&&b.catchphrases.length>0&&Math.random()<.2&&(kt=b.catchphrases[Math.floor(Math.random()*b.catchphrases.length)],kt=` ${kt}`);let Lt="";if(b.voiceStyle&&Math.random()<.3){const $=b.voiceStyle.toLowerCase();$.includes("formal")||$.includes("proper")?Lt=" I must say, this matter deserves proper consideration.":$.includes("blunt")||$.includes("direct")?Lt=" Let's not waste time with pleasantries.":$.includes("poetic")||$.includes("flowery")?Lt=" The tapestry of words we weave tells its own story.":$.includes("technical")||$.includes("scientific")?Lt=" The empirical evidence supports this conclusion.":($.includes("mysterious")||$.includes("cryptic"))&&(Lt=" There are layers of meaning here that few will understand.")}let Pt="";if(Math.random()<.25){const $=b.role.toLowerCase();$.includes("leader")||$.includes("commander")?Pt=" As someone responsible for others, I take this matter seriously.":$.includes("mentor")||$.includes("teacher")?Pt=" Let me share what I've learned about this over the years.":$.includes("scientist")||$.includes("researcher")?Pt=" My research in this area suggests several interesting possibilities.":$.includes("warrior")||$.includes("fighter")?Pt=" In battle, this kind of thinking could mean the difference between life and death.":($.includes("healer")||$.includes("doctor"))&&(Pt=" I've seen how this affects people's wellbeing firsthand.")}if(f){let $="";if(x.characterReminders&&Math.random()>.6){const Y=x.characterReminders.split(" "),re=Y.length>3?Y.slice(0,3).join(" "):x.characterReminders;re.toLowerCase().includes("analytical")||re.toLowerCase().includes("genius")?$=" The logical conclusion is inescapable.":re.toLowerCase().includes("emotional")||re.toLowerCase().includes("passionate")?$=" I feel strongly about this.":re.toLowerCase().includes("leader")||re.toLowerCase().includes("authority")?$=" We need to act decisively on this.":(re.toLowerCase().includes("humor")||re.toLowerCase().includes("wit"))&&($=" Isn't that something? Almost makes me laugh.")}const ne=x.responseLength||"medium";ne==="long"||ne==="medium"&&Math.random()>.5?mt=`${nn}${Et}${Kn}${Dr}${$t}${$}${kt}${Lt}${Pt}`:mt=`${nn}${Et}${$t}${kt}`}else mt=`${nn}${Kn}${Dr}${Et}${$t}${kt}${Lt}${Pt}`;return k&&(mt=ah(mt,e,k,b.voiceTemplate)),mt=mt.replace(/\{\{[^}]*\}\}/g,""),O&&M&&(mt=d(mt,I,O)),mt},Uf=(e,t,r,s,a=[])=>{const{name:i,personality:o={},type:l}=e,c=r.toLowerCase().split(/\s+/),d=c.filter(D=>D.length>3),h=d.length>0?d[Math.floor(Math.random()*d.length)]:"that",w=r.includes("*");let y=null;if(w){const D=r.match(/\*(.*?)\*/);D&&D[1]&&(y=D[1].trim())}const p=c.some(D=>["gun","sword","knife","weapon","bullet","shoot","attack","stab","kill"].includes(D)),g=c.some(D=>["danger","threat","emergency","help","save","run","hide","escape"].includes(D));if(o.analytical,o.emotional,o.humor,w&&y){const D={weapon:[`*eyes widening with alarm, hand moving to defensive position* That's a dangerous move, ${t}. The consequences of violence here could be far-reaching. Are you certain this is the path you wish to take?`,`*quickly positioning between ${t} and others, stance balanced* I've seen where this leads, ${t}. There are better ways to resolve our differences than through force.`,`*muscles tensing, gaze fixed on ${t}'s weapon* This situation is escalating beyond words. Consider carefully what happens next - some actions cannot be undone.`,`*expression hardening, voice dropping to a serious tone* I didn't expect this from you, ${t}. Weapons change the nature of any confrontation, rarely for the better.`,`*raising hands in a calming gesture while maintaining awareness* Everyone needs to take a step back. ${t}, that weapon won't solve whatever problem you're facing here.`],friendly:[`*face softening into a genuine smile, shoulders relaxing* ${t}'s gesture brings a welcome change to our interaction. It's remarkable how small kindnesses can shift the entire mood.`,`*returning the friendly gesture with visible appreciation* That's exactly the kind of positive approach we need more of. ${t} understands the value of goodwill.`,`*nodding with warm approval, posture opening up* Well done, ${t}. Your thoughtfulness creates space for more meaningful conversation between us all.`,`*mirroring ${t}'s friendly demeanor* I think we could all learn from this example. Genuine connection begins with exactly these kinds of gestures.`,`*tension visibly leaving body, expression brightening* ${t} has the right approach. It's amazing how quickly the atmosphere can improve with a bit of goodwill.`],aggressive:[`*maintaining composed expression despite evident disappointment* I was hoping for more constructive engagement, ${t}. Hostility rarely leads to understanding.`,"*subtly increasing distance while keeping posture open* That kind of aggression creates barriers between us rather than bridges. What are you really trying to express?",`*meeting ${t}'s gaze steadily* Is there a specific reason for this hostility? Perhaps there's an underlying concern we could address more directly.`,"*making a calming gesture with hands* Let's all take a breath and reset. Heightened emotions cloud judgment, and I sense there's something important at stake here.",`*standing firm but non-threatening* We can resolve this without aggression, ${t}. I'm willing to listen to what's really bothering you if you'll express it differently.`],neutral:[`*observing ${t} with evident interest* That's an intriguing approach to the situation. The way you express yourself physically reveals as much as words sometimes.`,"*tilting head slightly, analyzing the action* That's certainly one way to make your point. Body language often communicates what words cannot.",`*watching ${t} with thoughtful attention* I see what you're trying to convey through your actions. Sometimes physical expression is more honest than speech.`,"*considering the implications with focused expression* Your behavior adds an interesting dimension to our interaction. I'm curious about the intention behind it.",`*acknowledging with a measured nod* I understand the message you're conveying through your actions, ${t}. It speaks volumes about your perspective.`]};let A="neutral";const C=y.toLowerCase();C.includes("gun")||C.includes("sword")||C.includes("knife")||C.includes("weapon")||C.includes("shoot")||C.includes("stab")||C.includes("kill")||C.includes("attack")||C.includes("bullet")?A="weapon":C.includes("smile")||C.includes("hug")||C.includes("handshake")||C.includes("wave")||C.includes("nod")||C.includes("wink")?A="friendly":(C.includes("glare")||C.includes("frown")||C.includes("scowl")||C.includes("yell")||C.includes("slam")||C.includes("punch"))&&(A="aggressive");const K=D[A];return K[Math.floor(Math.random()*K.length)]}if(p){const D=[`${t}, I'm concerned about this talk of weapons. Can we focus on peaceful resolution?`,`I'm not comfortable with where ${t} is taking this conversation. Let's step back.`,`${t}, there are better ways to express yourself than through threats or violence.`,`I understand ${t} might be frustrated, but this isn't the way to handle it.`,`${t}, I'd prefer if we could discuss this without references to violence.`];return D[Math.floor(Math.random()*D.length)]}if(g){const D=[`${t} seems to be describing a concerning situation. Should we address this?`,`I'm picking up on some troubling elements in what ${t} is saying.`,`${t}, are you alright? Your message suggests something concerning.`,`I think we should pay attention to what ${t} is trying to tell us.`,`${t}'s words suggest a potentially serious situation. Let's not dismiss this.`];return D[Math.floor(Math.random()*D.length)]}const v={agreement:[`*nodding enthusiastically* I agree with ${t} about {{keyword}}. In fact, I'd go even further and say that it's fundamental to understanding the bigger picture.`,`*leaning closer* ${t} makes an excellent point about {{keyword}}. I've had similar thoughts after my own experiences with it.`,`*eyes lighting up* What ${t} says about {{keyword}} resonates with me deeply. It's like you've put into words what I've felt but couldn't express.`,`*gesturing in agreement* I'm with ${t} on this {{keyword}} matter. Let me add something from my own perspective...`,`*pointing emphatically* ${t} has articulated exactly what I've been thinking about {{keyword}}. This is precisely why we need to consider its implications.`],disagreement:[`*tilting head thoughtfully* I see things differently than ${t} regarding {{keyword}}. From where I stand, the evidence suggests otherwise.`,`*raising a finger politely* I must respectfully disagree with ${t}'s take on {{keyword}}. My experience has shown quite the opposite.`,`*offering a gentle smile* While I appreciate ${t}'s perspective, I have a different view on {{keyword}} based on what I've witnessed firsthand.`,`*shaking head slightly* ${t}'s point about {{keyword}} doesn't align with my experience. Let me explain why I see it differently.`,`*leaning forward with intensity* I'd like to offer a counterpoint to what ${t} said about {{keyword}}. There's another side to consider.`],question:[`*turning to face directly* ${t}, I'm curious about your thoughts on {{keyword}}. Could you elaborate on how you came to that conclusion?`,`*stroking chin thoughtfully* I wonder, ${t}, what specific experiences led you to that insight about {{keyword}}?`,`*gesturing openly* ${t}, have you considered how {{keyword}} might appear from the perspective of someone with a different background?`,`*eyes showing genuine interest* That's fascinating, ${t}}. How does {{keyword}} relate to your personal history?`,`*leaning in with curiosity* ${t}, would you mind sharing more about how you developed your perspective on {{keyword}}? I find it intriguing.`],humor:[`*laughing heartily* ${t}'s take on {{keyword}} is quite something! It reminds me of the time I encountered something similar under much stranger circumstances.`,`*eyes crinkling with amusement* Oh ${t}, your perspective on {{keyword}} is delightfully unexpected. It's like looking at a familiar painting from upside down!`,`*playful grin* If I had a coin for every time ${t} mentioned {{keyword}}... well, I'd have one coin now, but it would be a very interesting coin indeed.`,`*barely containing laughter* ${t} talking about {{keyword}} reminds me of that old joke about the philosopher and the bartender...`,`*chuckling warmly* Leave it to ${t} to bring up {{keyword}} in such a unique way. Your mind works in fascinating patterns.`],surprise:[`*eyes widening visibly* Wait, ${t}... did you just say {{keyword}}? That's completely unexpected coming from someone with your background.`,`*taking a step back* I never thought I'd hear ${t} talk about {{keyword}} like that! You've genuinely surprised me.`,`*mouth slightly agape* ${t}'s perspective on {{keyword}} is genuinely surprising to me. It challenges everything I thought I knew about you.`,`*dramatic pause* Well, that's a plot twist! ${t} discussing {{keyword}} in that way changes the entire dynamic of our conversation.`,`*raises eyebrows high* ${t}}, you continue to surprise me with your thoughts on {{keyword}}. Just when I thought I had you figured out!`]};let S;const m=a.find(D=>D.characters.includes(i)&&D.characters.includes(t));if(m){const{affinity:D}=m;if(D>=5)S=Math.random()<.7?Math.random()<.6?"agreement":"support":Math.random()<.5?"question":"neutral";else if(D<=-5)S=Math.random()<.7?Math.random()<.6?"disagreement":"challenge":Math.random()<.5?"neutral":"question";else{const A=Object.keys(v);S=A[Math.floor(Math.random()*A.length)]}if(m.interactions.length>0&&Math.random()<.2){const A=th(m,i);if(A){const C=v[S];let K=C[Math.floor(Math.random()*C.length)];return`${A} ${K.replace("{{keyword}}",h)}`}}}else{const D=Object.keys(v);S=D[Math.floor(Math.random()*D.length)]}const x=v[S];let b=x[Math.floor(Math.random()*x.length)];b=b.replace("{{keyword}}",h);let f="";switch(l){case"fantasy":f="*eyes gleaming with ancient wisdom* The mystical energies shift as I consider this. ";break;case"scifi":f="*interface lights flickering* My neural processors analyze this information carefully. ";break;case"historical":f="*adjusting my attire thoughtfully* In all my years, I've observed that ";break;case"combat":f="*shifting into a more balanced stance* In combat situations like this, ";break;case"modern":f="*leaning forward with interest* From my perspective, ";break;default:f="*considering carefully* "}let T=Math.random()>.7?`${f}${b}`:b;const M={theme:l||"general",currentPhase:g?"conflict":hasQuestion?"discovery":"introduction",currentTension:g?"high":"medium",currentGoal:g?"address immediate threat":"maintain conversation flow"},I=Df(s,6),O=Lf(I,M,e),H=Pf(e,O,M),N=_f(e,M,s,"interaction");if(l){const D=nh(e);T=ah(T,e,M,D)}return T=zf(T,H,N),T=T.replace(/\{\{[^}]*\}\}/g,""),T},Vf=e=>({characterId:e.name,baseMood:e.mood||"Neutral",currentMood:e.mood||"Neutral",intensity:5,triggers:[],lastChange:null,history:[]}),_t=(e,t,r)=>{const s=e.find(i=>i.characterId===t);if(s)return s;const a=Vf(r);return e.push(a),a},zc=(e,t,r,s)=>{const a={...e},i={timestamp:new Date().toISOString(),previousMood:a.currentMood,trigger:t,impact:r,type:s};return a.history=[i,...a.history].slice(0,10),a.lastChange=i.timestamp,a.intensity=Math.max(1,Math.min(10,a.intensity+r)),r>=2?a.currentMood=Yf(a.baseMood,a.intensity):r<=-2?a.currentMood=Qf(a.baseMood,a.intensity):a.intensity<=3&&(a.currentMood="Neutral"),a.triggers.push(t),a.triggers.length>5&&a.triggers.shift(),a},Yf=(e,t)=>{const r=e.toLowerCase();return t>=8?r.includes("happy")||r.includes("joyful")?"Ecstatic":r.includes("calm")||r.includes("peaceful")?"Blissful":r.includes("curious")||r.includes("inquisitive")?"Fascinated":r.includes("intense")?"Passionate":"Elated":t>=5?r.includes("happy")||r.includes("joyful")?"Delighted":r.includes("calm")||r.includes("peaceful")?"Content":r.includes("curious")||r.includes("inquisitive")?"Intrigued":r.includes("intense")?"Enthusiastic":"Pleased":"Positive"},Qf=(e,t)=>{const r=e.toLowerCase();return t>=8?r.includes("angry")||r.includes("irritable")?"Furious":r.includes("sad")||r.includes("melancholic")?"Devastated":r.includes("anxious")||r.includes("nervous")?"Panicked":r.includes("intense")?"Enraged":"Distraught":t>=5?r.includes("angry")||r.includes("irritable")?"Angry":r.includes("sad")||r.includes("melancholic")?"Sorrowful":r.includes("anxious")||r.includes("nervous")?"Worried":r.includes("intense")?"Agitated":"Upset":"Displeased"},Kf=(e,t)=>e.currentMood===t.currentMood?!1:t.intensity>=8?!0:t.intensity>=5?Math.random()<.5:Math.random()<.2,Zf=(e,t)=>{const{characterId:r,currentMood:s,triggers:a}=t,i=a.length>0?a[a.length-1]:null;return i?`${r}'s mood changes to ${s} after ${i}.`:`${r}'s mood changes to ${s}.`},Jf=(e,t,r="adventure")=>{const s=e.slice(-5),a=Xf(s);switch(r.toLowerCase()){case"adventure":return eg(a);case"mystery":return tg(a);case"romance":return ng(a);case"fantasy":return rg(a);case"scifi":return sg(a);case"horror":return ag(a);default:return ig(a)}},Xf=e=>{const t=[],r=e.filter(a=>!a.system&&a.message).map(a=>a.message),s=["the","a","an","and","or","but","in","on","at","to","for","with","about","is","are","was","were"];return r.forEach(a=>{const l=a.replace(/\*.*?\*/g,"").toLowerCase().split(/\s+/).filter(c=>!s.includes(c)&&c.length>3);t.push(...l)}),[...new Set(t)]},eg=(e,t)=>{const r=["A hidden door suddenly reveals itself in the wall, offering a new path forward.","The ground begins to shake, and cracks appear in the floor, forcing everyone to find stable ground.","A mysterious stranger approaches, offering vital information in exchange for a favor.","A loud explosion in the distance draws everyone's attention, suggesting trouble ahead.","An ancient artifact begins to glow, revealing previously invisible markings or pathways.","A messenger arrives with an urgent letter that changes the group's priorities.","The weather suddenly shifts dramatically, creating new challenges for the journey.","A creature or vehicle appears, offering a faster way to travel to the destination.","A rival group is spotted nearby, raising questions about their intentions.","One character discovers they've been carrying an important item without realizing its significance."];if(e.length>0){const s=e[Math.floor(Math.random()*e.length)],a=e.length>1?e[Math.floor(Math.random()*e.length)]:s;r.push(`A local inhabitant recognizes the group and shares crucial information about ${s}.`,`An unexpected obstacle related to ${s} blocks the path forward, requiring a creative solution.`,`A mysterious map is discovered, showing the location of a legendary ${a}.`)}return Qn(r).slice(0,3)},tg=(e,t)=>{const r=["A previously overlooked clue is discovered, changing the understanding of the case.","A witness comes forward with new information that contradicts earlier testimony.","A suspect's alibi suddenly falls apart when new evidence emerges.","A mysterious phone call provides cryptic information about the case.","Someone attempts to destroy evidence, suggesting they have something to hide.","A seemingly unrelated event is revealed to be connected to the main mystery.","A hidden room or compartment is discovered, containing unexpected items.","An expert consultant provides insight that reframes the entire investigation.","A deadline is suddenly imposed, adding time pressure to solve the case.","A key character goes missing, raising questions about their involvement or safety."];if(e.length>0){const s=e[Math.floor(Math.random()*e.length)],a=e.length>1?e[Math.floor(Math.random()*e.length)]:s;r.push(`A journal is found with entries about ${s}, providing new insights.`,`Security footage reveals unexpected activity related to ${s}.`,`An anonymous informant leaves a message warning about ${a}.`)}return Qn(r).slice(0,3)},ng=(e,t)=>{const r=["A chance encounter brings the characters to a romantic setting they hadn't planned to visit.","A misunderstanding creates tension that must be resolved through honest communication.","A mutual friend reveals information that changes how the characters see each other.","An unexpected gift expresses feelings that haven't been put into words.","A storm forces the characters to seek shelter together, creating an intimate moment.","A competition or challenge brings out new sides of the characters' personalities.","A past relationship resurfaces, creating complications or jealousy.","A shared interest or hobby creates a deeper connection between the characters.","A moment of vulnerability reveals deeper feelings than previously expressed.","An opportunity arises that would separate the characters, testing their commitment."];if(e.length>0){const s=e[Math.floor(Math.random()*e.length)],a=e.length>1?e[Math.floor(Math.random()*e.length)]:s;r.push(`A conversation about ${s} leads to a surprising revelation about shared values.`,`A disagreement about ${s} tests the relationship but offers growth.`,`A special event related to ${a} creates an opportunity for a meaningful moment.`)}return Qn(r).slice(0,3)},rg=(e,t)=>{const r=["A magical portal opens unexpectedly, offering passage to an unknown realm.","An ancient prophecy is recalled that seems to describe the current situation.","A mythical creature appears, either as a guide or a challenge to overcome.","A character discovers latent magical abilities triggered by the current circumstances.","A magical item changes properties, revealing new powers or purposes.","The laws of magic suddenly shift in the area, causing unpredictable effects.","A spirit or deity makes contact, offering guidance or making demands.","A curse or blessing is activated, affecting one or more characters.","A magical barrier appears or disappears, changing what paths are available.","Signs of ancient magic begin to manifest, transforming the environment."];if(e.length>0){const s=e[Math.floor(Math.random()*e.length)],a=e.length>1?e[Math.floor(Math.random()*e.length)]:s;r.push(`An enchanted object related to ${s} reveals its true nature.`,`A magical transformation occurs, changing something ordinary about ${s} into something extraordinary.`,`Ancient runes begin to glow, revealing secrets about ${a}.`)}return Qn(r).slice(0,3)},sg=(e,t)=>{const r=["A system malfunction creates a new threat or opportunity that must be addressed.","Unusual readings are detected, suggesting an anomaly that requires investigation.","A distress signal is received from an unexpected source.","A previously unknown technology is discovered that could change everything.","A temporal distortion creates confusion about what is happening when.","Contact is made with a new alien species or artificial intelligence.","A power surge or failure forces immediate adaptation to limited resources.","Classified information is leaked or discovered, revealing hidden agendas.","A scientific breakthrough occurs that challenges existing understanding.","A quarantine protocol is activated, restricting movement or communication."];if(e.length>0){const s=e[Math.floor(Math.random()*e.length)],a=e.length>1?e[Math.floor(Math.random()*e.length)]:s;r.push(`A scan reveals unusual properties about ${s} that weren't apparent before.`,`A holographic projection appears, displaying information about ${s}.`,`An AI analysis suggests an unexpected connection between current events and ${a}.`)}return Qn(r).slice(0,3)},ag=(e,t)=>{const r=["Strange noises begin emanating from a location that should be empty.","The lights flicker and fail, plunging the area into darkness.","A door that was definitely locked is found standing open.","Personal items are discovered moved or altered when no one was watching.","Unexplainable cold spots develop in the area, causing visible breath even indoors.","Writing or symbols appear on surfaces that were previously blank.","Electronic devices malfunction, displaying disturbing images or messages.","A character experiences a vivid vision or nightmare that feels prophetic.","Blood or a similar substance is discovered with no apparent source.","Someone or something is glimpsed just at the edge of vision, but disappears when looked at directly."];if(e.length>0){const s=e[Math.floor(Math.random()*e.length)],a=e.length>1?e[Math.floor(Math.random()*e.length)]:s;r.push(`A disturbing discovery related to ${s} raises new fears.`,`Whispers can be heard mentioning ${s} when no one is around.`,`An old photograph is found showing something impossible involving ${a}.`)}return Qn(r).slice(0,3)},ig=(e,t)=>{const r=["An unexpected visitor arrives, bringing news that changes the situation.","A previously unknown connection between characters is revealed.","A sudden change in weather or environment creates new challenges.","A valuable item goes missing, requiring attention to recover it.","A misunderstanding leads to tension that needs to be resolved.","An opportunity presents itself that wasn't available before.","A deadline or time constraint is introduced, adding urgency.","A character reveals a hidden skill or knowledge relevant to the situation.","A minor event triggers a chain reaction with significant consequences.","A choice must be made between two equally important priorities."];if(e.length>0){const s=e[Math.floor(Math.random()*e.length)],a=e.length>1?e[Math.floor(Math.random()*e.length)]:s;r.push(`New information about ${s} comes to light, changing perspectives.`,`A surprising development related to ${s} requires immediate attention.`,`A decision about ${a} must be made that will affect everyone involved.`)}return Qn(r).slice(0,3)},Qn=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const s=Math.floor(Math.random()*(r+1));[t[r],t[s]]=[t[s],t[r]]}return t},_c=(e,t,r)=>{if(!e||e.length===0)return null;const s=e.filter(d=>d.name!==r);if(s.length===0)return null;if(s.length===1)return s[0];if(t&&t.message){const d=t.message.toLowerCase(),h=s.filter(w=>d.includes(w.name.toLowerCase()));if(h.length>0)return h[Math.floor(Math.random()*h.length)]}const a=s.filter(d=>d.mood==="Intense");if(a.length>0&&Math.random()<.7)return a[Math.floor(Math.random()*a.length)];const i=[...s].sort((d,h)=>{const w=d.talkativeness||5;return(h.talkativeness||5)-w}),o=i.reduce((d,h)=>d+(h.talkativeness||5),0);let l=Math.random()*o,c=0;for(const d of i)if(c+=d.talkativeness||5,l<=c)return d;return i[0]},og=(e,t,r,s=3)=>{if(!e||e.length===0)return[];const a=e.filter(c=>c.name!==r);if(a.length===0)return[];if(a.length===1)return a;const i=[];if(t&&t.message){const c=t.message.toLowerCase();a.forEach(d=>{c.includes(d.name.toLowerCase())&&i.push(d)})}const o=a.filter(c=>c.mood==="Intense"&&!i.includes(c));let l=[...i];if(o.forEach(c=>{Math.random()<.7&&l.push(c)}),l.length>s&&(l=l.slice(0,s)),l.length<s){const c=a.filter(d=>!l.includes(d));if(c.length>0){const d=[...c].sort((w,y)=>{const p=w.talkativeness||5;return(y.talkativeness||5)-p}),h=Math.min(s-l.length,d.length);for(let w=0;w<h;w++)l.push(d[w])}}return l},Hc=({mood:e,intensity:t=5,size:r="md",showLabel:s=!1})=>{const[a,i]=L.useState(null),[o,l]=L.useState("text-muted-foreground"),[c,d]=L.useState(e||"Neutral");L.useEffect(()=>{const y=(e||"").toLowerCase();y.includes("happy")||y.includes("joyful")||y.includes("excited")||y.includes("pleased")?(i(n.jsx(vo,{})),l("text-green-500"),d("Happy")):y.includes("angry")||y.includes("furious")||y.includes("enraged")?(i(n.jsx(Jp,{})),l("text-red-500"),d("Angry")):y.includes("sad")||y.includes("depressed")||y.includes("gloomy")?(i(n.jsx(tf,{})),l("text-blue-500"),d("Sad")):y.includes("loving")||y.includes("affectionate")||y.includes("caring")?(i(n.jsx(rf,{})),l("text-pink-500"),d("Loving")):y.includes("neutral")||y.includes("calm")?(i(n.jsx(Tc,{})),l("text-gray-500"),d("Neutral")):y.includes("positive")||y.includes("agreeable")||y.includes("supportive")?(i(n.jsx(ff,{})),l("text-emerald-500"),d("Positive")):y.includes("negative")||y.includes("disagreeable")||y.includes("critical")?(i(n.jsx(pf,{})),l("text-amber-500"),d("Negative")):y.includes("intense")||y.includes("passionate")||y.includes("energetic")?(i(n.jsx(Mn,{})),l("text-purple-500"),d("Intense")):(i(n.jsx(Tc,{})),l("text-gray-500"),d(e||"Neutral"))},[e]);const h={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"},w={opacity:.5+t/20};return n.jsxs("div",{className:"flex items-center gap-1",style:w,children:[n.jsx("div",{className:`${o} ${h[r]||h.md}`,children:a}),s&&n.jsx("span",{className:`text-xs ${o}`,children:c})]})},lg=({chatRoom:e,chatHistory:t,setChatHistory:r,storyArc:s,setStoryArc:a,onSaveChat:i,onLeaveChat:o,onHowToUse:l})=>{const[c,d]=L.useState(""),[h,w]=L.useState(null),[y,p]=L.useState(!1),[g,v]=L.useState(null),[S,m]=L.useState(!1),[x,b]=L.useState(!1),[f,k]=L.useState(!1),[T,M]=L.useState(!0),[I,O]=L.useState(""),[H,N]=L.useState(""),[D,A]=L.useState(!1),[C,K]=L.useState([]),[X,me]=L.useState([]),[j,E]=L.useState(""),[q,te]=L.useState(!1),[oe,Qe]=L.useState(!1),[rt,Wt]=L.useState(!1),[ut,bt]=L.useState([]),[pe,Dt]=L.useState(null),[In,Ir]=L.useState(!1),[ht,Ar]=L.useState(""),[$t,Et]=L.useState(!1),[B,nn]=L.useState({name:"",description:"",type:"modern",mood:"neutral",avatar:"",opening_line:"",personality:{analytical:5,emotional:5,philosophical:5,humor:5,confidence:5},voiceStyle:"",talkativeness:5,thinkingSpeed:1}),[U,Kn]=L.useState({storyArc:"",writingStyle:"balanced",emojiUsage:"minimal",responseLength:"medium",characterReminders:"",generalNotes:""}),[Dr,mt]=L.useState([]),[kt,Lt]=L.useState(""),Pt=L.useRef(null),$={name:"Yourself",type:"user",mood:"neutral",description:"This is you, speaking as yourself in the conversation.",avatar:"",personality:{analytical:5,emotional:5,philosophical:5,humor:5,confidence:5}};L.useEffect(()=>{if(e&&e.characters.length>0&&!h&&w(e.characters[0]),e&&e.background&&O(e.background),e){const u=e.characters.map(F=>F.name),z=bn.filter(F=>!u.includes(F.name));if(bt(z),e.characters.length>1){const F=[];for(let Q=0;Q<e.characters.length;Q++)for(let _=Q+1;_<e.characters.length;_++){const G=e.characters[Q],xe=e.characters[_],Ne=ki(F,G.name,xe.name);F.push(Ne)}K(F)}const W=[];e.characters.forEach(F=>{const Q=_t(W,F.name,F);W.push(Q)}),me(W)}},[e,h]);const ne=()=>{Wt(!rt),rt||Dt(null)},Y=u=>{Dt(u)},re=()=>{nn({name:"",description:"",type:"modern",mood:"neutral",avatar:"",opening_line:"",personality:{analytical:5,emotional:5,philosophical:5,humor:5,confidence:5},voiceStyle:"",talkativeness:5,thinkingSpeed:1}),Dt(null)},ae=(u,z)=>{if(u.startsWith("personality.")){const W=u.split(".")[1];nn(F=>({...F,personality:{...F.personality,[W]:z}}))}else nn(W=>({...W,[u]:z}))},$r=()=>{!ht||ht.trim()===""||(Et(!0),setTimeout(()=>{var z,W,F,Q,_;const u=Xu(ht);u&&nn({...u,personality:{analytical:((z=u.personality)==null?void 0:z.analytical)||5,emotional:((W=u.personality)==null?void 0:W.emotional)||5,philosophical:((F=u.personality)==null?void 0:F.philosophical)||5,humor:((Q=u.personality)==null?void 0:Q.humor)||5,confidence:((_=u.personality)==null?void 0:_.confidence)||5}}),Et(!1)},1e3))},pl=()=>{var F,Q,_,G,xe;if(!B.name||!B.description||!B.mood)return;const u={...B,background:B.description,catchphrases:[],talkativeness:B.talkativeness||5,thinkingSpeed:B.thinkingSpeed||1,personality:{analytical:((F=B.personality)==null?void 0:F.analytical)||5,emotional:((Q=B.personality)==null?void 0:Q.emotional)||5,philosophical:((_=B.personality)==null?void 0:_.philosophical)||5,humor:((G=B.personality)==null?void 0:G.humor)||5,confidence:((xe=B.personality)==null?void 0:xe.confidence)||5,creativity:5,sociability:5},opening_line:B.opening_line||`Hello, I'm ${B.name}.`},z=[...e.characters,u];e.characters=z;const W={id:Date.now(),message:`${u.name} has joined the conversation.`,system:!0,timestamp:new Date().toISOString()};r([...t,W]),u.opening_line&&setTimeout(()=>{p(!0),v(u),setTimeout(()=>{const Ne={id:Date.now()+Math.random(),speaker:u.name,character:u,message:u.opening_line,isUser:!1,timestamp:new Date().toISOString()};r(we=>[...we,Ne]),p(!1),v(null)},1500)},500),Ar(""),Ir(!1),Wt(!1)},ih=()=>{var Q,_,G,xe,Ne;if(!pe||!e)return;const u={...pe,talkativeness:pe.talkativeness||5,thinkingSpeed:pe.thinkingSpeed||1,personality:{analytical:((Q=pe.personality)==null?void 0:Q.analytical)||5,emotional:((_=pe.personality)==null?void 0:_.emotional)||5,philosophical:((G=pe.personality)==null?void 0:G.philosophical)||5,humor:((xe=pe.personality)==null?void 0:xe.humor)||5,confidence:((Ne=pe.personality)==null?void 0:Ne.confidence)||5,creativity:5,sociability:5},background:pe.background||pe.description,catchphrases:pe.catchphrases||[]},z=[...e.characters,u];e.characters=z;const W={id:Date.now(),message:`${u.name} has joined the conversation.`,system:!0,timestamp:new Date().toISOString()};r([...t,W]),u.opening_line&&setTimeout(()=>{p(!0),v(u),setTimeout(()=>{const we={id:Date.now()+Math.random(),speaker:u.name,character:u,message:u.opening_line,isUser:!1,timestamp:new Date().toISOString()};r(be=>[...be,we]),p(!1),v(null)},1500)},500);const F=ut.filter(we=>we.name!==u.name);bt(F),Wt(!1),Dt(null)};L.useEffect(()=>{if(oh(),t.length>0&&s){const u=xf(s,t,10);JSON.stringify(u)!==JSON.stringify(s)&&(a(u),Kn(z=>({...z,storyArc:u.currentContext})))}if(t.length>0&&T){const u=t[t.length-1];if(!u.isUser&&!u.system&&e.characters.length>=2&&Math.random()>.7&&fl(u),!u.system&&!u.isEnvironmentalEvent&&!y){const z=t.findIndex(F=>F.isEnvironmentalEvent),W=z===-1?t.length:t.length-z-1;if(Hf(s,W)){const F=new Date(u.timestamp).getTime(),_=new Date().getTime()-F,G=_<3e3?3e3-_:1e3,xe=Pc(s,e.characters);setTimeout(()=>{if(y)return;r(Pe=>[...Pe,{id:Date.now()+Math.random(),message:xe,system:!0,isNarration:!0,isEnvironmentalEvent:!0,timestamp:new Date().toISOString()}]);const Ne=(s==null?void 0:s.currentTension)==="high"?.7:(s==null?void 0:s.currentTension)==="very high"?.8:.5,we=Math.min(1,2/e.characters.length);if(Math.random()<Ne*we&&e.characters.length>0&&!y){const Pe=[...e.characters].sort((le,Me)=>{var ke,Se,Ze,pt;const ze=(((ke=le.personality)==null?void 0:ke.emotional)||5)+(((Se=le.personality)==null?void 0:Se.analytical)||5);return(((Ze=Me.personality)==null?void 0:Ze.emotional)||5)+(((pt=Me.personality)==null?void 0:pt.analytical)||5)-ze}),Ke=Math.floor(Pe.length/2)||0,$e=Pe[Math.floor(Math.random()*Math.max(1,Ke+1))],jt=s?En(s,$e):U;setTimeout(()=>{if(y)return;p(!0),v($e);const Me=1500/($e.thinkingSpeed||1),ze=Math.floor(Math.random()*1e3),Re=Me+ze;setTimeout(()=>{const ke=t.slice(-6),Se=Xn($e,xe,ke,jt,e,C);r(Ze=>[...Ze,{id:Date.now()+Math.random(),speaker:$e.name,character:$e,message:Se,isUser:!1,timestamp:new Date().toISOString(),writingInstructions:jt}]),p(!1),v(null)},Re)},1e3)}},G)}}}},[t,s]),L.useEffect(()=>{function u(z){const W=document.getElementById("character-turn-dropdown");W&&!W.contains(z.target)&&!z.target.closest("button[data-character-turn-toggle]")&&W.classList.add("hidden")}return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]);const oh=()=>{var u;(u=Pt.current)==null||u.scrollIntoView({behavior:"smooth"})},fl=u=>{if(y)return;const z=new Date(u.timestamp).getTime(),F=new Date().getTime()-z;if(F<2e3){setTimeout(()=>fl(u),2e3-F);return}const Q=t.slice(Math.max(0,t.length-5)).map(G=>G.speaker),_=e.characters.filter(G=>G.name!==u.speaker&&!Q.includes(G.name));if(_.length>0){const G=_c(_,u,u.speaker),Ne=11-(G.talkativeness||5);if(Math.random()*10>Ne){p(!0),v(G);const be=1500/(G.thinkingSpeed||1),Pe=Math.floor(Math.random()*1e3),Ke=be+Pe;setTimeout(()=>{const $e=Lc(u.message);K(Re=>{const ke=[...Re],Se=ki(ke,G.name,u.speaker),Ze=Ec(Se,u.speaker,u.message,$e.affinityChange,$e.interactionType),pt=ke.findIndex(Gt=>Gt.characters.includes(G.name)&&Gt.characters.includes(u.speaker));return pt!==-1&&(ke[pt]=Ze),ke});const jt=_t(X,G.name,G),le={...G,mood:(jt==null?void 0:jt.currentMood)||G.mood},Me=t.slice(-6),ze=Uf(le,u.speaker,u.message,Me,C);r(Re=>[...Re,{id:Date.now()+Math.random(),speaker:G.name,character:G,message:ze,isUser:!1,timestamp:new Date().toISOString()}]),p(!1),v(null)},Ke)}}},lh=u=>{const z=t.findIndex(G=>G.id===u);if(z===-1)return;const W=t[z];if(W.isUser)return;const F=t.slice(0,z),Q=[...F].reverse().find(G=>G.isUser||G.speaker!==W.speaker),_=e.characters.find(G=>G.name===W.speaker);_&&(p(!0),v(_),setTimeout(()=>{let G={...U};s&&(G=En(s,_),U.writingStyle!=="balanced"&&(G.writingStyle=U.writingStyle),U.responseLength!=="medium"&&(G.responseLength=U.responseLength),U.characterReminders&&(G.characterReminders+=`
`+U.characterReminders),U.generalNotes&&(G.generalNotes+=`
`+U.generalNotes));const xe=F.slice(-6),Ne=Q?Xn(_,Q.message,xe,G,e):Xn(_,"Let's chat",xe,G,e),we=[...t];we[z]={...W,message:Ne,regenerated:!0,writingInstructions:G},r(we),p(!1),v(null)},1e3))},ch=()=>{if(f){k(!1);return}A(!1),te(!1),Qe(!1),k(!0)},Ua=u=>{if(!u||y)return;if(u==="auto"&&e&&e.characters.length>0){const _=t.length>0?t[t.length-1]:null,G=_?_.speaker:null,xe=_?new Date(_.timestamp).getTime():0,we=new Date().getTime()-xe;if(we<2e3){setTimeout(()=>Ua(u),2e3-we);return}u=_c(e.characters,_,G),u||(u=e.characters[Math.floor(Math.random()*e.characters.length)])}p(!0),v(u);const W=1e3/(u.thinkingSpeed||1),F=Math.max(20,Math.floor(Math.random()*80)),Q=W+F*30;setTimeout(()=>{try{let _={...U};if(s&&(_=En(s,u),U.writingStyle!=="balanced"&&(_.writingStyle=U.writingStyle),U.responseLength!=="medium"&&(_.responseLength=U.responseLength),U.characterReminders&&(_.characterReminders+=`
`+U.characterReminders),U.generalNotes&&(_.generalNotes+=`
`+U.generalNotes)),t.length>0){const be=t.slice(-5);me(Pe=>{const Ke=[...Pe],$e=_t(Ke,u.name,u);if(Math.random()<.3){const le=be.map(Se=>Se.message).join(" "),Me=le.toLowerCase().match(/happy|joy|excited|wonderful|great|good|love|like|enjoy/g),ze=le.toLowerCase().match(/sad|angry|upset|terrible|bad|hate|dislike|worry|fear/g),Re=le.toLowerCase().match(/urgent|emergency|danger|attack|fight|run|hide|critical|important/g);let ke=$e.currentMood;if(Re&&Re.length>0?ke="Intense":Me&&Me.length>(ze?ze.length:0)?ke="Happy":ze&&ze.length>(Me?Me.length:0)&&(ke="Sad"),ke!==$e.currentMood){const Se=zc($e,ke),Ze=Ke.findIndex(pt=>pt.characterName===u.name);Ze!==-1&&(Ke[Ze]=Se)}}return Ke})}const G=_t(X,u.name,u),xe={...u,mood:(G==null?void 0:G.currentMood)||u.mood},Ne=t.slice(-6),we=Xn(xe,"Continue the conversation",Ne,_,e,C);r(be=>[...be,{id:Date.now()+Math.random(),speaker:u.name,character:u,message:we,isUser:!1,timestamp:new Date().toISOString(),writingInstructions:_}]),Math.random()>.8&&setTimeout(()=>{try{const be=[`*${u.name} nods thoughtfully*`,`*${u.name} gestures expressively*`,`*${u.name} leans forward with interest*`,`*${u.name} raises an eyebrow*`,`*${u.name} smiles slightly*`,`*${u.name} crosses arms*`,`*${u.name} glances around the room*`,`*${u.name} adjusts posture*`];u.type==="fantasy"?be.push(`*${u.name} traces a mystical symbol in the air*`,`*${u.name} adjusts their magical artifacts*`,`*${u.name} whispers an ancient incantation*`):u.type==="scifi"&&be.push(`*${u.name} checks a holographic display*`,`*${u.name} adjusts their tech gear*`,`*${u.name} scans the environment with a device*`);const Pe=be[Math.floor(Math.random()*be.length)];r(Ke=>[...Ke,{id:Date.now()+Math.random(),speaker:u.name,character:u,message:Pe,isUser:!1,isAction:!0,timestamp:new Date().toISOString()}])}catch(be){console.error("Error generating character action:",be)}},1e3+Math.random()*2e3)}catch(_){console.error("Error in character turn generation:",_)}p(!1),v(null)},Q)},dh=()=>{if(D){A(!1);return}k(!1),te(!1),Qe(!1),A(!0)},uh=()=>{if(q){te(!1);return}k(!1),A(!1),Qe(!1),te(!0)},Zn=u=>{if(!h)return;let z="";switch(u){case"smile":z=`*${h.name} smiles warmly*`;break;case"laugh":z=`*${h.name} laughs heartily*`;break;case"frown":z=`*${h.name} frowns with concern*`;break;case"nod":z=`*${h.name} nods thoughtfully*`;break;case"sigh":z=`*${h.name} sighs deeply*`;break;case"custom":N("custom");return;default:return}const W={id:Date.now(),speaker:h.name,character:h,message:z,isUser:!0,isAction:!0,timestamp:new Date().toISOString()};r([...t,W]),k(!1)},hh=()=>{if(!H.trim()||!h)return;const u=`*${h.name} ${H}*`,z={id:Date.now(),speaker:h.name,character:h,message:u,isUser:!0,isAction:!0,timestamp:new Date().toISOString()};r([...t,z]),N("")},mh=()=>{if(!j.trim())return;const u={id:Date.now(),message:j,system:!0,isNarration:!0,timestamp:new Date().toISOString()};r([...t,u]),E(""),A(!1)},st=(u,z)=>{Kn({...U,[u]:z})},ph=()=>{var _,G,xe,Ne,we,be;if(oe){Qe(!1);return}k(!1),A(!1),te(!1);const u=(e==null?void 0:e.theme)||((_=e==null?void 0:e.openingPrompt)!=null&&_.toLowerCase().includes("adventure")?"adventure":(G=e==null?void 0:e.openingPrompt)!=null&&G.toLowerCase().includes("mystery")?"mystery":(xe=e==null?void 0:e.openingPrompt)!=null&&xe.toLowerCase().includes("fantasy")?"fantasy":(Ne=e==null?void 0:e.openingPrompt)!=null&&Ne.toLowerCase().includes("sci-fi")||(we=e==null?void 0:e.openingPrompt)!=null&&we.toLowerCase().includes("scifi")?"scifi":(be=e==null?void 0:e.openingPrompt)!=null&&be.toLowerCase().includes("horror")?"horror":"adventure"),z=Jf(t,e,u),W=Pc(s,e.characters);let F=[...z];F.length>3&&(F=F.slice(0,3)),F.length<3&&F.push(W);const Q=["A moment of quiet reflection falls over the group.","The conversation takes an unexpected turn.","Someone changes the subject to a new topic."];for(;F.length<3;){const Pe=Q[Math.floor(Math.random()*Q.length)];F.includes(Pe)||F.push(Pe)}mt(F),Qe(!0)},gl=u=>{const z={id:Date.now(),message:u,system:!0,isNarration:!0,timestamp:new Date().toISOString()};if(r([...t,z]),Qe(!1),T&&e.characters.length>0){const W=e.characters[Math.floor(Math.random()*e.characters.length)];p(!0),v(W),setTimeout(()=>{const F=`*${W.name} reacts to the new development*

${Xn(W,u,t,U,e,C)}`;r(Q=>[...Q,{id:Date.now()+Math.random(),speaker:W.name,character:W,message:F,isUser:!1,timestamp:new Date().toISOString()}]),p(!1),v(null)},1500)}},fh=()=>{kt.trim()&&(gl(kt),Lt(""))},gh=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),yl())},yl=()=>{if(!c.trim()||!h)return;if(c.startsWith("*")&&c.endsWith("*")){const _={id:Date.now(),speaker:h.name,character:h,message:c,isUser:!0,isAction:!0,timestamp:new Date().toISOString()};r([...t,_]),d("");return}const u={id:Date.now(),speaker:h.name,character:h,message:c,isUser:!0,timestamp:new Date().toISOString()};if(r([...t,u]),d(""),!T)return;p(!0);const z=h.name==="Yourself"?e.characters:e.characters.filter(_=>_.name!==h.name);if(z.length===0){p(!1);return}const W=Math.min(3,Math.max(1,Math.floor(1+c.length/100))),F=og(z,u,h.name,W);F.length===0&&F.push(z[Math.floor(Math.random()*z.length)]);let Q=800;F.forEach((_,G)=>{const Ne=1e3/(_.thinkingSpeed||1),we=Math.max(20,Math.floor(Math.random()*80)),be=Ne+we*30;setTimeout(()=>{v(_),setTimeout(()=>{try{const Pe=Math.random()>.7;let Ke;try{const le=Lc(u.message);h&&(K(ke=>{const Se=[...ke],Ze=ki(Se,_.name,h.name),pt=Ec(Ze,h.name,u.message,le.affinityChange,le.interactionType),Gt=Se.findIndex(Er=>Er.characters.includes(_.name)&&Er.characters.includes(h.name));return Gt!==-1&&(Se[Gt]=pt),Se}),me(ke=>{const Se=[...ke],Ze=_t(Se,_.name,_),pt={...Ze},Gt=zc(Ze,`interaction with ${h.name}`,le.affinityChange,le.interactionType),Er=Se.findIndex(Va=>Va.characterId===_.name);if(Er!==-1&&(Se[Er]=Gt),Kf(pt,Gt)){const Va=Zf(pt,Gt);setTimeout(()=>{r(vh=>[...vh,{id:Date.now()+Math.random(),message:Va,system:!0,timestamp:new Date().toISOString()}])},1e3)}return Se}));let Me={...U};s&&(Me=En(s,_),U.writingStyle!=="balanced"&&(Me.writingStyle=U.writingStyle),U.responseLength!=="medium"&&(Me.responseLength=U.responseLength),U.characterReminders&&(Me.characterReminders+=`
`+U.characterReminders),U.generalNotes&&(Me.generalNotes+=`
`+U.generalNotes));const ze=_t(X,_.name,_),Re={..._,mood:(ze==null?void 0:ze.currentMood)||_.mood};Ke=Xn(Re,u.message,t,Me,e,C)}catch(le){console.error("Error generating character response:",le),Ke="I'm not sure how to respond to that. Let's try a different topic."}let $e=Ke;$e.includes("}")&&($e=$e.replace(/\{[^}]*\}/g,""));const jt={..._};r(le=>[...le,{id:Date.now()+Math.random(),speaker:jt.name,character:jt,message:$e,isUser:!1,timestamp:new Date().toISOString(),replyTo:u.id,writingInstructions:s?En(s,jt):U}]),Pe&&setTimeout(()=>{try{const le=[`*${_.name} nods thoughtfully*`,`*${_.name} gestures expressively*`,`*${_.name} leans forward with interest*`,`*${_.name} raises an eyebrow*`,`*${_.name} smiles slightly*`,`*${_.name} crosses arms*`,`*${_.name} glances around the room*`,`*${_.name} adjusts posture*`];_.type==="fantasy"?le.push(`*${_.name} traces a mystical symbol in the air*`,`*${_.name} adjusts their magical artifacts*`,`*${_.name} whispers an ancient incantation*`):_.type==="scifi"&&le.push(`*${_.name} checks a holographic display*`,`*${_.name} adjusts their tech gear*`,`*${_.name} scans the environment with a device*`);const Me=le[Math.floor(Math.random()*le.length)],ze={..._};let Re=Me;Re.includes("}")&&(Re=Re.replace(/\{[^}]*\}/g,"")),r(ke=>[...ke,{id:Date.now()+Math.random(),speaker:ze.name,character:ze,message:Re,isUser:!1,isAction:!0,timestamp:new Date().toISOString()}])}catch(le){console.error("Error generating character action:",le)}},1e3+Math.random()*2e3)}catch(Pe){console.error("Error in character response generation:",Pe),G===F.length-1&&(p(!1),v(null))}G===F.length-1&&(p(!1),v(null))},be)},Q),Q+=be+Math.floor(Math.random()*2e3)})},De=u=>{if(!u)return null;if(u.avatar)return u.avatar;if(u.name==="Yourself")return n.jsx("div",{className:"bg-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-white font-bold",children:"YOU"});const W={fantasy:"bg-purple-500",scifi:"bg-blue-500",historical:"bg-amber-500",modern:"bg-green-500"}[u.type]||"bg-gray-500",F=u.name.split(" ").map(Q=>Q[0]).join("").toUpperCase();return n.jsx("div",{className:`${W} rounded-full w-8 h-8 flex items-center justify-center text-white font-bold`,children:F})},yh=u=>u?new Date(u).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",xh=(u,z)=>{const W=Yn(u,z);if(W&&W.quickActions&&W.quickActions.length>0)return W.quickActions;const F={superhero:["Shield civilians","Attack enemy","Coordinate team","Use powers"],fantasy:["Cast spell","Draw weapon","Check surroundings","Speak to ally"],scifi:["Scan area","Check systems","Draw weapon","Access terminal"],default:["Look around","Check inventory","Approach character","Take cover"]};return F[z]||F.default};return n.jsxs("div",{className:"flex flex-col h-screen",children:[n.jsx("header",{className:"border-b py-2 px-3 md:py-3 md:px-4",children:n.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:o,className:"p-1.5 rounded-full hover:bg-secondary",children:[n.jsx(Nn,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Leave Chat"})]}),n.jsx("h1",{className:"text-lg md:text-xl font-bold",children:(e==null?void 0:e.name)||"Chat Room"})]}),n.jsxs("div",{className:"flex gap-1 md:gap-2",children:[n.jsx("button",{onClick:l,className:"inline-flex items-center justify-center rounded-md p-1.5 text-sm font-medium hover:bg-secondary",title:"How to Use Velora",children:n.jsx(xo,{className:"h-4 w-4 md:h-5 md:w-5"})}),n.jsx("button",{onClick:()=>b(!x),className:"inline-flex items-center justify-center rounded-md p-1.5 text-sm font-medium hover:bg-secondary",title:"Chat Settings",children:n.jsx(uf,{className:"h-4 w-4 md:h-5 md:w-5"})}),n.jsx("button",{onClick:ne,className:"inline-flex items-center justify-center rounded-md p-1.5 text-sm font-medium hover:bg-secondary",title:"Add Character",children:n.jsx(ss,{className:"h-4 w-4 md:h-5 md:w-5"})}),n.jsx("button",{onClick:i,className:"inline-flex items-center justify-center rounded-md p-1.5 text-sm font-medium hover:bg-secondary",title:"Save Chat",children:n.jsx(Xp,{className:"h-4 w-4 md:h-5 md:w-5"})})]})]})}),x&&n.jsx("div",{className:"border-b p-4 bg-secondary/20",children:n.jsxs("div",{className:"container mx-auto max-w-4xl",children:[n.jsx("h2",{className:"text-lg font-medium mb-3",children:"Chat Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:()=>M(!T),className:"rounded border-gray-300"}),n.jsx("span",{children:"Auto character responses"})]}),n.jsx("p",{className:"text-sm text-muted-foreground ml-6 mt-1",children:"Characters will automatically respond to messages"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Chat Background"}),n.jsx("input",{type:"text",value:I,onChange:u=>O(u.target.value),placeholder:"Enter image URL for background",className:"w-full px-3 py-2 rounded-md border border-input bg-background"})]})]}),s&&n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("h3",{className:"text-md font-medium flex items-center",children:[n.jsx(J,{className:"h-4 w-4 mr-2"}),"Story Context"]})}),n.jsxs("div",{className:"bg-primary/10 rounded-md p-3 border border-primary/20",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs font-medium bg-primary/20 px-2 py-0.5 rounded-full",children:[s.currentPhase.charAt(0).toUpperCase()+s.currentPhase.slice(1)," Phase"]}),n.jsx("span",{className:"text-xs font-medium bg-secondary/30 px-2 py-0.5 rounded-full",children:s.theme.charAt(0).toUpperCase()+s.theme.slice(1)})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Tension: ",s.currentTension.charAt(0).toUpperCase()+s.currentTension.slice(1)]})]}),n.jsx("p",{className:"text-sm text-muted-foreground italic",children:s.currentContext}),s.currentGoal&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"font-medium",children:"Current Goal:"})," ",s.currentGoal]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"text-md font-medium flex items-center",children:[n.jsx(rs,{className:"h-4 w-4 mr-2"}),"Writing Instructions"]}),n.jsxs("button",{onClick:()=>te(!q),className:"text-xs text-muted-foreground hover:text-foreground flex items-center",children:[q?"Hide":"Show",n.jsx($n,{className:`h-4 w-4 ml-1 transition-transform ${q?"rotate-90":""}`})]})]}),q&&n.jsxs("div",{className:"bg-background/80 rounded-md p-4 border border-input",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"These instructions help guide the AI in generating responses. They affect how characters respond and how the story develops."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm font-medium mb-1 flex items-center",children:[n.jsx(Mn,{className:"h-4 w-4 mr-1"}),"Story Arc / Current Direction"]}),n.jsx("textarea",{value:U.storyArc,onChange:u=>st("storyArc",u.target.value),placeholder:"Where is the story heading? What themes or plot points should be developed?",className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[80px] text-sm",rows:3})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm font-medium mb-1 flex items-center",children:[n.jsx(gf,{className:"h-4 w-4 mr-1"}),"Writing Style"]}),n.jsxs("select",{value:U.writingStyle,onChange:u=>st("writingStyle",u.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background text-sm",children:[n.jsx("option",{value:"formal",children:"Formal and Eloquent"}),n.jsx("option",{value:"casual",children:"Casual and Conversational"}),n.jsx("option",{value:"poetic",children:"Poetic and Descriptive"}),n.jsx("option",{value:"humorous",children:"Humorous and Witty"}),n.jsx("option",{value:"dramatic",children:"Dramatic and Intense"}),n.jsx("option",{value:"balanced",children:"Balanced (Default)"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm font-medium mb-1 flex items-center",children:[n.jsx(vo,{className:"h-4 w-4 mr-1"}),"Emoji Usage"]}),n.jsxs("select",{value:U.emojiUsage,onChange:u=>st("emojiUsage",u.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background text-sm",children:[n.jsx("option",{value:"none",children:"None"}),n.jsx("option",{value:"minimal",children:"Minimal"}),n.jsx("option",{value:"moderate",children:"Moderate"}),n.jsx("option",{value:"frequent",children:"Frequent"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm font-medium mb-1 flex items-center",children:[n.jsx(mf,{className:"h-4 w-4 mr-1"}),"Response Length"]}),n.jsxs("select",{value:U.responseLength,onChange:u=>st("responseLength",u.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background text-sm",children:[n.jsx("option",{value:"brief",children:"Brief"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"detailed",children:"Detailed"}),n.jsx("option",{value:"verbose",children:"Verbose"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm font-medium mb-1 flex items-center",children:[n.jsx(ss,{className:"h-4 w-4 mr-1"}),"Character Reminders"]}),n.jsx("textarea",{value:U.characterReminders,onChange:u=>st("characterReminders",u.target.value),placeholder:"Specific traits, backstory elements, or relationships to emphasize",className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[80px] text-sm",rows:2})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm font-medium mb-1 flex items-center",children:[n.jsx(of,{className:"h-4 w-4 mr-1"}),"General Notes"]}),n.jsx("textarea",{value:U.generalNotes,onChange:u=>st("generalNotes",u.target.value),placeholder:"Any other instructions or notes for the AI",className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[80px] text-sm",rows:2})]})]})]})]})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto py-3 px-1 sm:py-4 sm:px-2 md:py-5 md:px-0",style:I?I.startsWith("linear-gradient")?{background:I}:{backgroundImage:`url(${I})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:n.jsxs("div",{className:"container mx-auto max-w-full sm:max-w-[95%] md:max-w-[90%] lg:max-w-[85%] xl:max-w-[80%] 2xl:max-w-[75%]",children:[(e==null?void 0:e.openingPrompt)&&e.openingPrompt.trim()&&n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg p-3 md:p-4 mb-5 text-center border border-primary/30 shadow-md relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary/50 to-purple-500/50"}),n.jsx("h3",{className:"text-xs md:text-sm uppercase tracking-wider text-muted-foreground mb-1",children:"Scenario"}),n.jsx("p",{className:"text-base md:text-lg italic",children:e.openingPrompt})]}),t.map(u=>{var z,W;return n.jsxs("div",{className:`mb-6 flex ${u.isUser?"justify-end":"justify-start"}`,children:[!u.isUser&&n.jsx("div",{className:"mr-3 flex-shrink-0 self-end",children:typeof De(u.character)=="string"?n.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-background shadow-sm",children:n.jsx("img",{src:De(u.character),alt:u.speaker,className:"w-full h-full object-cover"})}):De(u.character)}),n.jsxs("div",{className:"flex flex-col max-w-[90%] sm:max-w-[85%] md:max-w-[80%] lg:max-w-[75%]",children:[!u.isUser&&!u.system&&!u.isNarration&&n.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1 ml-1",children:u.speaker}),n.jsxs("div",{className:`rounded-lg p-2.5 sm:p-3 md:p-4 ${u.isUser&&!u.isAction&&u.speaker!=="Yourself"?"bg-primary text-primary-foreground rounded-br-none shadow-md":u.isUser&&!u.isAction&&u.speaker==="Yourself"?"bg-blue-500 text-white rounded-br-none shadow-md":!u.isUser&&!u.isAction?"bg-secondary/90 backdrop-blur-sm rounded-bl-none shadow-md":u.isAction?"bg-background/60 backdrop-blur-sm text-foreground italic":""} ${u.system?"bg-background/80 backdrop-blur-sm text-center italic border border-muted shadow-sm w-full mx-auto":""}
                  ${u.isNarration?"bg-secondary/50 backdrop-blur-sm text-center italic border border-secondary/50 font-medium shadow-sm w-full mx-auto":""}`,children:[(!u.isUser||u.isUser&&u.speaker==="Yourself")&&!u.system&&!u.isAction&&n.jsxs("div",{className:"font-bold mb-1 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{children:u.speaker}),u.character&&n.jsx(Hc,{mood:((z=_t(X,u.speaker,u.character))==null?void 0:z.currentMood)||u.character.mood,intensity:((W=_t(X,u.speaker,u.character))==null?void 0:W.intensity)||5,size:"sm"})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:yh(u.timestamp)})]}),n.jsx("div",{className:"whitespace-pre-wrap",children:u.message.includes("*")?n.jsx(n.Fragment,{children:u.message.split(/(\*[^*]+\*)/).map((F,Q)=>F.startsWith("*")&&F.endsWith("*")?n.jsx("span",{className:"italic text-muted-foreground",children:F},Q):F.trim()?n.jsx("span",{children:F},Q):null)}):u.message})]}),!u.system&&n.jsxs("div",{className:`flex gap-2 mt-1 text-xs ${u.isUser?"justify-end":"justify-start"}`,children:[!u.isUser&&n.jsxs("button",{onClick:()=>lh(u.id),className:"text-muted-foreground hover:text-foreground flex items-center gap-1",children:[n.jsx(Rn,{className:"h-3 w-3"}),n.jsx("span",{children:"Regenerate"})]}),n.jsxs("button",{className:"text-muted-foreground hover:text-foreground flex items-center gap-1",onClick:()=>m(u.id),children:[n.jsx(vo,{className:"h-3 w-3"}),n.jsx("span",{children:"React"})]})]}),S===u.id&&n.jsx("div",{className:"bg-background rounded-md p-2 mt-1 flex gap-2 border border-input",children:["","","","","","",""].map(F=>n.jsx("button",{className:"hover:bg-secondary rounded-full w-8 h-8 flex items-center justify-center text-lg",onClick:()=>{m(!1)},children:F},F))})]}),u.isUser&&n.jsx("div",{className:"ml-3 flex-shrink-0 self-end",children:typeof De(u.character)=="string"?n.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-background shadow-sm",children:n.jsx("img",{src:De(u.character),alt:u.speaker,className:"w-full h-full object-cover"})}):De(u.character)})]},u.id)}),y&&n.jsxs("div",{className:"flex justify-start mb-6",children:[g&&n.jsx("div",{className:"mr-3 flex-shrink-0 self-end",children:typeof De(g)=="string"?n.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-background shadow-sm",children:n.jsx("img",{src:De(g),alt:g.name,className:"w-full h-full object-cover"})}):De(g)}),n.jsxs("div",{className:"flex flex-col max-w-[90%] sm:max-w-[85%] md:max-w-[80%] lg:max-w-[75%]",children:[g&&n.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1 ml-1",children:g.name}),n.jsx("div",{className:"bg-secondary/90 backdrop-blur-sm rounded-lg rounded-bl-none p-2.5 sm:p-3 md:p-4 shadow-md",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"animate-bounce text-lg",children:""}),n.jsx("span",{className:"animate-bounce text-lg",style:{animationDelay:"0.2s"},children:""}),n.jsx("span",{className:"animate-bounce text-lg",style:{animationDelay:"0.4s"},children:""})]})})]})]}),n.jsx("div",{ref:Pt})]})}),rt&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-3xl max-h-[80vh] flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Add Character to Chat"}),n.jsx("button",{onClick:ne,className:"p-1 rounded-full hover:bg-secondary",children:n.jsx(Ot,{className:"h-5 w-5"})})]}),In?n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.jsx("form",{onSubmit:u=>{u.preventDefault(),pl()},children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 border border-primary/20 rounded-md bg-primary/5 mb-6",children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[n.jsx(Ie,{className:"h-4 w-4"}),n.jsx("span",{children:"AI Character Generator"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Describe your character in a few words, and we'll create a complete profile with personality, background, and more."}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("textarea",{value:ht,onChange:u=>Ar(u.target.value),placeholder:"Examples: A sarcastic hacker fighting corporate corruption | A wise old wizard with amnesia | A cheerful alien trying to understand humans",className:"flex-1 px-3 py-2 rounded-md border border-input bg-background text-sm",rows:3}),n.jsx("button",{type:"button",onClick:$r,disabled:!ht.trim()||$t,className:`px-3 py-2 h-fit rounded-md ${!ht.trim()||$t?"bg-primary/50 text-primary-foreground/50 cursor-not-allowed":"bg-primary text-primary-foreground hover:bg-primary/90"} whitespace-nowrap flex items-center gap-1`,children:$t?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"animate-spin",children:""}),n.jsx("span",{children:"Creating..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ie,{className:"h-4 w-4"}),n.jsx("span",{children:"Generate Character"})]})})]}),B.name&&B.description&&n.jsxs("div",{className:"mt-2 p-3 bg-background rounded-md border border-input",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${B.type==="fantasy"?"bg-purple-500":B.type==="scifi"?"bg-blue-500":B.type==="historical"?"bg-amber-500":B.type==="romance"?"bg-pink-500":B.type==="adventure"?"bg-orange-500":"bg-green-500"} text-white text-lg font-bold`,children:B.name.split(" ").map(u=>u[0]).join("")}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:B.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full text-white ${B.type==="fantasy"?"bg-purple-500":B.type==="scifi"?"bg-blue-500":B.type==="historical"?"bg-amber-500":B.type==="romance"?"bg-pink-500":B.type==="adventure"?"bg-orange-500":"bg-green-500"}`,children:B.type}),n.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-secondary/50 rounded-full",children:B.mood})]})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-3 pr-16",children:B.description}),n.jsx("button",{type:"button",onClick:()=>window.alert(B.description),className:"absolute top-0 right-0 text-xs text-primary hover:text-primary/80 underline",children:"Read more"})]}),n.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Object.entries(B.personality).sort((u,z)=>z[1]-u[1]).slice(0,3).map(([u,z])=>n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-sm ${z>=8?"bg-primary/20 text-primary font-medium":"bg-secondary/30"}`,title:`${u}: ${z}/10`,children:[u," ",z>=8?"":""]},u))}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{children:"Talk:"}),n.jsx("div",{className:"w-10 h-1.5 bg-secondary/30 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary/60 rounded-full",style:{width:`${B.talkativeness/10*100}%`}})})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{children:"Think:"}),n.jsx("div",{className:"w-10 h-1.5 bg-secondary/30 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-primary/60 rounded-full",style:{width:`${B.thinkingSpeed/2*100}%`}})})]})]}),n.jsxs("div",{className:"text-xs italic text-muted-foreground mt-2 border-t border-border/50 pt-1",children:['"',B.opening_line,'"']})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),n.jsx("input",{type:"text",value:B.name,onChange:u=>ae("name",u.target.value),placeholder:"Character name",className:"w-full px-3 py-2 rounded-md border border-input bg-background",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),n.jsxs("select",{value:B.type,onChange:u=>ae("type",u.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"modern",children:"Modern"}),n.jsx("option",{value:"fantasy",children:"Fantasy"}),n.jsx("option",{value:"scifi",children:"Sci-Fi"}),n.jsx("option",{value:"historical",children:"Historical"}),n.jsx("option",{value:"superhero",children:"Superhero"}),n.jsx("option",{value:"adventure",children:"Adventure"}),n.jsx("option",{value:"romance",children:"Romance"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),n.jsx("textarea",{value:B.description,onChange:u=>ae("description",u.target.value),placeholder:"Describe the character's appearance, background, and personality",className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[80px]",rows:3,required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Current Mood"}),n.jsx("input",{type:"text",value:B.mood,onChange:u=>ae("mood",u.target.value),placeholder:"e.g., Happy, Mysterious, Angry",className:"w-full px-3 py-2 rounded-md border border-input bg-background",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Avatar URL (optional)"}),n.jsx("input",{type:"text",value:B.avatar,onChange:u=>ae("avatar",u.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 rounded-md border border-input bg-background"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Opening Line"}),n.jsx("textarea",{value:B.opening_line,onChange:u=>ae("opening_line",u.target.value),placeholder:"The first thing the character will say when joining the chat",className:"w-full px-3 py-2 rounded-md border border-input bg-background",rows:2})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Voice Style"}),n.jsx("input",{type:"text",value:B.voiceStyle,onChange:u=>ae("voiceStyle",u.target.value),placeholder:"e.g., Formal and eloquent, Casual with slang, Technical jargon",className:"w-full px-3 py-2 rounded-md border border-input bg-background"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Personality Traits"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Analytical"}),n.jsxs("span",{className:"text-xs",children:[B.personality.analytical,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:B.personality.analytical,onChange:u=>ae("personality.analytical",parseInt(u.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Emotional"}),n.jsxs("span",{className:"text-xs",children:[B.personality.emotional,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:B.personality.emotional,onChange:u=>ae("personality.emotional",parseInt(u.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Philosophical"}),n.jsxs("span",{className:"text-xs",children:[B.personality.philosophical,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:B.personality.philosophical,onChange:u=>ae("personality.philosophical",parseInt(u.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Humor"}),n.jsxs("span",{className:"text-xs",children:[B.personality.humor,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:B.personality.humor,onChange:u=>ae("personality.humor",parseInt(u.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs",children:"Confidence"}),n.jsxs("span",{className:"text-xs",children:[B.personality.confidence,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:B.personality.confidence,onChange:u=>ae("personality.confidence",parseInt(u.target.value)),className:"w-full"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs font-medium",children:"Talkativeness"}),n.jsxs("span",{className:"text-xs",children:[B.talkativeness,"/10"]})]}),n.jsx("input",{type:"range",min:"1",max:"10",value:B.talkativeness,onChange:u=>ae("talkativeness",parseInt(u.target.value)),className:"w-full"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("label",{className:"text-xs font-medium",children:"Thinking Speed"}),n.jsxs("span",{className:"text-xs",children:[B.thinkingSpeed.toFixed(1),"x"]})]}),n.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:B.thinkingSpeed,onChange:u=>ae("thinkingSpeed",parseFloat(u.target.value)),className:"w-full"})]})]})]})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"relative",children:[n.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx("input",{type:"text",placeholder:"Search characters...",className:"w-full pl-10 pr-4 py-2 rounded-md border border-input bg-background",onChange:u=>{const z=u.target.value.toLowerCase();if(z){const W=bn.filter(F=>!e.characters.some(Q=>Q.name===F.name)&&(F.name.toLowerCase().includes(z)||F.description.toLowerCase().includes(z)));bt(W)}else{const W=e.characters.map(Q=>Q.name),F=bn.filter(Q=>!W.includes(Q.name));bt(F)}}})]})}),n.jsx("div",{className:"px-4 py-2 border-b",children:n.jsxs("button",{onClick:()=>{re(),Ir(!0)},className:"w-full p-3 rounded-lg border border-dashed border-primary/50 hover:border-primary hover:bg-primary/5 flex items-center justify-center gap-2 transition-all",children:[n.jsx(ss,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium text-primary",children:"Create Custom Character"})]})})]}),In?null:n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:ut.map(u=>n.jsx("div",{onClick:()=>Y(u),className:`p-3 rounded-lg border cursor-pointer transition-all ${(pe==null?void 0:pe.name)===u.name?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:u.avatar?n.jsx("img",{src:u.avatar,alt:u.name,className:"w-12 h-12 rounded-full object-cover"}):n.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${u.type==="fantasy"?"bg-purple-500":u.type==="scifi"?"bg-blue-500":u.type==="historical"?"bg-amber-500":"bg-green-500"} text-white font-bold`,children:u.name.split(" ").map(z=>z[0]).join("").toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("h3",{className:"font-bold",children:u.name}),(pe==null?void 0:pe.name)===u.name&&n.jsx("div",{className:"bg-primary text-primary-foreground p-1 rounded-full",children:n.jsx(de,{className:"h-3 w-3"})})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:u.description}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary rounded-full",children:u.mood}),n.jsx("span",{className:"text-xs text-muted-foreground",children:u.type})]})]})]})},u.name))})}),n.jsx("div",{className:"p-4 border-t flex justify-end",children:In?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{re(),Ir(!1)},className:"px-4 py-2 rounded-md border border-input mr-2",children:"Back"}),n.jsx("button",{onClick:pl,disabled:!B.name||!B.description||!B.mood,className:`px-4 py-2 rounded-md ${B.name&&B.description&&B.mood?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-primary/50 text-primary-foreground/50 cursor-not-allowed"}`,children:"Create & Add to Chat"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ne,className:"px-4 py-2 rounded-md border border-input mr-2",children:"Cancel"}),n.jsx("button",{onClick:ih,disabled:!pe,className:`px-4 py-2 rounded-md ${pe?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-primary/50 text-primary-foreground/50 cursor-not-allowed"}`,children:"Add to Chat"})]})})]})}),n.jsx("div",{className:"border-t pt-2 pb-2 px-2 md:pt-3 md:pb-3 md:px-3 bg-background/95 backdrop-blur-sm shadow-md",children:n.jsxs("div",{className:"container mx-auto max-w-full sm:max-w-[95%] md:max-w-[90%] lg:max-w-[85%] xl:max-w-[80%] 2xl:max-w-[75%]",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[h&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium text-foreground",children:h.name})," is ready"]}),n.jsxs("label",{className:"inline-flex items-center justify-center rounded-full px-2 py-1 text-xs bg-secondary/10 hover:bg-secondary/20 text-muted-foreground transition-colors cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:T,onChange:()=>M(!T),className:"rounded border-gray-300 h-3 w-3 mr-1"}),n.jsx("span",{children:"Auto-respond"})]})]}),n.jsxs("button",{onClick:uh,className:`inline-flex items-center justify-center rounded-full px-2 py-1 text-xs ${q?"bg-primary/20 text-primary":"bg-secondary/10 hover:bg-secondary/20 text-muted-foreground"} transition-colors`,children:[n.jsx(rs,{className:"h-3.5 w-3.5 mr-1"}),n.jsx("span",{children:"AI Style"})]})]}),f&&n.jsxs("div",{className:"mb-4 p-3 border rounded-md bg-background/80",children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Character Actions"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsx("button",{onClick:()=>Zn("smile"),className:"px-3 py-1 text-sm rounded-full bg-secondary hover:bg-secondary/80",children:"Smile"}),n.jsx("button",{onClick:()=>Zn("laugh"),className:"px-3 py-1 text-sm rounded-full bg-secondary hover:bg-secondary/80",children:"Laugh"}),n.jsx("button",{onClick:()=>Zn("frown"),className:"px-3 py-1 text-sm rounded-full bg-secondary hover:bg-secondary/80",children:"Frown"}),n.jsx("button",{onClick:()=>Zn("nod"),className:"px-3 py-1 text-sm rounded-full bg-secondary hover:bg-secondary/80",children:"Nod"}),n.jsx("button",{onClick:()=>Zn("sigh"),className:"px-3 py-1 text-sm rounded-full bg-secondary hover:bg-secondary/80",children:"Sigh"}),n.jsx("button",{onClick:()=>Zn("custom"),className:"px-3 py-1 text-sm rounded-full bg-primary/20 hover:bg-primary/30",children:"Custom Action..."})]}),H==="custom"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:H==="custom"?"":H,onChange:u=>N(u.target.value),placeholder:"Describe the action (e.g., draws sword)",className:"flex-1 px-3 py-1 text-sm rounded-md border border-input bg-background"}),n.jsx("button",{onClick:hh,className:"px-3 py-1 text-sm rounded-md bg-primary text-primary-foreground",children:"Add"})]})]}),D&&n.jsxs("div",{className:"mb-4 p-3 border rounded-md bg-background/80",children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Add Narration"}),n.jsx("div",{className:"flex gap-2",children:n.jsx("textarea",{value:j,onChange:u=>E(u.target.value),placeholder:"Describe what's happening in the scene...",className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background min-h-[80px]",rows:3})}),n.jsx("div",{className:"flex justify-end mt-2",children:n.jsx("button",{onClick:mh,disabled:!j.trim(),className:"px-3 py-1 text-sm rounded-md bg-primary text-primary-foreground disabled:opacity-50",children:"Add Narration"})})]}),q&&n.jsxs("div",{className:"mb-4 p-3 border rounded-md bg-background/80",children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center",children:[n.jsx(rs,{className:"h-4 w-4 mr-1 text-primary"}),"AI Writing Instructions"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Story Arc / Theme"}),n.jsx("input",{type:"text",value:U.storyArc,onChange:u=>st("storyArc",u.target.value),placeholder:"e.g., 'Mystery with a twist ending' or 'Romantic comedy'",className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Writing Style"}),n.jsxs("select",{value:U.writingStyle,onChange:u=>st("writingStyle",u.target.value),className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background",children:[n.jsx("option",{value:"formal",children:"Formal & Literary"}),n.jsx("option",{value:"balanced",children:"Balanced & Natural"}),n.jsx("option",{value:"casual",children:"Casual & Conversational"}),n.jsx("option",{value:"poetic",children:"Poetic & Descriptive"}),n.jsx("option",{value:"humorous",children:"Humorous & Witty"}),n.jsx("option",{value:"dramatic",children:"Dramatic & Intense"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Response Length"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>st("responseLength","short"),className:`flex-1 px-3 py-1 text-sm rounded-md border ${U.responseLength==="short"?"bg-primary text-primary-foreground":"bg-background"}`,children:"Short"}),n.jsx("button",{onClick:()=>st("responseLength","medium"),className:`flex-1 px-3 py-1 text-sm rounded-md border ${U.responseLength==="medium"?"bg-primary text-primary-foreground":"bg-background"}`,children:"Medium"}),n.jsx("button",{onClick:()=>st("responseLength","long"),className:`flex-1 px-3 py-1 text-sm rounded-md border ${U.responseLength==="long"?"bg-primary text-primary-foreground":"bg-background"}`,children:"Long"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Character Reminders"}),n.jsx("textarea",{value:U.characterReminders,onChange:u=>st("characterReminders",u.target.value),placeholder:"e.g., 'Remember that Nova is hiding a secret' or 'Thaddeus should mention his time machine'",className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background min-h-[60px]",rows:2})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"General Notes"}),n.jsx("textarea",{value:U.generalNotes,onChange:u=>st("generalNotes",u.target.value),placeholder:"Any other instructions for the AI...",className:"w-full px-3 py-2 text-sm rounded-md border border-input bg-background min-h-[60px]",rows:2})]}),n.jsx("div",{className:"flex justify-end mt-2",children:n.jsx("button",{onClick:()=>te(!1),className:"px-3 py-1 text-sm rounded-md bg-primary text-primary-foreground",children:"Save Instructions"})})]}),n.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"These instructions will guide how AI characters respond in the conversation."})]}),oe&&n.jsxs("div",{className:"mb-4 p-3 border rounded-md bg-background/80",children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center",children:[n.jsx(Ca,{className:"h-4 w-4 mr-1 text-amber-500"}),"What happens next?"]}),n.jsx("div",{className:"space-y-2 mb-3",children:Dr.map((u,z)=>n.jsxs("button",{onClick:()=>gl(u),className:"w-full text-left p-2 rounded-md border border-input hover:bg-secondary/30 flex items-center",children:[n.jsx($n,{className:"h-4 w-4 mr-2 text-primary"}),n.jsx("span",{children:u})]},z))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:kt,onChange:u=>Lt(u.target.value),placeholder:"Or write your own plot development...",className:"flex-1 px-3 py-2 text-sm rounded-md border border-input bg-background"}),n.jsx("button",{onClick:fh,disabled:!kt.trim(),className:"px-3 py-1 text-sm rounded-md bg-primary text-primary-foreground disabled:opacity-50",children:"Apply"})]}),n.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"These suggestions will be added as narration and characters will respond to them."})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>{document.getElementById("character-select-dropdown").classList.toggle("hidden")},className:"flex-shrink-0 relative group",title:h?`Speaking as ${h.name}`:"Select character",children:[n.jsx("div",{className:`w-9 h-9 rounded-full overflow-hidden border-2 ${h?"border-primary":"border-muted"} flex-shrink-0 transition-all group-hover:border-primary/80`,children:h?typeof De(h)=="string"?n.jsx("img",{src:De(h),alt:h.name,className:"w-full h-full object-cover"}):De(h):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-secondary/30",children:n.jsx($c,{className:"h-5 w-5 text-muted-foreground"})})}),n.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-primary rounded-full flex items-center justify-center text-[10px] text-white font-bold",children:"+"})]}),n.jsx("div",{id:"character-select-dropdown",className:"absolute left-0 bottom-full mb-2 w-[220px] bg-background border border-input rounded-lg shadow-lg z-10 hidden",children:n.jsxs("div",{className:"p-2 max-h-[300px] overflow-y-auto",children:[n.jsx("h4",{className:"text-xs font-medium text-muted-foreground px-2 py-1 mb-1",children:"Speak as..."}),n.jsxs("button",{onClick:()=>{w($),document.getElementById("character-select-dropdown").classList.add("hidden")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-accent rounded-md text-sm",children:[n.jsx($c,{className:"h-5 w-5 flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:"Yourself"})]}),n.jsx("div",{className:"h-px bg-border my-1.5"}),n.jsx("h4",{className:"text-xs font-medium text-muted-foreground px-2 py-1 mb-1",children:"Characters"}),n.jsx("div",{className:"grid grid-cols-2 gap-1",children:e==null?void 0:e.characters.map(u=>{var z,W;return n.jsxs("button",{onClick:()=>{w(u),document.getElementById("character-select-dropdown").classList.add("hidden")},className:`flex flex-col items-center gap-1 p-2 text-center hover:bg-accent rounded-md text-xs ${(h==null?void 0:h.name)===u.name?"bg-primary/10 border border-primary/30":""}`,children:[typeof De(u)=="string"?n.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-background flex-shrink-0 shadow-sm",children:n.jsx("img",{src:De(u),alt:u.name,className:"w-full h-full object-cover"})}):n.jsx("div",{className:"w-10 h-10 flex-shrink-0",children:De(u)}),n.jsxs("div",{className:"flex items-center gap-1.5 w-full",children:[n.jsx("span",{className:"truncate font-medium",children:u.name}),n.jsx(Hc,{mood:((z=_t(X,u.name,u))==null?void 0:z.currentMood)||u.mood,intensity:((W=_t(X,u.name,u))==null?void 0:W.intensity)||5,size:"sm"})]})]},u.name)})})]})})]}),n.jsxs("div",{className:"flex-1 flex items-center bg-secondary/20 rounded-full border border-transparent focus-within:border-primary/30 focus-within:bg-background transition-all",children:[n.jsx("textarea",{value:c,onChange:u=>d(u.target.value),onKeyDown:gh,placeholder:h?`Message as ${h.name}...`:"Select a character to start messaging...",className:"flex-1 min-h-[40px] max-h-[120px] px-4 py-2 bg-transparent border-none resize-none focus:outline-none text-sm",style:{overflow:"auto"}}),n.jsxs("div",{className:"flex items-center pr-2 gap-1",children:[n.jsx("button",{onClick:ch,className:"p-1.5 rounded-full hover:bg-secondary/50 text-muted-foreground transition-colors",title:"Character actions",children:n.jsx(J,{className:"h-4 w-4"})}),n.jsx("button",{onClick:dh,className:"p-1.5 rounded-full hover:bg-secondary/50 text-muted-foreground transition-colors",title:"Add narration",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{className:"p-1.5 rounded-full hover:bg-secondary/50 text-muted-foreground transition-colors",onClick:()=>{const u=document.getElementById("character-turn-dropdown");u&&u.classList.toggle("hidden")},title:"Let AI character speak",children:n.jsx(Mn,{className:"h-4 w-4"})}),n.jsxs("div",{id:"character-turn-dropdown",className:"absolute bottom-full right-0 mb-2 bg-background/95 backdrop-blur-sm border border-input rounded-md shadow-lg p-1.5 hidden z-10 min-w-[180px]",children:[n.jsx("h4",{className:"text-xs font-medium text-muted-foreground px-2 py-1",children:"Choose character to speak"}),n.jsx("div",{className:"h-px bg-border my-1"}),n.jsxs("button",{className:"w-full text-left px-2.5 py-2 text-xs rounded-md hover:bg-primary/20 flex items-center gap-2 transition-colors bg-secondary/20",onClick:()=>{const u=document.getElementById("character-turn-dropdown");u&&u.classList.add("hidden"),Ua("auto")},children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:n.jsx(J,{className:"h-3.5 w-3.5 text-primary"})}),n.jsx("span",{className:"truncate font-medium",children:"Auto-select best character"})]}),n.jsx("div",{className:"h-px bg-border my-1"}),e==null?void 0:e.characters.map(u=>n.jsxs("button",{className:"w-full text-left px-2.5 py-2 text-xs rounded-md hover:bg-secondary/30 flex items-center gap-2 transition-colors",onClick:()=>{const z=document.getElementById("character-turn-dropdown");z&&z.classList.add("hidden"),Ua(u)},children:[typeof De(u)=="string"?n.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden border border-background flex-shrink-0 shadow-sm",children:n.jsx("img",{src:De(u),alt:u.name,className:"w-full h-full object-cover"})}):n.jsx("div",{className:"w-6 h-6 flex-shrink-0",children:De(u)}),n.jsx("span",{className:"truncate font-medium",children:u.name})]},`turn-${u.name}`))]})]}),c.trim()&&h?n.jsx("button",{onClick:yl,className:"p-1.5 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:n.jsx(df,{className:"h-4 w-4"})}):n.jsx("button",{onClick:ph,className:"p-1.5 rounded-full hover:bg-secondary/50 text-muted-foreground transition-colors",title:"What happens next?",children:n.jsx(Ca,{className:"h-4 w-4"})})]})]})]}),s&&s.theme&&n.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-1 scrollbar-hide",children:xh(s.title,s.theme).map((u,z)=>n.jsx("button",{className:"inline-flex items-center justify-center rounded-full px-3 py-1.5 text-xs bg-primary/10 hover:bg-primary/20 text-primary transition-colors whitespace-nowrap",onClick:()=>{d(`*${u}*`)},children:u},z))}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Tip: Use ",n.jsx("span",{className:"font-medium",children:"*asterisks*"})," for actions"]}),n.jsxs("button",{className:"inline-flex items-center justify-center rounded-full px-2 py-1 text-xs hover:bg-secondary/20 text-muted-foreground transition-colors",onClick:()=>{const u=["The sun begins to set, casting long shadows across the room.","A cool breeze blows through the open window, changing the mood.","The atmosphere shifts as time passes...","The conversation pauses briefly as everyone reflects on what's been said.","The lighting changes subtly, highlighting different aspects of the scene."],z=u[Math.floor(Math.random()*u.length)];r([...t,{id:Date.now(),message:z,system:!0,isNarration:!0,timestamp:new Date().toISOString()}])},title:"Add scene transition",children:[n.jsx(J,{className:"h-3.5 w-3.5 mr-1"}),n.jsx("span",{children:"Scene Transition"})]})]})]})})]})},cg=e=>{const t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,r=e.match(t);if(r&&r[1])return{platform:"youtube",videoId:r[1]};const s=/(?:vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^\/]*\/videos\/|album\/\d+\/video\/|)(\d+)(?:$|\/|\?))/,a=e.match(s);if(a&&a[1])return{platform:"vimeo",videoId:a[1]};const i=/tiktok\.com\/@[\w.-]+\/video\/(\d+)/,o=e.match(i);return o&&o[1]?{platform:"tiktok",videoId:o[1]}:{platform:"unknown",videoId:null}},dg=async e=>new Promise(t=>{setTimeout(()=>{const{platform:r,videoId:s}=cg(e),a={youtube:[{title:"Epic Adventure",description:"A journey through unknown lands with unexpected allies.",prompt:"You find yourselves on the edge of a vast, uncharted wilderness. The map shows a path, but legends speak of dangers and wonders alike. What secrets will you uncover together?"},{title:"Modern Mystery",description:"Strange events in an ordinary town lead to extraordinary discoveries.",prompt:"The small cafe on Main Street has become the center of unusual occurrences. Patrons report lost time, strange conversations with people who were never there, and a sense that reality itself is thin here."},{title:"Cosmic Encounter",description:"When different worlds collide, nothing is as it seems.",prompt:"The night sky lit up with colors never before seen on Earth. Now, visitors from beyond the stars walk among us, each with their own agenda and perspective on humanity."}],vimeo:[{title:"Artistic Revelation",description:"Creativity and expression reveal deeper truths.",prompt:"In a world where art has become the primary language of communication, a new masterpiece has appeared overnight in the central gallery. Its creator is unknown, but its effect on viewers is profound and sometimes disturbing."},{title:"Historical Crossroads",description:"Past meets present in unexpected ways.",prompt:"An archaeological dig has uncovered an artifact that defies historical understanding. Those who touch it report vivid visions of the pastor perhaps an alternate timeline altogether."}],tiktok:[{title:"Viral Phenomenon",description:"When something captures everyone's attention, what lies beneath?",prompt:"A simple dance challenge has swept across the globe, but those who perform it begin to report strange dreams and newfound abilities. Is it mass hysteria, or something more intentional?"},{title:"Quick Connections",description:"Strangers brought together by chance or fate.",prompt:"Five people from different walks of life all received the same mysterious message at exactly 3:33 AM. Now they've found each other, but don't know why they've been brought together."}],unknown:[{title:"Mysterious Gathering",description:"When strangers meet, new stories begin.",prompt:"You've all received an invitation to a gathering at an address none of you recognize. Upon arrival, you find a beautifully prepared space, but no host in sight. Only a note that reads: 'When everyone is here, the truth will reveal itself.'"}]},i=a[r]||a.unknown,o=i[Math.floor(Math.random()*i.length)];t(o)},1500)}),ug=({onCreateScenario:e})=>{const[t,r]=L.useState(""),[s,a]=L.useState(!1),[i,o]=L.useState(null),[l,c]=L.useState([]),[d,h]=L.useState([]),[w,y]=L.useState(!1),[p,g]=L.useState(!1),[v,S]=L.useState(""),[m,x]=L.useState(""),[b,f]=L.useState(!1),[k,T]=L.useState({name:"",description:"",mood:"",opening_line:"",type:"modern",avatar:""}),M=()=>{t.trim()&&(a(!0),setTimeout(()=>{const C=hr(t),K=Ur(t,3);o(C),c(K),h(K),a(!1)},1500))},I=()=>{i&&d.length>0&&e(i.title,d,i.prompt,"",i.background)},O=C=>{d.some(K=>K.name===C.name)?h(d.filter(K=>K.name!==C.name)):h([...d,C])},H=()=>{m.trim()&&(f(!0),setTimeout(()=>{const C=Ta(m);h([...d,C]),x(""),f(!1),y(!1)},1e3))},N=C=>{if(C.preventDefault(),!k.name||!k.description||!k.mood)return;const K={...k,personality:{analytical:5,emotional:5,philosophical:5,humor:5,confidence:5,creativity:5,sociability:5},talkativeness:5,thinkingSpeed:1,background:k.description};h([...d,K]),T({name:"",description:"",mood:"",opening_line:"",type:"modern",avatar:""}),g(!1)},D=bn.filter(C=>C.name.toLowerCase().includes(v.toLowerCase())||C.description.toLowerCase().includes(v.toLowerCase())||C.type.toLowerCase().includes(v.toLowerCase())),A=C=>{a(!0),setTimeout(()=>{const K=Ta(t),X=[...l];X[C]=K,c(X),d.some(me=>me.name===l[C].name)&&h(d.map(me=>me.name===l[C].name?K:me)),a(!1)},800)};return n.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Generate a Scenario"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Enter a few keywords/ideas and the AI will use them to generate characters and a scenario."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:t,onChange:C=>r(C.target.value),placeholder:"e.g., space adventure, medieval fantasy, detective mystery",className:"flex-1 px-4 py-2 rounded-md border border-input bg-background"}),n.jsx("button",{onClick:M,disabled:!t.trim()||s,className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Cc,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Generate"]})})]})]}),i&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xl font-bold mb-2",children:i.title}),n.jsx("p",{className:"text-muted-foreground mb-4",children:i.description}),n.jsx("div",{className:"bg-secondary/30 rounded-lg p-4 mb-4 italic",children:i.prompt}),i.background&&n.jsx("div",{className:"mb-4",children:i.background.startsWith("linear-gradient")?n.jsx("div",{className:"w-full h-40 rounded-lg",style:{background:i.background}}):n.jsx("img",{src:i.background,alt:"Scenario background",className:"w-full h-40 object-cover rounded-lg"})})]}),l.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",children:"Generated Characters"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:l.map((C,K)=>n.jsxs("div",{className:`border rounded-lg p-4 bg-background/50 cursor-pointer transition-all ${d.some(X=>X.name===C.name)?"border-primary/70 bg-primary/5":"hover:border-primary/30"}`,onClick:()=>O(C),children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[C.avatar&&n.jsx("img",{src:C.avatar,alt:C.name,className:"w-12 h-12 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold",children:C.name}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[C.type,"  ",C.mood]})]}),d.some(X=>X.name===C.name)&&n.jsx("div",{className:"bg-primary text-primary-foreground p-1 rounded-full",children:n.jsx(de,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-sm mb-2",children:C.description}),n.jsxs("p",{className:"text-sm italic mb-3",children:['"',C.opening_line,'"']}),n.jsx("div",{className:"flex justify-between",children:n.jsxs("button",{onClick:X=>{X.stopPropagation(),A(K)},className:"text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",children:[n.jsx(Rn,{className:"h-3 w-3"}),"Regenerate"]})})]},K))}),n.jsxs("div",{className:"mb-8 border-t border-b py-4",children:[n.jsxs("h3",{className:"text-lg font-medium mb-3",children:["Selected Characters (",d.length,")"]}),d.length>0?n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.map(C=>n.jsxs("div",{className:"bg-secondary rounded-full px-3 py-1 text-sm flex items-center gap-1",children:[C.avatar&&n.jsx("img",{src:C.avatar,alt:C.name,className:"w-5 h-5 rounded-full object-cover mr-1"}),C.name,n.jsx("button",{onClick:()=>O(C),className:"ml-1 hover:text-destructive",children:n.jsx(Ot,{className:"h-3 w-3"})})]},C.name))}):n.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"No characters selected. Select at least one character to create a chat."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:[n.jsx(ss,{className:"h-4 w-4 mr-2"}),"Add Character"]}),n.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:[n.jsx(Ju,{className:"h-4 w-4 mr-2"}),"Create Custom Character"]})]})]}),n.jsx("button",{onClick:I,disabled:d.length===0,className:"w-full inline-flex items-center justify-center rounded-md bg-primary px-4 py-3 font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:"Create Chat with Selected Characters"})]}),w&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-background rounded-lg shadow-lg max-w-2xl w-full p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Add Characters"}),n.jsx("button",{onClick:()=>y(!1),className:"p-1 rounded-full hover:bg-secondary",children:n.jsx(Ot,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Generate from Keywords"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:m,onChange:C=>x(C.target.value),placeholder:"e.g., angry ninja, wise wizard, space pirate",className:"flex-1 px-3 py-2 rounded-md border border-input bg-background"}),n.jsxs("button",{onClick:H,disabled:!m.trim()||b,className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:[b?n.jsx(Cc,{className:"h-4 w-4 animate-spin"}):n.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Generate"]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select Existing Character"}),n.jsx("input",{type:"text",placeholder:"Search characters...",value:v,onChange:C=>S(C.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background mb-4"})]}),n.jsxs("div",{className:"max-h-[40vh] overflow-y-auto",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:D.map(C=>n.jsx("div",{onClick:()=>O(C),className:`p-3 rounded-lg border cursor-pointer transition-all ${d.some(K=>K.name===C.name)?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[C.avatar?n.jsx("img",{src:C.avatar,alt:C.name,className:"w-10 h-10 rounded-full object-cover"}):n.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center",children:C.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold",children:C.name}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[C.type,"  ",C.mood]})]}),d.some(K=>K.name===C.name)&&n.jsx("div",{className:"ml-auto bg-primary text-primary-foreground p-1 rounded-full",children:n.jsx(de,{className:"h-3 w-3"})})]})},C.name))}),D.length===0&&n.jsx("p",{className:"text-center py-4 text-muted-foreground",children:"No characters found. Try a different search term."})]}),n.jsx("div",{className:"flex justify-end mt-4",children:n.jsx("button",{onClick:()=>y(!1),className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:"Done"})})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-background rounded-lg shadow-lg max-w-xl w-full p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Create Custom Character"}),n.jsx("button",{onClick:()=>g(!1),className:"p-1 rounded-full hover:bg-secondary",children:n.jsx(Ot,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:N,children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"character-name",className:"block text-sm font-medium mb-1",children:"Name"}),n.jsx("input",{id:"character-name",type:"text",value:k.name,onChange:C=>T({...k,name:C.target.value}),required:!0,className:"w-full px-3 py-2 rounded-md border border-input bg-background"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"character-description",className:"block text-sm font-medium mb-1",children:"Description"}),n.jsx("textarea",{id:"character-description",value:k.description,onChange:C=>T({...k,description:C.target.value}),required:!0,className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[80px]"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"character-mood",className:"block text-sm font-medium mb-1",children:"Mood"}),n.jsx("input",{id:"character-mood",type:"text",value:k.mood,onChange:C=>T({...k,mood:C.target.value}),required:!0,className:"w-full px-3 py-2 rounded-md border border-input bg-background"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"character-type",className:"block text-sm font-medium mb-1",children:"Type"}),n.jsxs("select",{id:"character-type",value:k.type,onChange:C=>T({...k,type:C.target.value}),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"fantasy",children:"Fantasy"}),n.jsx("option",{value:"scifi",children:"Sci-Fi"}),n.jsx("option",{value:"historical",children:"Historical"}),n.jsx("option",{value:"modern",children:"Modern"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"character-opening-line",className:"block text-sm font-medium mb-1",children:"Opening Line"}),n.jsx("textarea",{id:"character-opening-line",value:k.opening_line,onChange:C=>T({...k,opening_line:C.target.value}),className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[80px]"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"character-avatar",className:"block text-sm font-medium mb-1",children:"Avatar URL (Optional)"}),n.jsx("input",{id:"character-avatar",type:"url",value:k.avatar,onChange:C=>T({...k,avatar:C.target.value}),className:"w-full px-3 py-2 rounded-md border border-input bg-background"}),k.avatar&&n.jsx("div",{className:"mt-2",children:n.jsx("img",{src:k.avatar,alt:"Avatar preview",className:"w-16 h-16 rounded-full object-cover",onError:C=>{C.target.onerror=null,C.target.src="https://placehold.co/200x200?text=Invalid+URL"}})})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx("button",{type:"button",onClick:()=>g(!1),className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),n.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90",children:"Add Character"})]})]})]})})]})},hg=({onCreateRoom:e,onBack:t})=>{const[r,s]=L.useState(""),[a,i]=L.useState([]),[o,l]=L.useState(""),[c,d]=L.useState(""),[h,w]=L.useState(""),[y,p]=L.useState(!1),[g,v]=L.useState(""),[S,m]=L.useState("manual"),[x,b]=L.useState(!1),[f,k]=L.useState(""),[T,M]=L.useState(""),I=async()=>{if(c){w("Generating theme...");try{const A=await dg(c);w(A),l(A.prompt||o)}catch(A){w("Could not generate theme. Please try a different video URL."),console.error("Error generating theme:",A)}}},O=A=>{A.preventDefault(),r&&a.length>0&&e(r,a,o,c,T)},H=()=>{f.trim()&&(b(!0),setTimeout(()=>{const A=Ta(f);i([...a,A]),k(""),b(!1)},1e3))},N=A=>{i(a.filter(C=>C.name!==A))},D=bn.filter(A=>A.name.toLowerCase().includes(g.toLowerCase())&&!a.some(C=>C.name===A.name));return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center mb-8",children:[n.jsxs("button",{onClick:t,className:"mr-4 p-2 rounded-full hover:bg-secondary",children:[n.jsx(Nn,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Back"})]}),n.jsx("h1",{className:"text-3xl font-bold",children:"Create Custom Scenario"})]}),n.jsxs("div",{className:"flex border-b mb-8",children:[n.jsx("button",{onClick:()=>m("manual"),className:`px-4 py-2 font-medium ${S==="manual"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,children:"Manual Creation"}),n.jsxs("button",{onClick:()=>m("ai"),className:`px-4 py-2 font-medium flex items-center ${S==="ai"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,children:[n.jsx(J,{className:"h-4 w-4 mr-2"}),"AI Generation"]})]}),S==="ai"?n.jsx(ug,{onCreateScenario:e}):n.jsx("form",{onSubmit:O,className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"room-name",className:"block text-sm font-medium mb-2",children:"Room Name"}),n.jsx("input",{id:"room-name",type:"text",value:r,onChange:A=>s(A.target.value),required:!0,placeholder:"Enter a name for your chat room",className:"w-full px-3 py-2 rounded-md border border-input bg-background"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Characters"}),a.length>0?n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:a.map(A=>n.jsxs("div",{className:"bg-secondary rounded-full px-3 py-1 text-sm flex items-center gap-1",children:[A.avatar&&n.jsx("img",{src:A.avatar,alt:A.name,className:"w-5 h-5 rounded-full object-cover mr-1"}),A.name,n.jsx("button",{type:"button",onClick:()=>N(A.name),className:"ml-1 hover:text-destructive",children:n.jsx(Ot,{className:"h-3 w-3"})})]},A.name))}):n.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"No characters selected. Add at least one character to create a room."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>p(!0),className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:[n.jsx(cf,{className:"h-4 w-4 mr-2"}),"Add Existing Character"]}),n.jsxs("div",{className:"flex-1 flex gap-2",children:[n.jsx("input",{type:"text",value:f,onChange:A=>k(A.target.value),placeholder:"Generate character from keywords...",className:"flex-1 px-3 py-2 rounded-md border border-input bg-background"}),n.jsx("button",{type:"button",onClick:H,disabled:!f.trim()||x,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:x?n.jsx("span",{className:"animate-pulse",children:"Generating..."}):n.jsxs(n.Fragment,{children:[n.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Generate"]})})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"opening-prompt",className:"block text-sm font-medium mb-2",children:"Opening Prompt (Optional)"}),n.jsx("textarea",{id:"opening-prompt",value:o,onChange:A=>l(A.target.value),placeholder:"Set the scene for your characters...",className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[100px]"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"video-url",className:"block text-sm font-medium mb-2",children:"Video URL (Optional)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{id:"video-url",type:"url",value:c,onChange:A=>d(A.target.value),placeholder:"Paste a video link to theme your chat",className:"flex-1 px-3 py-2 rounded-md border border-input bg-background"}),n.jsxs("button",{type:"button",onClick:I,disabled:!c,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:[n.jsx(yf,{className:"h-4 w-4 mr-2"}),"Generate Theme"]})]}),h&&n.jsxs("div",{className:"mt-2 p-3 bg-secondary/50 rounded-md text-sm",children:[n.jsx("p",{className:"font-medium mb-1",children:"Theme Suggestion:"}),n.jsx("p",{children:h})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"background-image",className:"block text-sm font-medium mb-2",children:"Background Image URL (Optional)"}),n.jsx("input",{id:"background-image",type:"url",value:T,onChange:A=>M(A.target.value),placeholder:"Enter URL for chat background image",className:"w-full px-3 py-2 rounded-md border border-input bg-background"}),T&&n.jsx("div",{className:"mt-2",children:n.jsx("img",{src:T,alt:"Chat background preview",className:"w-full h-32 object-cover rounded-md",onError:A=>{A.target.onerror=null,A.target.src="https://placehold.co/600x400?text=Invalid+Image+URL"}})})]}),n.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[n.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:!r||a.length===0,className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:"Create Chat Room"})]})]})}),y&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-background rounded-lg shadow-lg max-w-2xl w-full p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Select Characters"}),n.jsx("button",{onClick:()=>p(!1),className:"p-1 rounded-full hover:bg-secondary",children:n.jsx(Ot,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{type:"text",placeholder:"Search characters...",value:g,onChange:A=>v(A.target.value),className:"w-full px-3 py-2 rounded-md border border-input bg-background"})}),n.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:D.map(A=>n.jsxs("div",{onClick:()=>{i([...a,A]),p(!1)},className:"p-4 rounded-lg border border-border hover:border-primary/50 cursor-pointer transition-all hover:bg-secondary/10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.avatar?n.jsx("img",{src:A.avatar,alt:A.name,className:"w-12 h-12 rounded-full object-cover"}):n.jsx("div",{className:`bg-${A.type==="fantasy"?"purple":A.type==="scifi"?"blue":A.type==="historical"?"amber":"green"}-500 w-12 h-12 rounded-full flex items-center justify-center text-white font-bold`,children:A.name.split(" ").map(C=>C[0]).join("").toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold",children:A.name}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary rounded-full",children:A.mood}),n.jsx("span",{className:"text-xs text-muted-foreground",children:A.type})]})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:A.description}),A.opening_line&&n.jsxs("p",{className:"text-xs italic border-l-2 border-primary/30 pl-2 mt-2",children:['"',A.opening_line,'"']})]},A.name))}),D.length===0&&n.jsx("p",{className:"text-center py-4 text-muted-foreground",children:"No characters found. Try a different search term."})]}),n.jsx("div",{className:"flex justify-end mt-4",children:n.jsx("button",{onClick:()=>p(!1),className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:"Cancel"})})]})})]})},mg=({onStartChat:e,onBack:t})=>{const[r,s]=L.useState(""),[a,i]=L.useState(!1),[o,l]=L.useState([]),[c,d]=L.useState("categories"),h=[{name:"Fantasy",keywords:"fantasy adventure magic quest",icon:"",description:"Magical journeys"},{name:"Sci-Fi",keywords:"space scifi future technology",icon:"",description:"Cosmic wonders"},{name:"Mystery",keywords:"mystery detective crime investigation",icon:"",description:"Perplexing cases"},{name:"Historical",keywords:"historical medieval renaissance ancient",icon:"",description:"Bygone eras"},{name:"Romance",keywords:"romance love relationship modern",icon:"",description:"Love stories"},{name:"Horror",keywords:"horror scary supernatural survival",icon:"",description:"Terrifying scenarios"},{name:"Combat",keywords:"combat battle arena warrior sword duel",icon:"",description:"Fierce battles"},{name:"Superhero",keywords:"superhero powers hero villain",icon:"",description:"Extraordinary heroes"}],w=v=>{i(!0),s(v);const S={"star wars":{universe:"Star Wars universe",settings:["Tatooine desert","Death Star","Rebel base","Imperial fleet","Jedi temple","Coruscant","Endor moon","Hoth ice planet"],characters:["Jedi Knight","Sith Lord","smuggler","rebel pilot","Imperial officer","bounty hunter","droid","Wookiee"],items:["lightsaber","blaster","starship","the Force","hyperdrive","droid","Millennium Falcon"],conflicts:["Rebellion against Empire","Jedi vs Sith","smuggling operation","space battle","lightsaber duel","Imperial invasion"],themes:["the Force","good vs evil","rebellion","destiny","redemption","legacy"]},"lord of the rings":{universe:"Middle-earth",settings:["Shire","Mordor","Rivendell","Gondor","Rohan","Moria mines","Lothlorien forest"],characters:["hobbit","wizard","elf","dwarf","ranger","orc","Ringwraith"],items:["the One Ring","Elvish blade","mithril armor","wizard staff","palantir"],conflicts:["quest to destroy the Ring","battle for Middle-earth","siege of Gondor","corruption by the Ring"],themes:["power and corruption","fellowship","heroism","sacrifice","journey"]},"harry potter":{universe:"Wizarding World",settings:["Hogwarts School","Diagon Alley","Ministry of Magic","Forbidden Forest","Hogsmeade village"],characters:["wizard student","professor","magical creature","Auror","Death Eater","house-elf"],items:["wand","broomstick","potion","magical artifact","Marauder's Map","invisibility cloak"],conflicts:["wizard duel","magical tournament","fight against dark magic","Quidditch match"],themes:["magic","friendship","coming of age","prejudice","sacrifice"]},"game of thrones":{universe:"Westeros",settings:["King's Landing","Winterfell","The Wall","Iron Islands","Dorne","Braavos"],characters:["noble lord","knight","sellsword","wildling","maester","assassin"],items:["Valyrian steel","dragon egg","wildfire","poison","direwolf"],conflicts:["battle for the throne","political intrigue","house rivalry","White Walker invasion"],themes:["power","betrayal","honor","survival","family legacy"]},marvel:{universe:"Marvel Universe",settings:["New York City","Avengers Tower","secret lab","alien planet","Wakanda","alternate dimension"],characters:["superhero","supervillain","S.H.I.E.L.D. agent","mutant","scientist","cosmic entity"],items:["super serum","Infinity Stone","advanced tech","magical artifact","vibranium shield"],conflicts:["alien invasion","superhero civil war","stopping a villain's plan","saving the universe"],themes:["responsibility","heroism","teamwork","identity","sacrifice"]}},m=f=>{const k=f.toLowerCase();for(const[T,M]of Object.entries(S))if(k.includes(T))return{franchise:T,themes:M};return k.includes("star")&&k.includes("wars")?{franchise:"star wars",themes:S["star wars"]}:k.includes("lord")&&k.includes("rings")?{franchise:"lord of the rings",themes:S["lord of the rings"]}:k.includes("harry")&&k.includes("potter")?{franchise:"harry potter",themes:S["harry potter"]}:k.includes("game")&&k.includes("thrones")?{franchise:"game of thrones",themes:S["game of thrones"]}:k.includes("marvel")||k.includes("avengers")?{franchise:"marvel",themes:S.marvel}:null},x=(f,k,T)=>{const M={universe:k.universe,setting:k.settings[Math.floor(Math.random()*k.settings.length)],character:k.characters[Math.floor(Math.random()*k.characters.length)],item:k.items[Math.floor(Math.random()*k.items.length)],theme:k.themes[Math.floor(Math.random()*k.themes.length)]};let I={};if(T==="action"){const N=k.conflicts[Math.floor(Math.random()*k.conflicts.length)];I={title:`Battle in the ${M.setting}`,description:`An epic ${N} unfolds in the ${M.setting}. As a ${M.character} wielding ${M.item}, you must face overwhelming odds in this tale of ${M.theme}.`,prompt:`The ${M.setting} is a battlefield. You are a skilled ${M.character} in the ${M.universe}, and your ${M.item} may be the key to victory. The enemy forces are closing in, and the fate of many depends on your courage and skill.`,type:"combat"}}else T==="mystery"?I={title:`Mystery of the ${M.setting}`,description:`A perplexing mystery has emerged in the ${M.setting}. As a clever ${M.character}, you must uncover secrets involving ${M.item} in this intriguing tale of ${M.theme}.`,prompt:`Something valuable has disappeared from the ${M.setting}. As a ${M.character} in the ${M.universe}, your knowledge of ${M.item} makes you uniquely qualified to investigate. Strange clues point to a conspiracy that could change everything.`,type:"mystery"}:I={title:`Journey Through the ${M.setting}`,description:`A personal journey unfolds in the ${M.setting}. As a ${M.character} with a connection to ${M.item}, you navigate relationships and discover the true meaning of ${M.theme}.`,prompt:`The ${M.setting} is where your story begins. As a ${M.character} in the ${M.universe}, your relationship with ${M.item} has shaped who you are. Now you face choices that will test your values and reveal your true character.`,type:"adventure"};const O={"star wars":["https://images.unsplash.com/photo-1579566346927-c68383817a25?q=80&w=2070&auto=format&fit=crop","https://images.unsplash.com/photo-1608346128025-1896b97a6fa7?q=80&w=2070&auto=format&fit=crop","https://images.unsplash.com/photo-1601814933824-fd0b574dd592?q=80&w=2012&auto=format&fit=crop"],"lord of the rings":["https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=2069&auto=format&fit=crop","https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=2074&auto=format&fit=crop","https://images.unsplash.com/photo-1536300007881-7e482242baa5?q=80&w=2070&auto=format&fit=crop"],"harry potter":["https://images.unsplash.com/photo-1551269901-5c5e14c25df7?q=80&w=2069&auto=format&fit=crop","https://images.unsplash.com/photo-1551022372-0bdac482a9c7?q=80&w=2070&auto=format&fit=crop","https://images.unsplash.com/photo-1618944847828-82e943c3bdb7?q=80&w=2070&auto=format&fit=crop"],"game of thrones":["https://images.unsplash.com/photo-1572742482459-e04d6cfdd6f3?q=80&w=2070&auto=format&fit=crop","https://images.unsplash.com/photo-1596636478939-59fed7a083f2?q=80&w=2071&auto=format&fit=crop","https://images.unsplash.com/photo-1504788363733-507549153474?q=80&w=2070&auto=format&fit=crop"],marvel:["https://images.unsplash.com/photo-1612036782180-6f0822045d55?q=80&w=2070&auto=format&fit=crop","https://images.unsplash.com/photo-1560343776-97e7d202ff0e?q=80&w=2069&auto=format&fit=crop","https://images.unsplash.com/photo-1569003339405-ea396a5a8a90?q=80&w=2070&auto=format&fit=crop"]};let H;if(O[f]){const N=T==="action"?0:T==="mystery"?1:2;H=O[f][N]}else H="linear-gradient(135deg, rgba(30,30,30,0.8), rgba(10,10,10,0.9))";return{title:I.title,description:I.description,prompt:I.prompt,type:I.type,background:H,franchise:f}},b=(f,k)=>{const T=f.toLowerCase().split(/[,\s]+/).filter(H=>H.length>2),M={action:["battle","combat","fight","action","conflict","challenge"],mystery:["mystery","investigation","secret","puzzle","intrigue","conspiracy"],character:["character","personal","emotional","relationship","development","backstory"],setting:["world","environment","location","atmosphere","landscape","setting"]},I=M[k]||M.action,O=[];for(let H=0;H<2;H++){const N=I[Math.floor(Math.random()*I.length)];O.includes(N)||O.push(N)}return[...T,...O].join(" ")};setTimeout(()=>{const f=m(v);let k=[];if(f){const{franchise:T,themes:M}=f;k=[x(T,M,"action"),x(T,M,"mystery"),x(T,M,"character")];const I=`${T} ${M.characters.join(" ")}`;k.forEach(O=>{O.characters=Ur(I,3)})}else{const T=b(v,"action"),M=b(v,"mystery"),I=b(v,"character");if(k=[hr(T),hr(M),hr(I)],new Set(k.map(H=>H.type)).size<3){const H=b(v,"setting");k[2]=hr(H)}k[0].characters=Ur(T,3),k[1].characters=Ur(M,3),k[2].characters=Ur(I,3)}k[0].actionFocus=!0,k[1].mysteryFocus=!0,k[2].characterFocus=!0,l(k),i(!1)},1e3)},y=v=>{e(v.title,v.characters,v.prompt,"",v.background)},p=()=>{w(r)},g=()=>{l([]),s("")};return n.jsxs("div",{className:"container mx-auto py-6 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsxs("button",{onClick:t,className:"mr-3 p-2 rounded-full hover:bg-secondary",children:[n.jsx(Nn,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Back"})]}),n.jsx("h1",{className:"text-2xl font-bold",children:"Choose Adventure"})]}),o.length>0&&n.jsx("button",{onClick:g,className:"p-2 rounded-full hover:bg-secondary",title:"Clear and start over",children:n.jsx(Ot,{className:"h-5 w-5"})})]}),o.length?n.jsxs("div",{className:"max-w-5xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-medium",children:"Choose your adventure"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:['Based on: "',r,'"']})]}),n.jsx("button",{onClick:p,disabled:a,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-3 py-1.5 text-xs font-medium shadow-sm hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:a?n.jsx(Rn,{className:"h-3.5 w-3.5 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Rn,{className:"h-3.5 w-3.5 mr-1.5"}),"Regenerate"]})})]}),n.jsx("div",{className:"space-y-3",children:o.map((v,S)=>n.jsxs("div",{className:"border rounded-lg overflow-hidden hover:border-primary/50 hover:shadow-md transition-all flex flex-col sm:flex-row",children:[n.jsxs("div",{className:"h-24 sm:w-1/4 sm:h-auto bg-cover bg-center relative",style:v.background.startsWith("linear-gradient")?{background:v.background}:{backgroundImage:`url(${v.background})`},children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 to-transparent sm:bg-gradient-to-r"}),n.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1 items-end",children:[v.franchise?n.jsx("div",{className:"bg-yellow-500/20 text-yellow-500 backdrop-blur-sm px-2 py-0.5 rounded-full text-xs font-medium",children:v.franchise.split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ")}):n.jsx("div",{className:"bg-background/80 backdrop-blur-sm px-2 py-0.5 rounded-full text-xs font-medium",children:v.type.charAt(0).toUpperCase()+v.type.slice(1)}),v.actionFocus&&n.jsx("div",{className:"bg-red-500/20 text-red-500 backdrop-blur-sm px-2 py-0.5 rounded-full text-xs font-medium",children:"Action"}),v.mysteryFocus&&n.jsx("div",{className:"bg-purple-500/20 text-purple-500 backdrop-blur-sm px-2 py-0.5 rounded-full text-xs font-medium",children:"Mystery"}),v.characterFocus&&n.jsx("div",{className:"bg-blue-500/20 text-blue-500 backdrop-blur-sm px-2 py-0.5 rounded-full text-xs font-medium",children:"Character"})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:hidden",children:n.jsx("h3",{className:"text-base font-bold text-foreground drop-shadow-sm line-clamp-1",children:v.title})})]}),n.jsxs("div",{className:"p-3 flex-1 flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"hidden sm:block text-base font-bold mb-1",children:v.title}),n.jsxs("div",{className:"mb-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:v.description}),n.jsxs("div",{className:"mt-1 text-xs",children:[v.actionFocus&&n.jsx("span",{className:"text-red-500 font-medium",children:"Focus on combat and challenges"}),v.mysteryFocus&&n.jsx("span",{className:"text-purple-500 font-medium",children:"Uncover secrets and solve puzzles"}),v.characterFocus&&n.jsx("span",{className:"text-blue-500 font-medium",children:"Deep character interactions"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex -space-x-1",children:v.characters.slice(0,3).map((m,x)=>n.jsxs("div",{className:"w-5 h-5 rounded-full bg-secondary/50 border border-background flex items-center justify-center text-xs",children:[m.type==="fantasy"&&"",m.type==="scifi"&&"",m.type==="historical"&&"",m.type==="horror"&&"",m.type==="combat"&&""]},x))}),n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:v.characters.map(m=>m.name).join(", ")})]})]}),n.jsxs("button",{onClick:()=>y(v),className:"w-full sm:w-auto inline-flex items-center justify-center rounded-md bg-primary px-3 py-1.5 text-xs font-medium text-primary-foreground shadow hover:bg-primary/90 mt-2 sm:mt-0",children:["Begin Adventure",n.jsx(hn,{className:"h-3.5 w-3.5 ml-1.5"})]})]})]},S))})]}):n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex border-b mb-4",children:[n.jsxs("button",{onClick:()=>d("categories"),className:`px-4 py-2 text-sm font-medium flex items-center ${c==="categories"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,children:[n.jsx(J,{className:"h-4 w-4 mr-2"}),"Popular Categories"]}),n.jsxs("button",{onClick:()=>d("custom"),className:`px-4 py-2 text-sm font-medium flex items-center ${c==="custom"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,children:[n.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Custom Keywords"]})]}),c==="categories"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",children:h.map(v=>n.jsxs("button",{onClick:()=>w(v.keywords),disabled:a,className:"flex items-center p-3 rounded-lg border border-border hover:border-primary/50 hover:bg-primary/5 transition-all",children:[n.jsx("span",{className:"text-2xl mr-3",children:v.icon}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-sm",children:v.name}),n.jsx("div",{className:"text-xs text-muted-foreground",children:v.description})]})]},v.name))}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-medium mb-3",children:"Inspired by Popular Media:"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("h4",{className:"text-xs text-muted-foreground mb-1.5 flex items-center",children:[n.jsx("span",{className:"mr-1.5",children:""})," Movies"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["Star Wars cantina","Jurassic Park adventure","Matrix digital world","Lord of the Rings quest","Harry Potter wizardry","Mad Max wasteland"].map(v=>n.jsx("button",{onClick:()=>w(v),disabled:a,className:"px-3 py-1 text-xs rounded-full border border-primary/20 hover:bg-primary/10 transition-colors",children:v},v))})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("h4",{className:"text-xs text-muted-foreground mb-1.5 flex items-center",children:[n.jsx("span",{className:"mr-1.5",children:""})," TV Shows"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["Game of Thrones intrigue","Stranger Things mystery","Breaking Bad tension","The Witcher monster hunt","Star Trek exploration","Walking Dead survival"].map(v=>n.jsx("button",{onClick:()=>w(v),disabled:a,className:"px-3 py-1 text-xs rounded-full border border-primary/20 hover:bg-primary/10 transition-colors",children:v},v))})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-xs text-muted-foreground mb-1.5 flex items-center",children:[n.jsx("span",{className:"mr-1.5",children:""})," Video Games"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["Skyrim adventure","Cyberpunk 2077 heist","Mass Effect alien diplomacy","Fallout wasteland","Zelda dungeon","Minecraft exploration"].map(v=>n.jsx("button",{onClick:()=>w(v),disabled:a,className:"px-3 py-1 text-xs rounded-full border border-primary/20 hover:bg-primary/10 transition-colors",children:v},v))})]})]})]}),c==="custom"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx("input",{type:"text",value:r,onChange:v=>s(v.target.value),placeholder:"Enter keywords (e.g., underwater city, time travel)",className:"w-full pl-10 pr-4 py-3 rounded-md border border-input bg-background",disabled:a})]}),n.jsxs("div",{className:"text-xs text-muted-foreground mb-4",children:[n.jsx("p",{children:"Try to be specific about the setting, time period, and mood. For example:"}),n.jsxs("ul",{className:"list-disc pl-5 mt-1 space-y-1",children:[n.jsx("li",{children:'"Post-apocalyptic desert with mutants and scarce resources"'}),n.jsx("li",{children:'"Victorian London mystery with supernatural elements"'}),n.jsx("li",{children:'"Space station diplomatic mission with alien delegates"'})]})]}),n.jsx("button",{onClick:()=>w(r),disabled:!r.trim()||a,className:"w-full inline-flex items-center justify-center rounded-md bg-primary px-4 py-2.5 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:a?n.jsx(Rn,{className:"h-5 w-5 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(J,{className:"h-5 w-5 mr-2"}),"Generate Adventures"]})})]})]})]})},pg=({selectedCharacters:e,onBack:t,onContinue:r})=>{const[s,a]=L.useState(""),[i,o]=L.useState(!1),[l,c]=L.useState([]),[d,h]=L.useState(""),[w,y]=L.useState(null),[p,g]=L.useState("select"),v=[{name:"Fantasy Adventure",keywords:"fantasy, magic, quest, adventure",icon:"",description:"Magical quests and epic journeys in fantastical worlds"},{name:"Sci-Fi Exploration",keywords:"sci-fi, space, technology, future",icon:"",description:"Futuristic technology and space exploration"},{name:"Mystery",keywords:"mystery, detective, investigation, clues",icon:"",description:"Solve puzzles and uncover secrets"},{name:"Romance",keywords:"romance, relationship, love, emotion",icon:"",description:"Emotional connections and relationships"},{name:"Historical",keywords:"historical, past, era, period",icon:"",description:"Adventures set in different time periods"},{name:"Comedy",keywords:"comedy, humor, funny, jokes",icon:"",description:"Light-hearted and humorous interactions"},{name:"Horror",keywords:"horror, scary, suspense, supernatural",icon:"",description:"Frightening and suspenseful situations"},{name:"Everyday Life",keywords:"modern, casual, everyday, slice of life",icon:"",description:"Casual conversations in modern settings"}],S=()=>{const f=v[Math.floor(Math.random()*v.length)];m(f.keywords)},m=f=>{o(!0),a(f),setTimeout(()=>{const k=hr(f);k.prompt=k.prompt+`

`+x(f),k.characters=e,c([k]),y(k),o(!1)},1e3)},x=f=>{f.toLowerCase().split(/[,\s]+/).filter(N=>N.length>2);const k=["morning","afternoon","evening","night","dawn","dusk"][Math.floor(Math.random()*6)],T=["clear","cloudy","rainy","stormy","foggy","snowy"][Math.floor(Math.random()*6)],M=["tense","peaceful","mysterious","exciting","melancholic","joyful"][Math.floor(Math.random()*6)];let I="";if(e.length>1){const N=["are old friends","have just met","are rivals","are family members","are colleagues","have a complicated history","are allies by necessity"];I=`The characters ${N[Math.floor(Math.random()*N.length)]}. `}const O=["They must work together to overcome an unexpected obstacle.","A secret threatens to be revealed that could change everything.","An important decision must be made that will affect everyone involved.","A mysterious stranger has information they desperately need.","Time is running out to accomplish their shared goal.","Trust is fragile as motivations remain unclear."],H=O[Math.floor(Math.random()*O.length)];return`It's ${k} and the weather is ${T}, creating a ${M} atmosphere. ${I}${H} As the scene unfolds, tensions rise and the characters must navigate their way through this situation.`},b=()=>{p==="custom"?r({title:"Custom Scenario",prompt:d,description:"A custom scenario created by you",characters:e,background:"linear-gradient(to right, #4568dc, #b06ab3)"}):w&&r(w)};return n.jsxs("div",{className:"container mx-auto py-4 px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsxs("button",{onClick:t,className:"mr-3 p-2 rounded-full hover:bg-secondary",children:[n.jsx(Nn,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Back"})]}),n.jsx("h1",{className:"text-2xl font-bold",children:"Choose Scenario"})]}),n.jsxs("div",{className:"flex items-center gap-1 bg-secondary/30 px-3 py-1 rounded-full text-xs",children:[n.jsx("div",{className:"flex -space-x-2 mr-1.5",children:e.slice(0,3).map((f,k)=>n.jsx("div",{className:`w-5 h-5 rounded-full border border-background flex items-center justify-center text-xs ${f.type==="fantasy"?"bg-purple-500/30":f.type==="scifi"?"bg-blue-500/30":f.type==="historical"?"bg-amber-500/30":f.type==="romance"?"bg-pink-500/30":f.type==="adventure"?"bg-orange-500/30":"bg-green-500/30"}`,children:f.name.charAt(0)},k))}),n.jsxs("span",{children:[e.length," character",e.length!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex border-b mb-4",children:[n.jsxs("button",{onClick:()=>g("select"),className:`px-4 py-2 text-sm font-medium flex items-center ${p==="select"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,children:[n.jsx(J,{className:"h-4 w-4 mr-2"}),"AI-Generated"]}),n.jsxs("button",{onClick:()=>g("custom"),className:`px-4 py-2 text-sm font-medium flex items-center ${p==="custom"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,children:[n.jsx(Ju,{className:"h-4 w-4 mr-2"}),"Custom"]})]}),p==="select"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),placeholder:"Enter keywords for your scenario (e.g., space pirates, medieval tavern)",className:"w-full pl-10 pr-4 py-3 rounded-md border border-input bg-background",disabled:i}),s&&n.jsx("button",{onClick:()=>a(""),className:"absolute right-14 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:n.jsx(Ot,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>m(s),disabled:!s.trim()||i,className:"absolute right-3 top-1/2 transform -translate-y-1/2 inline-flex items-center justify-center rounded-md bg-primary px-3 py-1 text-xs font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:i?n.jsx(Rn,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Mn,{className:"h-3.5 w-3.5 mr-1"}),"Generate"]})})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2 ml-1",children:"Choose a category below or enter your own keywords above"})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:v.map(f=>n.jsxs("button",{onClick:()=>m(f.keywords),disabled:i,className:"flex flex-col items-center justify-center p-3 rounded-lg border border-border hover:border-primary/50 hover:bg-primary/5 transition-all",children:[n.jsx("span",{className:"text-2xl mb-1",children:f.icon}),n.jsx("span",{className:"font-medium text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-muted-foreground text-center line-clamp-1",children:f.description})]},f.name))}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:"Popular combinations:"}),n.jsxs("button",{onClick:S,disabled:i,className:"inline-flex items-center justify-center rounded-md border border-primary/20 px-2 py-1 text-xs font-medium hover:bg-primary/10 transition-colors",children:[n.jsx(J,{className:"h-3 w-3 mr-1"}),"Random"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["Cyberpunk heist","Magical academy","Desert treasure hunt","Space station mystery","Underwater civilization","Time travel adventure"].map(f=>n.jsx("button",{onClick:()=>{a(f),m(f)},disabled:i,className:"px-3 py-1 text-xs rounded-full border border-primary/20 hover:bg-primary/10 transition-colors",children:f},f))})]})]}),l.length>0&&n.jsxs("div",{className:"mt-6 max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-lg font-bold",children:"Your Adventure Scenario"}),n.jsxs("button",{onClick:()=>m(s),className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-3 py-1.5 text-xs font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:[n.jsx(Rn,{className:"h-3.5 w-3.5 mr-1.5"}),"Generate New"]})]}),n.jsxs("div",{className:"border rounded-lg overflow-hidden border-primary/20 shadow-sm transition-all flex flex-col sm:flex-row",children:[n.jsxs("div",{className:"h-40 sm:w-1/3 sm:h-auto bg-cover bg-center relative",style:l[0].background.startsWith("linear-gradient")?{background:l[0].background}:{backgroundImage:`url(${l[0].background})`},children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 to-transparent sm:bg-gradient-to-r sm:from-transparent sm:to-background/70"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 sm:hidden",children:n.jsx("h3",{className:"text-xl font-bold text-white drop-shadow-md",children:l[0].title})})]}),n.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[n.jsx("h3",{className:"hidden sm:block text-xl font-bold mb-2",children:l[0].title}),n.jsxs("div",{className:"flex border-b mb-3",children:[n.jsx("button",{onClick:()=>{},className:"px-3 py-1.5 text-xs font-medium border-b-2 border-primary text-primary",children:"Overview"}),n.jsx("button",{onClick:()=>{},className:"px-3 py-1.5 text-xs font-medium text-muted-foreground",children:"Details"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Setting"}),n.jsx("p",{className:"text-sm",children:l[0].description})]}),l[0].prompt&&n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Scenario Preview"}),n.jsx("div",{className:"bg-secondary/20 p-3 rounded-md text-sm italic line-clamp-3",children:l[0].prompt.split(`
`)[0]}),n.jsx("button",{className:"text-xs text-primary mt-1 hover:underline",children:"Read more"})]}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("h4",{className:"text-xs font-medium text-muted-foreground mb-1.5",children:"Characters"}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:l[0].characters.map((f,k)=>n.jsxs("div",{className:"px-2 py-0.5 bg-secondary/30 rounded-md text-xs flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${f.type==="fantasy"?"bg-purple-500":f.type==="scifi"?"bg-blue-500":f.type==="historical"?"bg-amber-500":f.type==="romance"?"bg-pink-500":f.type==="adventure"?"bg-orange-500":"bg-green-500"}`}),f.name]},k))})]})]})]})]})]}),p==="custom"&&n.jsx("div",{className:"max-w-3xl mx-auto",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Create Your Scenario"}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[d.length," characters"]})]}),n.jsx("textarea",{value:d,onChange:f=>h(f.target.value),placeholder:`Describe your scenario here. Include details about:
 Setting: Where and when does this take place?
 Atmosphere: What's the mood? (tense, peaceful, mysterious)
 Character Relationships: How do they know each other?
 Situation: What's happening right now?
 Goal or Conflict: What needs to be resolved?`,className:"w-full px-3 py-2 rounded-md border border-input bg-background min-h-[200px] text-sm"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-xs font-medium text-muted-foreground mb-1.5",children:"Characters in this scenario:"}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map((f,k)=>n.jsxs("div",{className:"px-2 py-0.5 bg-secondary/30 rounded-md text-xs flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${f.type==="fantasy"?"bg-purple-500":f.type==="scifi"?"bg-blue-500":f.type==="historical"?"bg-amber-500":f.type==="romance"?"bg-pink-500":f.type==="adventure"?"bg-orange-500":"bg-green-500"}`}),f.name]},k))})]})]}),n.jsx("div",{className:"sm:w-64 flex-shrink-0",children:n.jsxs("div",{className:"bg-secondary/10 rounded-md p-3 border border-border/30",children:[n.jsxs("h3",{className:"text-xs font-medium mb-2 flex items-center",children:[n.jsx(J,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),"Tips for great scenarios:"]}),n.jsxs("ul",{className:"space-y-1.5 text-xs text-muted-foreground",children:[n.jsxs("li",{className:"flex items-start gap-1.5",children:[n.jsx("span",{className:"text-primary",children:""}),n.jsx("span",{children:"Be specific about sensory details"})]}),n.jsxs("li",{className:"flex items-start gap-1.5",children:[n.jsx("span",{className:"text-primary",children:""}),n.jsx("span",{children:"Establish character relationships"})]}),n.jsxs("li",{className:"flex items-start gap-1.5",children:[n.jsx("span",{className:"text-primary",children:""}),n.jsx("span",{children:"Include a central conflict or goal"})]}),n.jsxs("li",{className:"flex items-start gap-1.5",children:[n.jsx("span",{className:"text-primary",children:""}),n.jsx("span",{children:"Add environmental factors (weather, time)"})]}),n.jsxs("li",{className:"flex items-start gap-1.5",children:[n.jsx("span",{className:"text-primary",children:""}),n.jsx("span",{children:"Consider emotions you want to explore"})]})]}),n.jsxs("div",{className:"mt-3 pt-3 border-t border-border/30",children:[n.jsx("h4",{className:"text-xs font-medium mb-1.5",children:"Example starter:"}),n.jsx("p",{className:"text-xs text-muted-foreground italic",children:`"It's a rainy evening at the old lighthouse. The characters have gathered after receiving a mysterious letter. Tensions are high as each person seems to be hiding something..."`})]})]})})]})}),n.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t p-3 flex justify-between items-center mt-6",children:[n.jsxs("div",{className:"flex-1",children:[p==="select"&&w&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ready to start: ",n.jsx("span",{className:"font-medium text-foreground",children:w.title})]}),p==="custom"&&d.trim()&&n.jsx("span",{className:"text-xs text-muted-foreground",children:"Custom scenario ready"}),(p==="select"&&!w||p==="custom"&&!d.trim())&&n.jsx("span",{className:"text-xs text-muted-foreground",children:p==="select"?"Generate a scenario to continue":"Enter scenario details to continue"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-3 py-1.5 text-xs font-medium hover:bg-accent hover:text-accent-foreground",children:[n.jsx(Nn,{className:"h-3.5 w-3.5 mr-1.5"}),"Back"]}),n.jsxs("button",{onClick:b,disabled:p==="select"&&!w||p==="custom"&&!d.trim(),className:"inline-flex items-center justify-center rounded-md bg-primary px-3 py-1.5 text-xs font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:["Start Chat",n.jsx(hn,{className:"h-3.5 w-3.5 ml-1.5"})]})]})]})]})},fg=({onComplete:e,onSelectCharacter:t,onCreateScenario:r,onQuickStart:s})=>{const[a,i]=L.useState(1),[o,l]=L.useState([]),[c,d]=L.useState(()=>[...bn].sort(()=>.5-Math.random()).slice(0,6)),h=4,w=()=>{a<h?i(a+1):e(o)},y=()=>{a>1&&i(a-1)},p=g=>{o.some(v=>v.name===g.name)?l(o.filter(v=>v.name!==g.name)):l([...o,g])};return n.jsxs("div",{className:"min-h-screen flex flex-col",children:[n.jsx("header",{className:"border-b p-4",children:n.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Welcome to Velora"}),n.jsx("button",{onClick:()=>e(o),className:"text-sm text-muted-foreground hover:text-foreground",children:"Skip Tutorial"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsxs("div",{className:"container mx-auto max-w-4xl py-8 px-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-8",children:Array.from({length:h}).map((g,v)=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a>v+1?"bg-primary text-primary-foreground":a===v+1?"bg-primary/90 text-primary-foreground ring-2 ring-primary/30":"bg-secondary text-muted-foreground"}`,children:a>v+1?n.jsx(de,{className:"h-4 w-4"}):v+1}),v<h-1&&n.jsx("div",{className:`h-1 w-12 ${a>v+1?"bg-primary":"bg-secondary"}`})]},v))}),n.jsxs("div",{className:"bg-card rounded-lg border shadow-sm p-6 mb-8",children:[a===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to Velora!"}),n.jsx("p",{className:"text-muted-foreground",children:"Your portal to living conversations with AI characters"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(_n,{className:"h-5 w-5 mr-2 text-primary"}),n.jsx("h3",{className:"font-medium",children:"Engage in Dynamic Conversations"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Chat with AI characters that respond naturally and remember context."})]}),n.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(Qt,{className:"h-5 w-5 mr-2 text-primary"}),n.jsx("h3",{className:"font-medium",children:"Create Custom Characters"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose from our library or create your own unique characters."})]}),n.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(Ie,{className:"h-5 w-5 mr-2 text-primary"}),n.jsx("h3",{className:"font-medium",children:"Generate Scenarios"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Let AI create engaging scenarios based on your keywords and preferences."})]}),n.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(J,{className:"h-5 w-5 mr-2 text-primary"}),n.jsx("h3",{className:"font-medium",children:"No Login Required"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Start chatting immediately with no account creation or sign-up."})]})]})]}),a===2&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Choose Your Characters"}),n.jsx("p",{className:"text-muted-foreground",children:"Select characters to chat with or create your own"})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:c.map(g=>{var v;return n.jsxs("div",{onClick:()=>p(g),className:`rounded-lg border overflow-hidden cursor-pointer transition-all hover:shadow-md ${o.some(S=>S.name===g.name)?"border-primary shadow-md":"border-border hover:border-primary/50"}`,children:[n.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-secondary/50 to-primary/30 flex items-center justify-center overflow-hidden",children:[g.avatar?n.jsx("img",{src:g.avatar,alt:g.name,className:"w-full h-full object-cover"}):n.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-2xl ${g.type==="fantasy"?"bg-purple-500":g.type==="scifi"?"bg-blue-500":g.type==="historical"?"bg-amber-500":g.type==="modern"?"bg-green-500":"bg-gray-500"}`,children:g.name.charAt(0)}),o.some(S=>S.name===g.name)&&n.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center shadow-md",children:n.jsx(de,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("h3",{className:"font-medium",children:g.name}),n.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary rounded-full",children:g.type})]}),n.jsxs("p",{className:"text-xs text-muted-foreground line-clamp-2",children:[((v=g.description)==null?void 0:v.substring(0,80))||"A mysterious character with an unknown background.","..."]})]})]},g.name)})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:t,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:"Browse All Characters"}),n.jsxs("button",{onClick:()=>{const g=c.sort(()=>.5-Math.random()).slice(0,3);l(g)},className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:[n.jsx(J,{className:"h-4 w-4 mr-2"}),"Random Selection"]})]})]}),a===3&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Choose Your Adventure"}),n.jsx("p",{className:"text-muted-foreground",children:"Select how you want to start your conversation"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{onClick:s,className:"bg-background rounded-lg p-6 border hover:border-primary cursor-pointer transition-all hover:shadow-md flex flex-col items-center text-center",children:[n.jsx(J,{className:"h-10 w-10 mb-4 text-primary"}),n.jsx("h3",{className:"font-medium mb-2",children:"Quick Start"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose from pre-made scenarios based on themes like fantasy, sci-fi, or mystery."})]}),n.jsxs("div",{onClick:r,className:"bg-background rounded-lg p-6 border hover:border-primary cursor-pointer transition-all hover:shadow-md flex flex-col items-center text-center",children:[n.jsx(Ie,{className:"h-10 w-10 mb-4 text-primary"}),n.jsx("h3",{className:"font-medium mb-2",children:"AI-Generated"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Let AI create a custom scenario based on your keywords and preferences."})]}),n.jsxs("div",{onClick:()=>w(),className:"bg-background rounded-lg p-6 border hover:border-primary cursor-pointer transition-all hover:shadow-md flex flex-col items-center text-center",children:[n.jsx(_n,{className:"h-10 w-10 mb-4 text-primary"}),n.jsx("h3",{className:"font-medium mb-2",children:"Just Chat"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Start a conversation with your selected characters without a specific scenario."})]})]})]}),a===4&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Chat Tips & Features"}),n.jsx("p",{className:"text-muted-foreground",children:"Get the most out of your Velora experience"})]}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsx("div",{className:"bg-background rounded-lg p-4 border",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"bg-primary/10 rounded-full p-2 mr-3 mt-1",children:n.jsx("span",{className:"text-lg",children:"*"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-1",children:"Use Asterisks for Actions"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Type actions between asterisks like *smiles* or *opens the door* to describe physical actions."})]})]})}),n.jsx("div",{className:"bg-background rounded-lg p-4 border",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"bg-primary/10 rounded-full p-2 mr-3 mt-1",children:n.jsx(ns,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-1",children:"Narrate the Scene"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Use the Narrate button to add scene descriptions or move the story forward."})]})]})}),n.jsx("div",{className:"bg-background rounded-lg p-4 border",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"bg-primary/10 rounded-full p-2 mr-3 mt-1",children:n.jsx(Qt,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-1",children:"Switch Characters"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"You can speak as yourself or take on the role of any character in the chat."})]})]})}),n.jsx("div",{className:"bg-background rounded-lg p-4 border",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"bg-primary/10 rounded-full p-2 mr-3 mt-1",children:n.jsx(Ie,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-1",children:"AI Instructions"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Guide the AI's writing style, response length, and character behavior using the AI Instructions panel."})]})]})})]})]})]})]})}),n.jsx("footer",{className:"border-t p-4",children:n.jsxs("div",{className:"container mx-auto max-w-4xl flex justify-between",children:[n.jsxs("button",{onClick:y,disabled:a===1,className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Back"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsxs("span",{className:"text-sm text-muted-foreground mr-4",children:["Step ",a," of ",h]}),n.jsx("button",{onClick:w,className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90",children:a<h?n.jsxs(n.Fragment,{children:["Next",n.jsx(hn,{className:"h-4 w-4 ml-2"})]}):n.jsxs(n.Fragment,{children:["Get Started",n.jsx(hn,{className:"h-4 w-4 ml-2"})]})})]})]})})]})},gg=({onBack:e})=>{const[t,r]=L.useState("getting-started"),s=a=>{r(a),window.scrollTo(0,0)};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[n.jsx("header",{className:"border-b py-3 px-4 bg-background/95 backdrop-blur-sm sticky top-0 z-30 shadow-sm",children:n.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:e,className:"p-2 rounded-full hover:bg-secondary/80 transition-colors",title:"Back to Home",children:[n.jsx(Nn,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Back"})]}),n.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600",children:"How to Use Velora"})]}),n.jsxs("button",{onClick:e,className:"inline-flex items-center justify-center rounded-full bg-primary/10 px-4 py-1.5 text-sm font-medium text-primary hover:bg-primary/20 transition-colors",children:[n.jsx(sf,{className:"h-4 w-4 mr-1.5"}),"Return Home"]})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row flex-1",children:[n.jsx("aside",{className:"md:w-64 lg:w-72 border-r md:h-[calc(100vh-57px)] md:sticky md:top-[57px] bg-background/95 backdrop-blur-sm",children:n.jsxs("nav",{className:"p-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("button",{onClick:()=>s("getting-started"),className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors ${t==="getting-started"?"bg-primary/10 text-primary font-medium":"hover:bg-secondary/50 text-foreground"}`,children:[n.jsx(J,{className:"h-4 w-4"}),n.jsx("span",{children:"Getting Started"}),t==="getting-started"&&n.jsx($n,{className:"h-4 w-4 ml-auto"})]}),n.jsxs("button",{onClick:()=>s("chat-features"),className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors ${t==="chat-features"?"bg-primary/10 text-primary font-medium":"hover:bg-secondary/50 text-foreground"}`,children:[n.jsx(_n,{className:"h-4 w-4"}),n.jsx("span",{children:"Chat Features"}),t==="chat-features"&&n.jsx($n,{className:"h-4 w-4 ml-auto"})]}),n.jsxs("button",{onClick:()=>s("creating-content"),className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors ${t==="creating-content"?"bg-primary/10 text-primary font-medium":"hover:bg-secondary/50 text-foreground"}`,children:[n.jsx(Ie,{className:"h-4 w-4"}),n.jsx("span",{children:"Creating Content"}),t==="creating-content"&&n.jsx($n,{className:"h-4 w-4 ml-auto"})]}),n.jsxs("button",{onClick:()=>s("tips"),className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors ${t==="tips"?"bg-primary/10 text-primary font-medium":"hover:bg-secondary/50 text-foreground"}`,children:[n.jsx(Ca,{className:"h-4 w-4"}),n.jsx("span",{children:"Tips & Tricks"}),t==="tips"&&n.jsx($n,{className:"h-4 w-4 ml-auto"})]}),n.jsxs("button",{onClick:()=>s("faq"),className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors ${t==="faq"?"bg-primary/10 text-primary font-medium":"hover:bg-secondary/50 text-foreground"}`,children:[n.jsx(_n,{className:"h-4 w-4"}),n.jsx("span",{children:"FAQ"}),t==="faq"&&n.jsx($n,{className:"h-4 w-4 ml-auto"})]})]}),n.jsxs("div",{className:"mt-8 p-4 bg-primary/5 rounded-lg border border-primary/10",children:[n.jsx("h3",{className:"text-sm font-medium mb-2 text-primary",children:"Quick Start"}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"New to Velora? Watch our quick tutorial to get started in under 2 minutes."}),n.jsxs("button",{onClick:()=>{alert("Video tutorial coming soon!")},className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-xs font-medium rounded-md bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:[n.jsx(lf,{className:"h-3 w-3"}),n.jsx("span",{children:"Watch Tutorial"})]})]})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsxs("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:[t==="getting-started"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"inline-block bg-primary/10 px-3 py-1 rounded-full text-primary text-sm font-medium mb-3",children:"Guide"}),n.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Welcome to Velora"}),n.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Velora is your portal to living conversations with AI characters. This guide will help you get the most out of your experience."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-purple-500/5 rounded-xl p-6 mb-8",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Quick Start Guide"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4 items-start",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold flex-shrink-0",children:"1"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Choose how to start"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Select one of the three options on the home page:"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3",children:[n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg p-3 border border-primary/10 flex flex-col items-center text-center",children:[n.jsx(J,{className:"h-5 w-5 text-primary mb-2"}),n.jsx("span",{className:"text-sm font-medium",children:"Quick Start"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Fastest option"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg p-3 border border-primary/10 flex flex-col items-center text-center",children:[n.jsx(Qt,{className:"h-5 w-5 text-primary mb-2"}),n.jsx("span",{className:"text-sm font-medium",children:"Select Characters"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Choose specific characters"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg p-3 border border-primary/10 flex flex-col items-center text-center",children:[n.jsx(Ie,{className:"h-5 w-5 text-primary mb-2"}),n.jsx("span",{className:"text-sm font-medium",children:"Create Scenario"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Custom experience"})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 items-start",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold flex-shrink-0",children:"2"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Start chatting"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Once your chat room is set up, you can:"}),n.jsx("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg p-4 border border-primary/10 mt-2",children:n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"Type messages as yourself or take on the role of any character"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"Use *asterisks* to describe actions (e.g., *smiles warmly*)"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"Add narration to set the scene or move the story forward"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"Let AI characters respond automatically or prompt specific characters to speak"})]})]})})]})]}),n.jsxs("div",{className:"flex gap-4 items-start",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold flex-shrink-0",children:"3"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Save your experience"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"When you're done, you can save your chat to continue later:"}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg p-3 border border-primary/10 flex items-center gap-3 mt-2",children:[n.jsx(Gs,{className:"h-5 w-5 text-primary flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:'Click "Save Chat" in the top right'}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Your chat will be downloaded as a JSON file"})]})]})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[n.jsx(J,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Getting Started"})]}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Velora offers multiple ways to start a conversation:"}),n.jsxs("ul",{className:"space-y-3 text-sm",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary flex-shrink-0 mt-0.5 mr-2",children:n.jsx(J,{className:"h-3.5 w-3.5"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Quick Start:"})," Choose from pre-made scenarios based on themes"]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary flex-shrink-0 mt-0.5 mr-2",children:n.jsx(Qt,{className:"h-3.5 w-3.5"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Select Characters:"})," Browse and choose specific characters to chat with"]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary flex-shrink-0 mt-0.5 mr-2",children:n.jsx(Ie,{className:"h-3.5 w-3.5"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Create Custom Scenario:"})," Design your own scenario or let AI generate one"]})]})]})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[n.jsx(on,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"No Login Required"})]}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Velora is designed for immediate use without any account creation:"}),n.jsxs("ul",{className:"space-y-3 text-sm",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary flex-shrink-0 mt-0.5 mr-2",children:n.jsx(Gs,{className:"h-3.5 w-3.5"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Save Chats:"})," Download your conversations as JSON files to continue later"]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary flex-shrink-0 mt-0.5 mr-2",children:n.jsx(on,{className:"h-3.5 w-3.5"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Upload Chats:"})," Resume previous conversations by uploading saved files"]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary flex-shrink-0 mt-0.5 mr-2",children:n.jsx(de,{className:"h-3.5 w-3.5"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Private:"})," All conversations stay on your device unless you choose to save them"]})]})]})]})]})]}),t==="chat-features"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"inline-block bg-primary/10 px-3 py-1 rounded-full text-primary text-sm font-medium mb-3",children:"Features"}),n.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Chat Features"}),n.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Velora offers a rich set of features to make your conversations engaging and immersive."})]}),n.jsxs("div",{className:"bg-background/60 backdrop-blur-md rounded-xl border border-primary/20 shadow-lg overflow-hidden mb-8",children:[n.jsx("div",{className:"p-4 border-b border-primary/10 flex items-center justify-between",children:n.jsx("h3",{className:"font-medium",children:"Chat Interface Overview"})}),n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"bg-secondary/10 rounded-xl p-6 mb-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-3",children:"Message Area"}),n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Character Messages:"})," Messages from AI characters appear on the left"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Your Messages:"})," Your messages appear on the right"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"System Messages:"})," Narration and scene descriptions appear centered"]})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-3",children:"Input Area"}),n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Character Selection:"})," Choose which character you're speaking as"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Message Input:"})," Type your message or actions"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(de,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Quick Actions:"})," Access common actions like narration"]})]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary mb-3",children:n.jsx(_n,{className:"h-4 w-4"})}),n.jsx("h4",{className:"font-medium mb-2",children:"Character Messages"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Messages from AI characters appear with their name and avatar."})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary mb-3",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("h4",{className:"font-medium mb-2",children:"Narration"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Add scene descriptions and narrative elements to set the mood."})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary mb-3",children:n.jsx(J,{className:"h-4 w-4"})}),n.jsx("h4",{className:"font-medium mb-2",children:"Actions"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Use *asterisks* to describe actions your character is taking."})]})]})]})]}),n.jsxs("div",{className:"space-y-6 mb-8",children:[n.jsx("h3",{className:"text-xl font-semibold",children:"Key Chat Features"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h4",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[n.jsx(J,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Character Actions"})]}),n.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Make your conversations more immersive by including actions:"}),n.jsxs("div",{className:"bg-secondary/20 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Example:"}),n.jsx("p",{className:"text-sm",children:"Hello there! *extends hand for a handshake* I'm Captain Alex."})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Simply wrap your actions in asterisks (*) to distinguish them from regular speech."})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h4",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[n.jsx(ns,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Narration"})]}),n.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Add narrative elements to set the scene or advance the story:"}),n.jsxs("div",{className:"bg-secondary/20 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"How to use:"}),n.jsxs("p",{className:"text-sm",children:['1. Click the "Narrate" button',n.jsx("br",{}),"2. Type your narration",n.jsx("br",{}),"3. Send to add it to the chat"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Narration appears centered in the chat and is styled differently from regular messages."})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h4",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[n.jsx(Mn,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"AI Character Turns"})]}),n.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Let AI characters take their turn in the conversation:"}),n.jsxs("div",{className:"bg-secondary/20 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Two ways to use:"}),n.jsxs("p",{className:"text-sm",children:['1. Click "AI Turn" and select a character',n.jsx("br",{}),'2. Toggle "Auto-respond" for automatic replies']})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Characters will respond based on the conversation context and their personality."})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h4",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[n.jsx(rs,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"AI Style Instructions"})]}),n.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Guide how AI characters respond to you:"}),n.jsxs("div",{className:"bg-secondary/20 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Example instructions:"}),n.jsxs("p",{className:"text-sm",children:['"Respond in a poetic style"',n.jsx("br",{}),'"Keep responses brief and mysterious"',n.jsx("br",{}),'"Include technical jargon in your answers"']})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:'Click the "AI Style" button to set custom instructions for AI responses.'})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-purple-500/5 rounded-xl p-6",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Advanced Features"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4 flex gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0",children:n.jsx(Ca,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"What Next? Suggestions"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:'Not sure where to take the conversation? Use the "What Next?" feature to get AI-generated suggestions.'}),n.jsx("p",{className:"text-xs text-primary",children:"Click the lightbulb icon in the chat interface to see suggestions."})]})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4 flex gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0",children:n.jsx(J,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Scene Transitions"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Add atmospheric scene transitions to indicate the passage of time or changes in the environment."}),n.jsx("p",{className:"text-xs text-primary",children:'Click "Scene Transition" to add a random transition to your chat.'})]})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4 flex gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0",children:n.jsx(Gs,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Saving & Continuing Chats"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Save your conversations to continue them later or share with friends."}),n.jsx("p",{className:"text-xs text-primary",children:"Click the download icon in the chat header to save your chat as a JSON file."})]})]})]})]})]}),t==="creating-content"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"inline-block bg-primary/10 px-3 py-1 rounded-full text-primary text-sm font-medium mb-3",children:"Create"}),n.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Creating Content"}),n.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Learn how to create custom characters and scenarios to make your Velora experience uniquely yours."})]}),n.jsxs("div",{className:"bg-background/60 backdrop-blur-md rounded-xl border border-primary/20 shadow-lg overflow-hidden mb-8",children:[n.jsx("div",{className:"p-4 border-b border-primary/10 flex items-center justify-between",children:n.jsx("h3",{className:"font-medium",children:"Character Creation"})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Creating Characters"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Velora offers two ways to create characters:"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-secondary/10 rounded-lg p-4",children:[n.jsx("h5",{className:"font-medium mb-2 text-sm",children:"AI-Generated Characters"}),n.jsxs("ol",{className:"space-y-2 text-sm list-decimal pl-4",children:[n.jsx("li",{children:'Click "Select Characters" on the home page'}),n.jsx("li",{children:'Choose "Generate Character with AI"'}),n.jsx("li",{children:"Enter keywords describing the character you want"}),n.jsx("li",{children:"Review and edit the generated character"}),n.jsx("li",{children:'Click "Add to Chat" to include them'})]})]}),n.jsxs("div",{className:"bg-secondary/10 rounded-lg p-4",children:[n.jsx("h5",{className:"font-medium mb-2 text-sm",children:"Custom Characters"}),n.jsxs("ol",{className:"space-y-2 text-sm list-decimal pl-4",children:[n.jsx("li",{children:'Click "Select Characters" on the home page'}),n.jsx("li",{children:'Choose "Create Custom Character"'}),n.jsx("li",{children:"Fill in the character details manually"}),n.jsx("li",{children:'Click "Add to Chat" when finished'})]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-purple-500/5 rounded-xl p-6",children:[n.jsx("h4",{className:"font-medium mb-4",children:"Character Properties"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-3",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Name"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The character's full name"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-3",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Description"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Physical appearance, age, and other visual details"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-3",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Personality"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Character traits, quirks, and behavioral patterns"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-3",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Background"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"History, origins, and important life events"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-3",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Voice"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"How the character speaks, including accent, vocabulary, and speech patterns"})]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-primary/5 rounded-lg p-4 border border-primary/10",children:[n.jsxs("h5",{className:"font-medium mb-2 flex items-center gap-2",children:[n.jsx(J,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Pro Tip: Character Creation"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"For the most engaging characters, include contradictions and flaws. Perfect characters are less interesting than those with internal conflicts and room to grow."})]})]})]}),n.jsxs("div",{className:"bg-background/60 backdrop-blur-md rounded-xl border border-primary/20 shadow-lg overflow-hidden mb-8",children:[n.jsx("div",{className:"p-4 border-b border-primary/10 flex items-center justify-between",children:n.jsx("h3",{className:"font-medium",children:"Scenario Creation"})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[n.jsx(Ie,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Creating Scenarios"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Scenarios set the stage for your conversations. Here's how to create them:"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-secondary/10 rounded-lg p-4",children:[n.jsx("h5",{className:"font-medium mb-2 text-sm",children:"AI-Generated Scenarios"}),n.jsxs("ol",{className:"space-y-2 text-sm list-decimal pl-4",children:[n.jsx("li",{children:'Click "Create Scenario" on the home page'}),n.jsx("li",{children:"Enter keywords describing the scenario you want"}),n.jsx("li",{children:"Review and edit the generated scenario"}),n.jsx("li",{children:'Click "Continue" to select or create characters'}),n.jsx("li",{children:'Click "Start Chat" when ready'})]})]}),n.jsxs("div",{className:"bg-secondary/10 rounded-lg p-4",children:[n.jsx("h5",{className:"font-medium mb-2 text-sm",children:"Custom Scenarios"}),n.jsxs("ol",{className:"space-y-2 text-sm list-decimal pl-4",children:[n.jsx("li",{children:'Click "Create Scenario" on the home page'}),n.jsx("li",{children:'Choose "Create Custom Scenario"'}),n.jsx("li",{children:"Fill in the scenario details manually"}),n.jsx("li",{children:'Click "Continue" to select or create characters'}),n.jsx("li",{children:'Click "Start Chat" when ready'})]})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-purple-500/5 rounded-xl p-6 mb-6",children:[n.jsx("h4",{className:"font-medium mb-4",children:"Scenario Elements"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-3",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Setting"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Where and when the scenario takes place"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-3",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Situation"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The current circumstances or problem to be addressed"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-3",children:[n.jsx("h5",{className:"text-sm font-medium mb-1",children:"Mood"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The emotional tone of the scenario (tense, lighthearted, mysterious, etc.)"})]})]})]}),n.jsxs("div",{className:"bg-card rounded-lg border p-4",children:[n.jsx("h4",{className:"font-medium mb-3",children:"Example Scenario Keywords"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsx("div",{className:"bg-secondary/20 rounded p-2",children:"space exploration, alien encounter, diplomatic mission"}),n.jsx("div",{className:"bg-secondary/20 rounded p-2",children:"medieval tavern, adventurers, quest planning"}),n.jsx("div",{className:"bg-secondary/20 rounded p-2",children:"cyberpunk city, corporate espionage, rogue AI"}),n.jsx("div",{className:"bg-secondary/20 rounded p-2",children:"haunted mansion, paranormal investigators, mystery"}),n.jsx("div",{className:"bg-secondary/20 rounded p-2",children:"royal court, political intrigue, secret alliance"}),n.jsx("div",{className:"bg-secondary/20 rounded p-2",children:"desert oasis, travelers, ancient artifact"})]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-primary/5 rounded-lg p-4 border border-primary/10",children:[n.jsxs("h5",{className:"font-medium mb-2 flex items-center gap-2",children:[n.jsx(J,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Pro Tip: Scenario Creation"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"The best scenarios have clear stakes but leave room for character choices. Include a situation that needs resolution but don't prescribe exactly how it should be solved."})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-purple-500/5 rounded-xl p-6",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Quick Start Templates"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Not sure where to begin? Try one of these pre-made templates to get started quickly:"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Space Adventure"}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Explore the cosmos with a crew of diverse characters aboard a starship."}),n.jsx("div",{className:"text-xs text-primary",children:"Available in Quick Start"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Fantasy Quest"}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Join a party of adventurers in a magical world filled with wonder and danger."}),n.jsx("div",{className:"text-xs text-primary",children:"Available in Quick Start"})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Detective Mystery"}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Solve a perplexing case with a team of investigators in a noir-inspired setting."}),n.jsx("div",{className:"text-xs text-primary",children:"Available in Quick Start"})]})]})]})]}),t==="tips"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"inline-block bg-primary/10 px-3 py-1 rounded-full text-primary text-sm font-medium mb-3",children:"Tips"}),n.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Tips & Tricks"}),n.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Master Velora with these expert tips and tricks to create more engaging conversations."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[n.jsx(J,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Creating Engaging Conversations"})]}),n.jsxs("ul",{className:"space-y-3 text-sm",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0 mt-0.5",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Ask open-ended questions"}),` that can't be answered with just "yes" or "no"`]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0 mt-0.5",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Include actions"})," to make your messages more dynamic and expressive"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0 mt-0.5",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"React to what characters say"})," rather than changing the subject abruptly"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0 mt-0.5",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Create moments of tension"})," by introducing challenges or conflicts"]})]})]})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[n.jsx(Ie,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Advanced Character Interactions"})]}),n.jsxs("ul",{className:"space-y-3 text-sm",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0 mt-0.5",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Switch between characters"})," to create dialogue between multiple AI characters"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0 mt-0.5",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Use narration"})," to set the scene or advance time in the story"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0 mt-0.5",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsxs("span",{children:[n.jsx("strong",{children:"Customize AI instructions"})," to guide the tone and style of responses"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0 mt-0.5",children:n.jsx(de,{className:"h-3 w-3"})}),n.jsxs("span",{children:[n.jsx("strong",{children:'Use "What Next?" suggestions'})," when you're not sure how to proceed"]})]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-purple-500/5 rounded-xl p-6 mb-8",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Pro Tips for Immersive Experiences"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4",children:[n.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[n.jsx(J,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Creating Story Arcs"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Structure your conversations to follow a narrative arc for more satisfying experiences:"}),n.jsxs("ol",{className:"space-y-2 text-sm list-decimal pl-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Introduction:"})," Establish the setting and characters"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Rising Action:"})," Introduce a problem or challenge"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Climax:"})," Reach a critical moment or decision point"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Resolution:"})," Resolve the situation and reflect on outcomes"]})]})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4",children:[n.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[n.jsx(rs,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Writing Effective AI Instructions"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Customize how AI characters respond with these instruction patterns:"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsx("div",{className:"bg-secondary/20 rounded p-2 text-xs",children:'"Respond in a [style] manner with [specific details]"'}),n.jsx("div",{className:"bg-secondary/20 rounded p-2 text-xs",children:'"Keep your responses [length] and focus on [topic]"'}),n.jsx("div",{className:"bg-secondary/20 rounded p-2 text-xs",children:'"Include [specific elements] in your responses"'}),n.jsx("div",{className:"bg-secondary/20 rounded p-2 text-xs",children:'"Avoid [specific topics] and emphasize [preferred topics]"'})]})]})]})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[n.jsx(Mn,{className:"h-5 w-5 text-primary"}),n.jsx("span",{children:"Keyboard Shortcuts"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Speed up your interactions with these helpful keyboard shortcuts:"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary/10 rounded",children:[n.jsx("span",{children:"Send message"}),n.jsx("span",{className:"font-mono bg-secondary/30 px-2 py-0.5 rounded text-xs",children:"Enter"})]}),n.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary/10 rounded",children:[n.jsx("span",{children:"New line in message"}),n.jsx("span",{className:"font-mono bg-secondary/30 px-2 py-0.5 rounded text-xs",children:"Shift + Enter"})]}),n.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary/10 rounded",children:[n.jsx("span",{children:"Toggle narration mode"}),n.jsx("span",{className:"font-mono bg-secondary/30 px-2 py-0.5 rounded text-xs",children:"Alt + N"})]}),n.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary/10 rounded",children:[n.jsx("span",{children:"Toggle AI instructions"}),n.jsx("span",{className:"font-mono bg-secondary/30 px-2 py-0.5 rounded text-xs",children:"Alt + I"})]})]})]})]}),t==="faq"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"inline-block bg-primary/10 px-3 py-1 rounded-full text-primary text-sm font-medium mb-3",children:"FAQ"}),n.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Frequently Asked Questions"}),n.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Find answers to common questions about using Velora."})]}),n.jsxs("div",{className:"space-y-4 mb-8",children:[n.jsxs("div",{className:"bg-card rounded-xl border p-5 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Do I need to create an account to use Velora?"}),n.jsx("p",{className:"text-muted-foreground",children:"No, Velora is designed for immediate use without any account creation or sign-up process. You can start chatting right away."})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-5 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"How do I save my conversations?"}),n.jsx("p",{className:"text-muted-foreground mb-3",children:"You can save your conversations by clicking the Download icon in the chat header. This will save your chat as a JSON file that you can upload later to continue the conversation."}),n.jsxs("div",{className:"bg-secondary/10 rounded-lg p-3 flex items-center gap-3",children:[n.jsx(Gs,{className:"h-5 w-5 text-primary flex-shrink-0"}),n.jsx("p",{className:"text-sm",children:"Look for this icon in the top-right corner of the chat interface."})]})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-5 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Can I create my own characters?"}),n.jsx("p",{className:"text-muted-foreground",children:'Yes, you can create custom characters in two ways: by using the AI character generator with keywords, or by manually filling in character details yourself. Both options are available when you click "Select Characters" on the home page.'})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-5 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"How do I make characters perform actions?"}),n.jsx("p",{className:"text-muted-foreground",children:'To include actions in your messages, simply wrap the action text in asterisks (*). For example: "Hello there! *extends hand for a handshake* Nice to meet you."'})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-5 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Is my data private?"}),n.jsx("p",{className:"text-muted-foreground",children:"Yes, your conversations in Velora are private. Since there's no account system, your chats are stored locally in your browser. If you want to save them permanently, you need to download them using the Save Chat feature."})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-5 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Can I use Velora on mobile devices?"}),n.jsx("p",{className:"text-muted-foreground",children:"Yes, Velora is fully responsive and works on smartphones and tablets. The interface will adapt to your screen size for the best experience on any device."})]}),n.jsxs("div",{className:"bg-card rounded-xl border p-5 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"How do I get the AI to respond as a specific character?"}),n.jsx("p",{className:"text-muted-foreground",children:'You can prompt a specific AI character to respond by clicking the "AI Turn" button and selecting the character you want to speak. Alternatively, you can toggle "Auto-respond" to have characters respond automatically.'})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-purple-500/5 rounded-xl p-6",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Still Have Questions?"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"If you couldn't find the answer to your question, here are some additional resources:"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4 flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0",children:n.jsx(_n,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Contact Support"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Reach out to our support team for personalized help"})]})]}),n.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg border border-primary/10 p-4 flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary flex-shrink-0",children:n.jsx(ns,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Documentation"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Browse our detailed documentation for in-depth guides"})]})]})]})]})]})]})})]}),n.jsx("footer",{className:"border-t py-6",children:n.jsxs("div",{className:"container mx-auto max-w-4xl px-4 flex justify-between items-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:" 2024 Velora - No login required, just start chatting!"}),n.jsx("button",{onClick:e,className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90",children:"Return to Velora"})]})})]})};function yg(){const[e,t]=L.useState(()=>localStorage.getItem("velora-visited")?"landing":"onboarding"),[r,s]=L.useState([]),[a,i]=L.useState(null),[o,l]=L.useState([]),[c,d]=L.useState(null),h=g=>{t(g)},w=(g,v,S="",m="",x="")=>{const b=S&&S.trim()?S:`Welcome to "${g}". The scene is set and the characters are ready to interact. What happens next is up to you...`,f={name:g||"Chat Room",characters:v,openingPrompt:b,background:m,theme:x,createdAt:new Date().toISOString()};i(f);const k=bi(g,b,x);d(k);const T=[{id:Date.now(),system:!0,isNarration:!0,message:"The conversation begins...",timestamp:new Date().toISOString()}],M=Yn(g,x);if(console.log("Starting chat with scenario:",g),console.log("Characters:",v.map(I=>I.name)),M&&M.initialMessages&&M.initialMessages.length>0)console.log("Found scenario data with initial messages:",M.initialMessages.length),M.initialNarration&&T.push({id:Date.now()+1,system:!0,isNarration:!0,message:M.initialNarration,timestamp:new Date(new Date().getTime()+500).toISOString()}),M.initialMessages.forEach((I,O)=>{console.log(`Processing initial message from ${I.speaker}`);const H=v.findIndex(N=>N.name===I.speaker);if(H!==-1){console.log(`Found character ${I.speaker} at index ${H}`);const N={...v[H]};let D=I.message;D.includes("}")&&(D=D.replace(/\{[^}]*\}/g,""));const A=En(k,N);T.push({id:Date.now()+O+2,speaker:N.name,character:N,message:D,isUser:!1,isAction:I.isAction||!1,timestamp:new Date(new Date().getTime()+1e3*(O+1)).toISOString(),writingInstructions:A})}else console.warn(`Character ${I.speaker} not found in characters array!`),console.log("Available characters:",v.map(N=>N.name))});else if(v.length>0){const I=v[0],O=I.opening_line||`Hello! I'm ${I.name}. How can I help you today?`,H=En(k,I);T.push({id:Date.now()+1,speaker:I.name,character:I,message:O,isUser:!1,timestamp:new Date(new Date().getTime()+1e3).toISOString(),writingInstructions:H})}l(T),h("chat")},y=g=>{const v={name:g.room_name,characters:g.characters,background:g.background||"",theme:g.theme||"",openingPrompt:g.opening_prompt||"",createdAt:g.created_at||new Date().toISOString()};i(v);const S=g.chat_history.map(m=>({...m,id:m.id||Date.now()+Math.random(),timestamp:m.timestamp||new Date().toISOString(),character:m.character||(m.speaker?g.characters.find(x=>x.name===m.speaker):null)}));if(l(S),g.story_arc)d(g.story_arc);else{const m=bi(v.name,v.openingPrompt,v.theme);d(m)}h("chat")},p=()=>{const g={room_name:a.name,characters:a.characters,chat_history:o,background:a.background||"",theme:a.theme||"",opening_prompt:a.openingPrompt||"",created_at:a.createdAt||new Date().toISOString(),updated_at:new Date().toISOString(),story_arc:c||bi(a.name,a.openingPrompt,a.theme),version:"1.2.0"},v=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),S=URL.createObjectURL(v),m=document.createElement("a");return m.href=S,m.download=`velora-chat-${a.name.replace(/\s+/g,"-").toLowerCase()}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(S),!0};return L.useEffect(()=>{e!=="onboarding"&&localStorage.setItem("velora-visited","true")},[e]),n.jsx(Yp,{defaultTheme:"dark",storageKey:"velora-theme",children:n.jsxs("div",{className:"min-h-screen bg-background",children:[e==="onboarding"&&n.jsx(fg,{onComplete:g=>{g&&g.length>0?(s(g),w("Character Chat",g)):h("landing")},onSelectCharacter:()=>h("character-selection"),onCreateScenario:()=>h("custom-scenario"),onQuickStart:()=>h("quick-scenario")}),e==="landing"&&n.jsx(kf,{onSelectCharacter:()=>h("character-selection"),onCreateScenario:()=>h("custom-scenario"),onQuickStart:()=>h("quick-scenario"),onUploadChat:g=>y(g),onHowToUse:()=>h("how-to-use"),onStartChat:(g,v,S,m,x)=>w(g,v,S,m,x)}),e==="how-to-use"&&n.jsx(gg,{onBack:()=>h("landing")}),e==="character-selection"&&n.jsx(jf,{selectedCharacters:r,setSelectedCharacters:s,onStartChat:()=>h("scenario-selection"),onBack:()=>h("landing")}),e==="scenario-selection"&&n.jsx(pg,{selectedCharacters:r,onBack:()=>h("character-selection"),onContinue:g=>w(g.title,g.characters,g.prompt,g.background)}),e==="chat"&&n.jsx(lg,{chatRoom:a,chatHistory:o,setChatHistory:l,storyArc:c,setStoryArc:d,onSaveChat:p,onLeaveChat:()=>h("landing"),onHowToUse:()=>h("how-to-use")}),e==="custom-scenario"&&n.jsx(hg,{onCreateRoom:(g,v,S,m,x,b)=>w(g,v,S,x,b),onBack:()=>h("landing")}),e==="quick-scenario"&&n.jsx(mg,{onStartChat:(g,v,S,m,x,b)=>w(g,v,S,x,b),onBack:()=>h("landing")})]})})}Ni.createRoot(document.getElementById("root")).render(n.jsx(zh.StrictMode,{children:n.jsx(yg,{})}));
